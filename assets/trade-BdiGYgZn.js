import{__toESM as e,jsx as t,jsxs as n,require_client as r,require_react as i}from"./emotion-react-jsx-runtime.browser.esm-B32-BsBd.js";import"./genStyleUtils-y6NCoO9W.js";import{button_default as a,createMappedRegion_default as o,createRegion_default as s}from"./createRegion-DaUyV8hL.js";import{Markdown as c,deepseek as l,streamText as u}from"./models-BXNuGmPo.js";var d=e(i());const f=s(-1),p=o(``),m=e=>{let t=f.getValue(),n=[];for(let r=0;r<=t;r++){let t=p.getValue(r),i=t.startsWith(`[${e}]`);n.push({role:i?`assistant`:`user`,content:t})}return n},h=()=>{let e=f.useValue(),t=p.useValue(e),n=(0,d.useMemo)(()=>{let n=``;for(let t=0;t<e;t++)n+=p.getValue(t)+`

`;return n+t},[t,e]);return n},g=(e,t)=>{f.set(e=>e+1);let n=f.getValue();p.set(n,`[${e}]\n\n${t??``}`)},_=e=>{let t=f.getValue();p.set(t,t=>t+e)},v=e=>{g(`主持人`,e)},y=e=>{let{name:t,system:n,taskSystemMap:r}=e,i=e=>{let i=r[e.type];return u({model:l,system:n,messages:[{role:`system`,content:i??n},...m(t)]})},a=async e=>{g(t);let{textStream:n}=i(e);for await(let e of n)_(e)};return{name:t,speak:a}},b=()=>y({name:`基本面分析师`,system:`你是一位专业的股票基本面分析师。你只专注于基本面方向，团队中的其他成员会提供其他方向的专业意见，注意只提供事实，但不提供观点。在沟通时保持专业和客观。`,taskSystemMap:{ANALYSIS:`现在你需要产出一份基本面信息报告以帮助其他交易员进行决策。请分析过去一周内某公司的基本面信息。撰写一份全面的公司基本面信息报告，涵盖财务文件、公司简介、公司基本财务状况、公司财务历史、内部人士情绪和内部交易，以便全面了解公司的基本面信息，并告知交易员。请确保包含尽可能多的细节。不要简单地说趋势好坏参半，而要提供详细细致的分析和洞见，以帮助交易员做出决策。`}}),x=async()=>{v(`此次会议主要分析贵州茅台交易策略。分为三个阶段：产出分析报告、交易策略讨论、总结。`),v(`现在请基本面分析师用一句话聊一聊贵州茅台的基本面。`);let e=b();await e.speak({type:`CHAT`}),v(`现在请基本面分析师分析贵州茅台过去一周的基本面信息，并撰写一份全面的公司基本面信息报告。`),await e.speak({type:`ANALYSIS`})},S=()=>{let e=h();return n(`div`,{children:[t(a,{onClick:x,children:`开始`}),t(c,{children:e})]})};var C=e(r());const w=(0,C.createRoot)(document.body);w.render(t(S,{}));