import{__commonJSMin as e,__export as t,__toESM as n,jsx as r,require_jsx_runtime as i,require_react as a}from"./emotion-react-jsx-runtime.browser.esm-C2IGLFIp.js";function o(){}function s(){}function c(e,t){let n=t||{},r=e[e.length-1]===``?[...e,``]:e;return r.join((n.padRight?` `:``)+`,`+(n.padLeft===!1?``:` `)).trim()}const l=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,u=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,d={};function f(e,t){let n=t||d,r=n.jsx?u:l;return r.test(e)}const p=/[ \t\n\f\r]/g;function m(e){return typeof e==`object`?e.type===`text`?h(e.value):!1:h(e)}function h(e){return e.replace(p,``)===``}var g=class{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}};g.prototype.normal={},g.prototype.property={},g.prototype.space=void 0;function _(e,t){let n={},r={};for(let t of e)Object.assign(n,t.property),Object.assign(r,t.normal);return new g(n,r,t)}function v(e){return e.toLowerCase()}var y=class{constructor(e,t){this.attribute=t,this.property=e}};y.prototype.attribute=``,y.prototype.booleanish=!1,y.prototype.boolean=!1,y.prototype.commaOrSpaceSeparated=!1,y.prototype.commaSeparated=!1,y.prototype.defined=!1,y.prototype.mustUseProperty=!1,y.prototype.number=!1,y.prototype.overloadedBoolean=!1,y.prototype.property=``,y.prototype.spaceSeparated=!1,y.prototype.space=void 0;var b={};t(b,{boolean:()=>x,booleanish:()=>S,commaOrSpaceSeparated:()=>E,commaSeparated:()=>te,number:()=>w,overloadedBoolean:()=>C,spaceSeparated:()=>T});let ee=0;const x=D(),S=D(),C=D(),w=D(),T=D(),te=D(),E=D();function D(){return 2**++ee}const ne=Object.keys(b);var re=class extends y{constructor(e,t,n,r){let i=-1;if(super(e,t),ie(this,`space`,r),typeof n==`number`)for(;++i<ne.length;){let e=ne[i];ie(this,ne[i],(n&b[e])===b[e])}}};re.prototype.defined=!0;function ie(e,t,n){n&&(e[t]=n)}function O(e){let t={},n={};for(let[r,i]of Object.entries(e.properties)){let a=new re(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[v(r)]=r,n[v(a.attribute)]=r}return new g(t,n,e.space)}const ae=O({properties:{ariaActiveDescendant:null,ariaAtomic:S,ariaAutoComplete:null,ariaBusy:S,ariaChecked:S,ariaColCount:w,ariaColIndex:w,ariaColSpan:w,ariaControls:T,ariaCurrent:null,ariaDescribedBy:T,ariaDetails:null,ariaDisabled:S,ariaDropEffect:T,ariaErrorMessage:null,ariaExpanded:S,ariaFlowTo:T,ariaGrabbed:S,ariaHasPopup:null,ariaHidden:S,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:T,ariaLevel:w,ariaLive:null,ariaModal:S,ariaMultiLine:S,ariaMultiSelectable:S,ariaOrientation:null,ariaOwns:T,ariaPlaceholder:null,ariaPosInSet:w,ariaPressed:S,ariaReadOnly:S,ariaRelevant:null,ariaRequired:S,ariaRoleDescription:T,ariaRowCount:w,ariaRowIndex:w,ariaRowSpan:w,ariaSelected:S,ariaSetSize:w,ariaSort:null,ariaValueMax:w,ariaValueMin:w,ariaValueNow:w,ariaValueText:null,role:null},transform(e,t){return t===`role`?t:`aria-`+t.slice(4).toLowerCase()}});function oe(e,t){return t in e?e[t]:t}function se(e,t){return oe(e,t.toLowerCase())}const ce=O({attributes:{acceptcharset:`accept-charset`,classname:`class`,htmlfor:`for`,httpequiv:`http-equiv`},mustUseProperty:[`checked`,`multiple`,`muted`,`selected`],properties:{abbr:null,accept:te,acceptCharset:T,accessKey:T,action:null,allow:null,allowFullScreen:x,allowPaymentRequest:x,allowUserMedia:x,alt:null,as:null,async:x,autoCapitalize:null,autoComplete:T,autoFocus:x,autoPlay:x,blocking:T,capture:null,charSet:null,checked:x,cite:null,className:T,cols:w,colSpan:null,content:null,contentEditable:S,controls:x,controlsList:T,coords:w|te,crossOrigin:null,data:null,dateTime:null,decoding:null,default:x,defer:x,dir:null,dirName:null,disabled:x,download:C,draggable:S,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:x,formTarget:null,headers:T,height:w,hidden:C,high:w,href:null,hrefLang:null,htmlFor:T,httpEquiv:T,id:null,imageSizes:null,imageSrcSet:null,inert:x,inputMode:null,integrity:null,is:null,isMap:x,itemId:null,itemProp:T,itemRef:T,itemScope:x,itemType:T,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:x,low:w,manifest:null,max:null,maxLength:w,media:null,method:null,min:null,minLength:w,multiple:x,muted:x,name:null,nonce:null,noModule:x,noValidate:x,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:x,optimum:w,pattern:null,ping:T,placeholder:null,playsInline:x,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:x,referrerPolicy:null,rel:T,required:x,reversed:x,rows:w,rowSpan:w,sandbox:T,scope:null,scoped:x,seamless:x,selected:x,shadowRootClonable:x,shadowRootDelegatesFocus:x,shadowRootMode:null,shape:null,size:w,sizes:null,slot:null,span:w,spellCheck:S,src:null,srcDoc:null,srcLang:null,srcSet:null,start:w,step:null,style:null,tabIndex:w,target:null,title:null,translate:null,type:null,typeMustMatch:x,useMap:null,value:S,width:w,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:T,axis:null,background:null,bgColor:null,border:w,borderColor:null,bottomMargin:w,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:x,declare:x,event:null,face:null,frame:null,frameBorder:null,hSpace:w,leftMargin:w,link:null,longDesc:null,lowSrc:null,marginHeight:w,marginWidth:w,noResize:x,noHref:x,noShade:x,noWrap:x,object:null,profile:null,prompt:null,rev:null,rightMargin:w,rules:null,scheme:null,scrolling:S,standby:null,summary:null,text:null,topMargin:w,valueType:null,version:null,vAlign:null,vLink:null,vSpace:w,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:x,disableRemotePlayback:x,prefix:null,property:null,results:w,security:null,unselectable:null},space:`html`,transform:se}),le=O({attributes:{accentHeight:`accent-height`,alignmentBaseline:`alignment-baseline`,arabicForm:`arabic-form`,baselineShift:`baseline-shift`,capHeight:`cap-height`,className:`class`,clipPath:`clip-path`,clipRule:`clip-rule`,colorInterpolation:`color-interpolation`,colorInterpolationFilters:`color-interpolation-filters`,colorProfile:`color-profile`,colorRendering:`color-rendering`,crossOrigin:`crossorigin`,dataType:`datatype`,dominantBaseline:`dominant-baseline`,enableBackground:`enable-background`,fillOpacity:`fill-opacity`,fillRule:`fill-rule`,floodColor:`flood-color`,floodOpacity:`flood-opacity`,fontFamily:`font-family`,fontSize:`font-size`,fontSizeAdjust:`font-size-adjust`,fontStretch:`font-stretch`,fontStyle:`font-style`,fontVariant:`font-variant`,fontWeight:`font-weight`,glyphName:`glyph-name`,glyphOrientationHorizontal:`glyph-orientation-horizontal`,glyphOrientationVertical:`glyph-orientation-vertical`,hrefLang:`hreflang`,horizAdvX:`horiz-adv-x`,horizOriginX:`horiz-origin-x`,horizOriginY:`horiz-origin-y`,imageRendering:`image-rendering`,letterSpacing:`letter-spacing`,lightingColor:`lighting-color`,markerEnd:`marker-end`,markerMid:`marker-mid`,markerStart:`marker-start`,navDown:`nav-down`,navDownLeft:`nav-down-left`,navDownRight:`nav-down-right`,navLeft:`nav-left`,navNext:`nav-next`,navPrev:`nav-prev`,navRight:`nav-right`,navUp:`nav-up`,navUpLeft:`nav-up-left`,navUpRight:`nav-up-right`,onAbort:`onabort`,onActivate:`onactivate`,onAfterPrint:`onafterprint`,onBeforePrint:`onbeforeprint`,onBegin:`onbegin`,onCancel:`oncancel`,onCanPlay:`oncanplay`,onCanPlayThrough:`oncanplaythrough`,onChange:`onchange`,onClick:`onclick`,onClose:`onclose`,onCopy:`oncopy`,onCueChange:`oncuechange`,onCut:`oncut`,onDblClick:`ondblclick`,onDrag:`ondrag`,onDragEnd:`ondragend`,onDragEnter:`ondragenter`,onDragExit:`ondragexit`,onDragLeave:`ondragleave`,onDragOver:`ondragover`,onDragStart:`ondragstart`,onDrop:`ondrop`,onDurationChange:`ondurationchange`,onEmptied:`onemptied`,onEnd:`onend`,onEnded:`onended`,onError:`onerror`,onFocus:`onfocus`,onFocusIn:`onfocusin`,onFocusOut:`onfocusout`,onHashChange:`onhashchange`,onInput:`oninput`,onInvalid:`oninvalid`,onKeyDown:`onkeydown`,onKeyPress:`onkeypress`,onKeyUp:`onkeyup`,onLoad:`onload`,onLoadedData:`onloadeddata`,onLoadedMetadata:`onloadedmetadata`,onLoadStart:`onloadstart`,onMessage:`onmessage`,onMouseDown:`onmousedown`,onMouseEnter:`onmouseenter`,onMouseLeave:`onmouseleave`,onMouseMove:`onmousemove`,onMouseOut:`onmouseout`,onMouseOver:`onmouseover`,onMouseUp:`onmouseup`,onMouseWheel:`onmousewheel`,onOffline:`onoffline`,onOnline:`ononline`,onPageHide:`onpagehide`,onPageShow:`onpageshow`,onPaste:`onpaste`,onPause:`onpause`,onPlay:`onplay`,onPlaying:`onplaying`,onPopState:`onpopstate`,onProgress:`onprogress`,onRateChange:`onratechange`,onRepeat:`onrepeat`,onReset:`onreset`,onResize:`onresize`,onScroll:`onscroll`,onSeeked:`onseeked`,onSeeking:`onseeking`,onSelect:`onselect`,onShow:`onshow`,onStalled:`onstalled`,onStorage:`onstorage`,onSubmit:`onsubmit`,onSuspend:`onsuspend`,onTimeUpdate:`ontimeupdate`,onToggle:`ontoggle`,onUnload:`onunload`,onVolumeChange:`onvolumechange`,onWaiting:`onwaiting`,onZoom:`onzoom`,overlinePosition:`overline-position`,overlineThickness:`overline-thickness`,paintOrder:`paint-order`,panose1:`panose-1`,pointerEvents:`pointer-events`,referrerPolicy:`referrerpolicy`,renderingIntent:`rendering-intent`,shapeRendering:`shape-rendering`,stopColor:`stop-color`,stopOpacity:`stop-opacity`,strikethroughPosition:`strikethrough-position`,strikethroughThickness:`strikethrough-thickness`,strokeDashArray:`stroke-dasharray`,strokeDashOffset:`stroke-dashoffset`,strokeLineCap:`stroke-linecap`,strokeLineJoin:`stroke-linejoin`,strokeMiterLimit:`stroke-miterlimit`,strokeOpacity:`stroke-opacity`,strokeWidth:`stroke-width`,tabIndex:`tabindex`,textAnchor:`text-anchor`,textDecoration:`text-decoration`,textRendering:`text-rendering`,transformOrigin:`transform-origin`,typeOf:`typeof`,underlinePosition:`underline-position`,underlineThickness:`underline-thickness`,unicodeBidi:`unicode-bidi`,unicodeRange:`unicode-range`,unitsPerEm:`units-per-em`,vAlphabetic:`v-alphabetic`,vHanging:`v-hanging`,vIdeographic:`v-ideographic`,vMathematical:`v-mathematical`,vectorEffect:`vector-effect`,vertAdvY:`vert-adv-y`,vertOriginX:`vert-origin-x`,vertOriginY:`vert-origin-y`,wordSpacing:`word-spacing`,writingMode:`writing-mode`,xHeight:`x-height`,playbackOrder:`playbackorder`,timelineBegin:`timelinebegin`},properties:{about:E,accentHeight:w,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:w,amplitude:w,arabicForm:null,ascent:w,attributeName:null,attributeType:null,azimuth:w,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:w,by:null,calcMode:null,capHeight:w,className:T,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:w,diffuseConstant:w,direction:null,display:null,dur:null,divisor:w,dominantBaseline:null,download:x,dx:null,dy:null,edgeMode:null,editable:null,elevation:w,enableBackground:null,end:null,event:null,exponent:w,externalResourcesRequired:null,fill:null,fillOpacity:w,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:te,g2:te,glyphName:te,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:w,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:w,horizOriginX:w,horizOriginY:w,id:null,ideographic:w,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:w,k:w,k1:w,k2:w,k3:w,k4:w,kernelMatrix:E,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:w,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:w,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:w,overlineThickness:w,paintOrder:null,panose1:null,path:null,pathLength:w,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:T,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:w,pointsAtY:w,pointsAtZ:w,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:E,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:E,rev:E,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:E,requiredFeatures:E,requiredFonts:E,requiredFormats:E,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:w,specularExponent:w,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:w,strikethroughThickness:w,string:null,stroke:null,strokeDashArray:E,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:w,strokeOpacity:w,strokeWidth:null,style:null,surfaceScale:w,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:E,tabIndex:w,tableValues:null,target:null,targetX:w,targetY:w,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:E,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:w,underlineThickness:w,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:w,values:null,vAlphabetic:w,vMathematical:w,vectorEffect:null,vHanging:w,vIdeographic:w,version:null,vertAdvY:w,vertOriginX:w,vertOriginY:w,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:w,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:`svg`,transform:oe}),ue=O({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:`xlink`,transform(e,t){return`xlink:`+t.slice(5).toLowerCase()}}),de=O({attributes:{xmlnsxlink:`xmlns:xlink`},properties:{xmlnsXLink:null,xmlns:null},space:`xmlns`,transform:se}),fe=O({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:`xml`,transform(e,t){return`xml:`+t.slice(3).toLowerCase()}}),pe={classId:`classID`,dataType:`datatype`,itemId:`itemID`,strokeDashArray:`strokeDasharray`,strokeDashOffset:`strokeDashoffset`,strokeLineCap:`strokeLinecap`,strokeLineJoin:`strokeLinejoin`,strokeMiterLimit:`strokeMiterlimit`,typeOf:`typeof`,xLinkActuate:`xlinkActuate`,xLinkArcRole:`xlinkArcrole`,xLinkHref:`xlinkHref`,xLinkRole:`xlinkRole`,xLinkShow:`xlinkShow`,xLinkTitle:`xlinkTitle`,xLinkType:`xlinkType`,xmlnsXLink:`xmlnsXlink`},me=/[A-Z]/g,he=/-[a-z]/g,ge=/^data[-\w.:]+$/i;function _e(e,t){let n=v(t),r=t,i=y;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)===`data`&&ge.test(t)){if(t.charAt(4)===`-`){let e=t.slice(5).replace(he,ye);r=`data`+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!he.test(e)){let n=e.replace(me,ve);n.charAt(0)!==`-`&&(n=`-`+n),t=`data`+n}}i=re}return new i(r,t)}function ve(e){return`-`+e.toLowerCase()}function ye(e){return e.charAt(1).toUpperCase()}const be=_([ae,ce,ue,de,fe],`html`),xe=_([ae,le,ue,de,fe],`svg`);function Se(e){return e.join(` `).trim()}var Ce=e((exports,t)=>{var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,r=/\n/g,i=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,d=`/`,f=`*`,p=``,m=`comment`,h=`declaration`;t.exports=function(e,t){if(typeof e!=`string`)throw TypeError(`First argument must be a string`);if(!e)return[];t||={};var l=1,_=1;function v(e){var t=e.match(r);t&&(l+=t.length);var n=e.lastIndexOf(u);_=~n?e.length-n:_+e.length}function y(){var e={line:l,column:_};return function(t){return t.position=new b(e),C(),t}}function b(e){this.start=e,this.end={line:l,column:_},this.source=t.source}b.prototype.content=e;var ee=[];function x(n){var r=Error(t.source+`:`+l+`:`+_+`: `+n);if(r.reason=n,r.filename=t.source,r.line=l,r.column=_,r.source=e,t.silent)ee.push(r);else throw r}function S(t){var n=t.exec(e);if(n){var r=n[0];return v(r),e=e.slice(r.length),n}}function C(){S(i)}function w(e){var t;for(e||=[];t=T();)t!==!1&&e.push(t);return e}function T(){var t=y();if(!(d!=e.charAt(0)||f!=e.charAt(1))){for(var n=2;p!=e.charAt(n)&&(f!=e.charAt(n)||d!=e.charAt(n+1));)++n;if(n+=2,p===e.charAt(n-1))return x(`End of comment missing`);var r=e.slice(2,n-2);return _+=2,v(r),e=e.slice(n),_+=2,t({type:m,comment:r})}}function te(){var e=y(),t=S(a);if(t){if(T(),!S(o))return x(`property missing ':'`);var r=S(s),i=e({type:h,property:g(t[0].replace(n,p)),value:r?g(r[0].replace(n,p)):p});return S(c),i}}function E(){var e=[];w(e);for(var t;t=te();)t!==!1&&(e.push(t),w(e));return e}return C(),E()};function g(e){return e?e.replace(l,p):p}}),we=e(exports=>{var t=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.default=r;var n=t(Ce());function r(e,t){var r=null;if(!e||typeof e!=`string`)return r;var i=(0,n.default)(e),a=typeof t==`function`;return i.forEach(function(e){if(e.type===`declaration`){var n=e.property,i=e.value;a?t(n,i,e):i&&(r||={},r[n]=i)}}),r}}),Te=e(exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,r=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(e){return!e||r.test(e)||t.test(e)},s=function(e,t){return t.toUpperCase()},c=function(e,t){return`${t}-`},l=function(e,t){return t===void 0&&(t={}),o(e)?e:(e=e.toLowerCase(),e=t.reactCompat?e.replace(a,c):e.replace(i,c),e.replace(n,s))};exports.camelCase=l}),Ee=e((exports,t)=>{var n=function(e){return e&&e.__esModule?e:{default:e}},r=n(we()),i=Te();function a(e,t){var n={};return!e||typeof e!=`string`||(0,r.default)(e,function(e,r){e&&r&&(n[(0,i.camelCase)(e,t)]=r)}),n}a.default=a,t.exports=a});const De=ke(`end`),Oe=ke(`start`);function ke(e){return t;function t(t){let n=t&&t.position&&t.position[e]||{};if(typeof n.line==`number`&&n.line>0&&typeof n.column==`number`&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset==`number`&&n.offset>-1?n.offset:void 0}}}function Ae(e){let t=Oe(e),n=De(e);if(t&&n)return{start:t,end:n}}function je(e){return!e||typeof e!=`object`?``:`position`in e||`type`in e?Ne(e.position):`start`in e||`end`in e?Ne(e):`line`in e||`column`in e?Me(e):``}function Me(e){return Pe(e&&e.line)+`:`+Pe(e&&e.column)}function Ne(e){return Me(e&&e.start)+`-`+Me(e&&e.end)}function Pe(e){return e&&typeof e==`number`?e:1}var Fe=class extends Error{constructor(e,t,n){super(),typeof t==`string`&&(n=t,t=void 0);let r=``,i={},a=!1;if(t&&(i=`line`in t&&`column`in t||`start`in t&&`end`in t?{place:t}:`type`in t?{ancestors:[t],place:t.position}:{...t}),typeof e==`string`?r=e:!i.cause&&e&&(a=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof n==`string`){let e=n.indexOf(`:`);e===-1?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){let e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}let o=i.place&&`start`in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=o?o.line:void 0,this.name=je(i.place)||`1:1`,this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack==`string`?i.cause.stack:``,this.actual,this.expected,this.note,this.url}};Fe.prototype.file=``,Fe.prototype.name=``,Fe.prototype.reason=``,Fe.prototype.message=``,Fe.prototype.stack=``,Fe.prototype.column=void 0,Fe.prototype.line=void 0,Fe.prototype.ancestors=void 0,Fe.prototype.cause=void 0,Fe.prototype.fatal=void 0,Fe.prototype.place=void 0,Fe.prototype.ruleId=void 0,Fe.prototype.source=void 0;var Ie=n(Ee());const Le={}.hasOwnProperty,Re=new Map,ze=/[A-Z]/g,Be=new Set([`table`,`tbody`,`thead`,`tfoot`,`tr`]),Ve=new Set([`td`,`th`]),He=`https://github.com/syntax-tree/hast-util-to-jsx-runtime`;function Ue(e,t){if(!t||t.Fragment===void 0)throw TypeError("Expected `Fragment` in options");let n=t.filePath||void 0,r;if(t.development){if(typeof t.jsxDEV!=`function`)throw TypeError("Expected `jsxDEV` in options when `development: true`");r=et(n,t.jsxDEV)}else{if(typeof t.jsx!=`function`)throw TypeError("Expected `jsx` in production options");if(typeof t.jsxs!=`function`)throw TypeError("Expected `jsxs` in production options");r=$e(n,t.jsx,t.jsxs)}let i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||`react`,evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space===`svg`?xe:be,stylePropertyNameCase:t.stylePropertyNameCase||`dom`,tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=We(i,e,void 0);return a&&typeof a!=`string`?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function We(e,t,n){if(t.type===`element`)return Ge(e,t,n);if(t.type===`mdxFlowExpression`||t.type===`mdxTextExpression`)return Ke(e,t);if(t.type===`mdxJsxFlowElement`||t.type===`mdxJsxTextElement`)return Je(e,t,n);if(t.type===`mdxjsEsm`)return qe(e,t);if(t.type===`root`)return Ye(e,t,n);if(t.type===`text`)return Xe(e,t)}function Ge(e,t,n){let r=e.schema,i=r;t.tagName.toLowerCase()===`svg`&&r.space===`html`&&(i=xe,e.schema=i),e.ancestors.push(t);let a=ot(e,t.tagName,!1),o=tt(e,t),s=rt(e,t);return Be.has(t.tagName)&&(s=s.filter(function(e){return typeof e==`string`?!m(e):!0})),Ze(e,o,a,t),Qe(o,s),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function Ke(e,t){if(t.data&&t.data.estree&&e.evaluater){let n=t.data.estree,r=n.body[0];return o(r.type===`ExpressionStatement`),e.evaluater.evaluateExpression(r.expression)}st(e,t.position)}function qe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);st(e,t.position)}function Je(e,t,n){let r=e.schema,i=r;t.name===`svg`&&r.space===`html`&&(i=xe,e.schema=i),e.ancestors.push(t);let a=t.name===null?e.Fragment:ot(e,t.name,!0),o=nt(e,t),s=rt(e,t);return Ze(e,o,a,t),Qe(o,s),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function Ye(e,t,n){let r={};return Qe(r,rt(e,t)),e.create(t,e.Fragment,r,n)}function Xe(e,t){return t.value}function Ze(e,t,n,r){typeof n!=`string`&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Qe(e,t){if(t.length>0){let n=t.length>1?t:t[0];n&&(e.children=n)}}function $e(e,t,n){return r;function r(e,r,i,a){let o=Array.isArray(i.children),s=o?n:t;return a?s(r,i,a):s(r,i)}}function et(e,t){return n;function n(n,r,i,a){let o=Array.isArray(i.children),s=Oe(n);return t(r,i,a,o,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}function tt(e,t){let n={},r,i;for(i in t.properties)if(i!==`children`&&Le.call(t.properties,i)){let a=it(e,i,t.properties[i]);if(a){let[i,o]=a;e.tableCellAlignToStyle&&i===`align`&&typeof o==`string`&&Ve.has(t.tagName)?r=o:n[i]=o}}if(r){let t=n.style||={};t[e.stylePropertyNameCase===`css`?`text-align`:`textAlign`]=r}return n}function nt(e,t){let n={};for(let r of t.attributes)if(r.type===`mdxJsxExpressionAttribute`)if(r.data&&r.data.estree&&e.evaluater){let t=r.data.estree,i=t.body[0];o(i.type===`ExpressionStatement`);let a=i.expression;o(a.type===`ObjectExpression`);let s=a.properties[0];o(s.type===`SpreadElement`),Object.assign(n,e.evaluater.evaluateExpression(s.argument))}else st(e,t.position);else{let i=r.name,a;if(r.value&&typeof r.value==`object`)if(r.value.data&&r.value.data.estree&&e.evaluater){let t=r.value.data.estree,n=t.body[0];o(n.type===`ExpressionStatement`),a=e.evaluater.evaluateExpression(n.expression)}else st(e,t.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function rt(e,t){let n=[],r=-1,i=e.passKeys?new Map:Re;for(;++r<t.children.length;){let a=t.children[r],o;if(e.passKeys){let e=a.type===`element`?a.tagName:a.type===`mdxJsxFlowElement`||a.type===`mdxJsxTextElement`?a.name:void 0;if(e){let t=i.get(e)||0;o=e+`-`+t,i.set(e,t+1)}}let s=We(e,a,o);s!==void 0&&n.push(s)}return n}function it(e,t,n){let r=_e(e.schema,t);if(!(n==null||typeof n==`number`&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?c(n):Se(n)),r.property===`style`){let t=typeof n==`object`?n:at(e,String(n));return e.stylePropertyNameCase===`css`&&(t=ct(t)),[`style`,t]}return[e.elementAttributeNameCase===`react`&&r.space?pe[r.property]||r.property:r.attribute,n]}}function at(e,t){try{return(0,Ie.default)(t,{reactCompat:!0})}catch(t){if(e.ignoreInvalidStyle)return{};let n=t,r=new Fe("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:`style`,source:`hast-util-to-jsx-runtime`});throw r.file=e.filePath||void 0,r.url=He+`#cannot-parse-style-attribute`,r}}function ot(e,t,n){let r;if(!n)r={type:`Literal`,value:t};else if(t.includes(`.`)){let e=t.split(`.`),n=-1,i;for(;++n<e.length;){let t=f(e[n])?{type:`Identifier`,name:e[n]}:{type:`Literal`,value:e[n]};i=i?{type:`MemberExpression`,object:i,property:t,computed:!!(n&&t.type===`Literal`),optional:!1}:t}o(i,`always a result`),r=i}else r=f(t)&&!/^[a-z]/.test(t)?{type:`Identifier`,name:t}:{type:`Literal`,value:t};if(r.type===`Literal`){let t=r.value;return Le.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);st(e)}function st(e,t){let n=new Fe("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:`mdx-estree`,source:`hast-util-to-jsx-runtime`});throw n.file=e.filePath||void 0,n.url=He+`#cannot-handle-mdx-estrees-without-createevaluater`,n}function ct(e){let t={},n;for(n in e)Le.call(e,n)&&(t[lt(n)]=e[n]);return t}function lt(e){let t=e.replace(ze,ut);return t.slice(0,3)===`ms-`&&(t=`-`+t),t}function ut(e){return`-`+e.toLowerCase()}const dt={action:[`form`],cite:[`blockquote`,`del`,`ins`,`q`],data:[`object`],formAction:[`button`,`input`],href:[`a`,`area`,`base`,`link`],icon:[`menuitem`],itemId:null,manifest:[`html`],ping:[`a`,`area`],poster:[`video`],src:[`audio`,`embed`,`iframe`,`img`,`input`,`script`,`source`,`track`,`video`]},ft={};function pt(e,t){let n=t||ft,r=typeof n.includeImageAlt==`boolean`?n.includeImageAlt:!0,i=typeof n.includeHtml==`boolean`?n.includeHtml:!0;return mt(e,r,i)}function mt(e,t,n){if(gt(e)){if(`value`in e)return e.type===`html`&&!n?``:e.value;if(t&&`alt`in e&&e.alt)return e.alt;if(`children`in e)return ht(e.children,t,n)}return Array.isArray(e)?ht(e,t,n):``}function ht(e,t,n){let r=[],i=-1;for(;++i<e.length;)r[i]=mt(e[i],t,n);return r.join(``)}function gt(e){return!!(e&&typeof e==`object`)}const _t=document.createElement(`i`);function vt(e){let t=`&`+e+`;`;_t.innerHTML=t;let n=_t.textContent;return n.charCodeAt(n.length-1)===59&&e!==`semi`||n===t?!1:n}function yt(e,t,n,r){let i=e.length,a=0,o;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function bt(e,t){return e.length>0?(yt(e,e.length,0,t),e):t}const xt={}.hasOwnProperty;function St(e){let t={},n=-1;for(;++n<e.length;)Ct(t,e[n]);return t}function Ct(e,t){let n;for(n in t){let r=xt.call(e,n)?e[n]:void 0,i=r||(e[n]={}),a=t[n],o;if(a)for(o in a){xt.call(i,o)||(i[o]=[]);let e=a[o];wt(i[o],Array.isArray(e)?e:e?[e]:[])}}}function wt(e,t){let n=-1,r=[];for(;++n<t.length;)(t[n].add===`after`?e:r).push(t[n]);yt(e,0,0,r)}function Tt(e,t){let n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)==65535||(n&65535)==65534||n>1114111?`�`:String.fromCodePoint(n)}function Et(e){return e.replace(/[\t\n\r ]+/g,` `).replace(/^ | $/g,``).toLowerCase().toUpperCase()}const Dt=It(/[A-Za-z]/),Ot=It(/[\dA-Za-z]/),kt=It(/[#-'*+\--9=?A-Z^-~]/);function At(e){return e!==null&&(e<32||e===127)}const jt=It(/\d/),Mt=It(/[\dA-Fa-f]/),Nt=It(/[!-/:-@[-`{-~]/);function k(e){return e!==null&&e<-2}function A(e){return e!==null&&(e<0||e===32)}function j(e){return e===-2||e===-1||e===32}const Pt=It(/\p{P}|\p{S}/u),Ft=It(/\s/);function It(e){return t;function t(t){return t!==null&&t>-1&&e.test(String.fromCharCode(t))}}function Lt(e){let t=[],n=-1,r=0,i=0;for(;++n<e.length;){let a=e.charCodeAt(n),o=``;if(a===37&&Ot(e.charCodeAt(n+1))&&Ot(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){let t=e.charCodeAt(n+1);a<56320&&t>56319&&t<57344?(o=String.fromCharCode(a,t),i=1):o=`�`}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=``),i&&(n+=i,i=0)}return t.join(``)+e.slice(r)}function M(e,t,n,r){let i=r?r-1:1/0,a=0;return o;function o(r){return j(r)?(e.enter(n),s(r)):t(r)}function s(r){return j(r)&&a++<i?(e.consume(r),s):(e.exit(n),t(r))}}const Rt={tokenize:zt};function zt(e){let t=e.attempt(this.parser.constructs.contentInitial,r,i),n;return t;function r(n){if(n===null){e.consume(n);return}return e.enter(`lineEnding`),e.consume(n),e.exit(`lineEnding`),M(e,t,`linePrefix`)}function i(t){return e.enter(`paragraph`),a(t)}function a(t){let r=e.enter(`chunkText`,{contentType:`text`,previous:n});return n&&(n.next=r),n=r,o(t)}function o(t){if(t===null){e.exit(`chunkText`),e.exit(`paragraph`),e.consume(t);return}return k(t)?(e.consume(t),e.exit(`chunkText`),a):(e.consume(t),o)}}const Bt={tokenize:Ht},Vt={tokenize:Ut};function Ht(e){let t=this,n=[],r=0,i,a,o;return s;function s(i){if(r<n.length){let a=n[r];return t.containerState=a[1],e.attempt(a[0].continuation,c,l)(i)}return l(i)}function c(e){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();let n=t.events.length,a=n,o;for(;a--;)if(t.events[a][0]===`exit`&&t.events[a][1].type===`chunkFlow`){o=t.events[a][1].end;break}_(r);let s=n;for(;s<t.events.length;)t.events[s][1].end={...o},s++;return yt(t.events,a+1,0,t.events.slice(n)),t.events.length=s,l(e)}return s(e)}function l(a){if(r===n.length){if(!i)return f(a);if(i.currentConstruct&&i.currentConstruct.concrete)return m(a);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Vt,u,d)(a)}function u(e){return i&&v(),_(r),f(e)}function d(e){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,m(e)}function f(n){return t.containerState={},e.attempt(Vt,p,m)(n)}function p(e){return r++,n.push([t.currentConstruct,t.containerState]),f(e)}function m(n){if(n===null){i&&v(),_(0),e.consume(n);return}return i||=t.parser.flow(t.now()),e.enter(`chunkFlow`,{_tokenizer:i,contentType:`flow`,previous:a}),h(n)}function h(n){if(n===null){g(e.exit(`chunkFlow`),!0),_(0),e.consume(n);return}return k(n)?(e.consume(n),g(e.exit(`chunkFlow`)),r=0,t.interrupt=void 0,s):(e.consume(n),h)}function g(e,n){let s=t.sliceStream(e);if(n&&s.push(null),e.previous=a,a&&(a.next=e),a=e,i.defineSkip(e.start),i.write(s),t.parser.lazy[e.start.line]){let e=i.events.length;for(;e--;)if(i.events[e][1].start.offset<o&&(!i.events[e][1].end||i.events[e][1].end.offset>o))return;let n=t.events.length,a=n,s,c;for(;a--;)if(t.events[a][0]===`exit`&&t.events[a][1].type===`chunkFlow`){if(s){c=t.events[a][1].end;break}s=!0}for(_(r),e=n;e<t.events.length;)t.events[e][1].end={...c},e++;yt(t.events,a+1,0,t.events.slice(n)),t.events.length=e}}function _(r){let i=n.length;for(;i-- >r;){let r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function v(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Ut(e,t,n){return M(e,e.attempt(this.parser.constructs.document,t,n),`linePrefix`,this.parser.constructs.disable.null.includes(`codeIndented`)?void 0:4)}function Wt(e){if(e===null||A(e)||Ft(e))return 1;if(Pt(e))return 2}function Gt(e,t,n){let r=[],i=-1;for(;++i<e.length;){let a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Kt={name:`attention`,resolveAll:qt,tokenize:Jt};function qt(e,t){let n=-1,r,i,a,o,s,c,l,u;for(;++n<e.length;)if(e[n][0]===`enter`&&e[n][1].type===`attentionSequence`&&e[n][1]._close){for(r=n;r--;)if(e[r][0]===`exit`&&e[r][1].type===`attentionSequence`&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;let d={...e[r][1].end},f={...e[n][1].start};Yt(d,-c),Yt(f,c),o={type:c>1?`strongSequence`:`emphasisSequence`,start:d,end:{...e[r][1].end}},s={type:c>1?`strongSequence`:`emphasisSequence`,start:{...e[n][1].start},end:f},a={type:c>1?`strongText`:`emphasisText`,start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?`strong`:`emphasis`,start:{...o.start},end:{...s.end}},e[r][1].end={...o.start},e[n][1].start={...s.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=bt(l,[[`enter`,e[r][1],t],[`exit`,e[r][1],t]])),l=bt(l,[[`enter`,i,t],[`enter`,o,t],[`exit`,o,t],[`enter`,a,t]]),l=bt(l,Gt(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=bt(l,[[`exit`,a,t],[`enter`,s,t],[`exit`,s,t],[`exit`,i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=bt(l,[[`enter`,e[n][1],t],[`exit`,e[n][1],t]])):u=0,yt(e,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type===`attentionSequence`&&(e[n][1].type=`data`);return e}function Jt(e,t){let n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Wt(r),a;return o;function o(t){return a=t,e.enter(`attentionSequence`),s(t)}function s(o){if(o===a)return e.consume(o),s;let c=e.exit(`attentionSequence`),l=Wt(o),u=!l||l===2&&i||n.includes(o),d=!i||i===2&&l||n.includes(r);return c._open=!!(a===42?u:u&&(i||!d)),c._close=!!(a===42?d:d&&(l||!u)),t(o)}}function Yt(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Xt={name:`autolink`,tokenize:Zt};function Zt(e,t,n){let r=0;return i;function i(t){return e.enter(`autolink`),e.enter(`autolinkMarker`),e.consume(t),e.exit(`autolinkMarker`),e.enter(`autolinkProtocol`),a}function a(t){return Dt(t)?(e.consume(t),o):t===64?n(t):l(t)}function o(e){return e===43||e===45||e===46||Ot(e)?(r=1,s(e)):l(e)}function s(t){return t===58?(e.consume(t),r=0,c):(t===43||t===45||t===46||Ot(t))&&r++<32?(e.consume(t),s):(r=0,l(t))}function c(r){return r===62?(e.exit(`autolinkProtocol`),e.enter(`autolinkMarker`),e.consume(r),e.exit(`autolinkMarker`),e.exit(`autolink`),t):r===null||r===32||r===60||At(r)?n(r):(e.consume(r),c)}function l(t){return t===64?(e.consume(t),u):kt(t)?(e.consume(t),l):n(t)}function u(e){return Ot(e)?d(e):n(e)}function d(n){return n===46?(e.consume(n),r=0,u):n===62?(e.exit(`autolinkProtocol`).type=`autolinkEmail`,e.enter(`autolinkMarker`),e.consume(n),e.exit(`autolinkMarker`),e.exit(`autolink`),t):f(n)}function f(t){if((t===45||Ot(t))&&r++<63){let n=t===45?f:d;return e.consume(t),n}return n(t)}}const Qt={partial:!0,tokenize:$t};function $t(e,t,n){return r;function r(t){return j(t)?M(e,i,`linePrefix`)(t):i(t)}function i(e){return e===null||k(e)?t(e):n(e)}}const en={continuation:{tokenize:nn},exit:rn,name:`blockQuote`,tokenize:tn};function tn(e,t,n){let r=this;return i;function i(t){if(t===62){let n=r.containerState;return n.open||(e.enter(`blockQuote`,{_container:!0}),n.open=!0),e.enter(`blockQuotePrefix`),e.enter(`blockQuoteMarker`),e.consume(t),e.exit(`blockQuoteMarker`),a}return n(t)}function a(n){return j(n)?(e.enter(`blockQuotePrefixWhitespace`),e.consume(n),e.exit(`blockQuotePrefixWhitespace`),e.exit(`blockQuotePrefix`),t):(e.exit(`blockQuotePrefix`),t(n))}}function nn(e,t,n){let r=this;return i;function i(t){return j(t)?M(e,a,`linePrefix`,r.parser.constructs.disable.null.includes(`codeIndented`)?void 0:4)(t):a(t)}function a(r){return e.attempt(en,t,n)(r)}}function rn(e){e.exit(`blockQuote`)}const an={name:`characterEscape`,tokenize:on};function on(e,t,n){return r;function r(t){return e.enter(`characterEscape`),e.enter(`escapeMarker`),e.consume(t),e.exit(`escapeMarker`),i}function i(r){return Nt(r)?(e.enter(`characterEscapeValue`),e.consume(r),e.exit(`characterEscapeValue`),e.exit(`characterEscape`),t):n(r)}}const sn={name:`characterReference`,tokenize:cn};function cn(e,t,n){let r=this,i=0,a,o;return s;function s(t){return e.enter(`characterReference`),e.enter(`characterReferenceMarker`),e.consume(t),e.exit(`characterReferenceMarker`),c}function c(t){return t===35?(e.enter(`characterReferenceMarkerNumeric`),e.consume(t),e.exit(`characterReferenceMarkerNumeric`),l):(e.enter(`characterReferenceValue`),a=31,o=Ot,u(t))}function l(t){return t===88||t===120?(e.enter(`characterReferenceMarkerHexadecimal`),e.consume(t),e.exit(`characterReferenceMarkerHexadecimal`),e.enter(`characterReferenceValue`),a=6,o=Mt,u):(e.enter(`characterReferenceValue`),a=7,o=jt,u(t))}function u(s){if(s===59&&i){let i=e.exit(`characterReferenceValue`);return o===Ot&&!vt(r.sliceSerialize(i))?n(s):(e.enter(`characterReferenceMarker`),e.consume(s),e.exit(`characterReferenceMarker`),e.exit(`characterReference`),t)}return o(s)&&i++<a?(e.consume(s),u):n(s)}}const ln={partial:!0,tokenize:fn},un={concrete:!0,name:`codeFenced`,tokenize:dn};function dn(e,t,n){let r=this,i={partial:!0,tokenize:ee},a=0,o=0,s;return c;function c(e){return l(e)}function l(t){let n=r.events[r.events.length-1];return a=n&&n[1].type===`linePrefix`?n[2].sliceSerialize(n[1],!0).length:0,s=t,e.enter(`codeFenced`),e.enter(`codeFencedFence`),e.enter(`codeFencedFenceSequence`),u(t)}function u(t){return t===s?(o++,e.consume(t),u):o<3?n(t):(e.exit(`codeFencedFenceSequence`),j(t)?M(e,d,`whitespace`)(t):d(t))}function d(n){return n===null||k(n)?(e.exit(`codeFencedFence`),r.interrupt?t(n):e.check(ln,h,b)(n)):(e.enter(`codeFencedFenceInfo`),e.enter(`chunkString`,{contentType:`string`}),f(n))}function f(t){return t===null||k(t)?(e.exit(`chunkString`),e.exit(`codeFencedFenceInfo`),d(t)):j(t)?(e.exit(`chunkString`),e.exit(`codeFencedFenceInfo`),M(e,p,`whitespace`)(t)):t===96&&t===s?n(t):(e.consume(t),f)}function p(t){return t===null||k(t)?d(t):(e.enter(`codeFencedFenceMeta`),e.enter(`chunkString`,{contentType:`string`}),m(t))}function m(t){return t===null||k(t)?(e.exit(`chunkString`),e.exit(`codeFencedFenceMeta`),d(t)):t===96&&t===s?n(t):(e.consume(t),m)}function h(t){return e.attempt(i,b,g)(t)}function g(t){return e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),_}function _(t){return a>0&&j(t)?M(e,v,`linePrefix`,a+1)(t):v(t)}function v(t){return t===null||k(t)?e.check(ln,h,b)(t):(e.enter(`codeFlowValue`),y(t))}function y(t){return t===null||k(t)?(e.exit(`codeFlowValue`),v(t)):(e.consume(t),y)}function b(n){return e.exit(`codeFenced`),t(n)}function ee(e,t,n){let i=0;return a;function a(t){return e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),c}function c(t){return e.enter(`codeFencedFence`),j(t)?M(e,l,`linePrefix`,r.parser.constructs.disable.null.includes(`codeIndented`)?void 0:4)(t):l(t)}function l(t){return t===s?(e.enter(`codeFencedFenceSequence`),u(t)):n(t)}function u(t){return t===s?(i++,e.consume(t),u):i>=o?(e.exit(`codeFencedFenceSequence`),j(t)?M(e,d,`whitespace`)(t):d(t)):n(t)}function d(r){return r===null||k(r)?(e.exit(`codeFencedFence`),t(r)):n(r)}}}function fn(e,t,n){let r=this;return i;function i(t){return t===null?n(t):(e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),a)}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}const pn={name:`codeIndented`,tokenize:hn},mn={partial:!0,tokenize:gn};function hn(e,t,n){let r=this;return i;function i(t){return e.enter(`codeIndented`),M(e,a,`linePrefix`,5)(t)}function a(e){let t=r.events[r.events.length-1];return t&&t[1].type===`linePrefix`&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return t===null?c(t):k(t)?e.attempt(mn,o,c)(t):(e.enter(`codeFlowValue`),s(t))}function s(t){return t===null||k(t)?(e.exit(`codeFlowValue`),o(t)):(e.consume(t),s)}function c(n){return e.exit(`codeIndented`),t(n)}}function gn(e,t,n){let r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):k(t)?(e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),i):M(e,a,`linePrefix`,5)(t)}function a(e){let a=r.events[r.events.length-1];return a&&a[1].type===`linePrefix`&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):k(e)?i(e):n(e)}}const _n={name:`codeText`,previous:yn,resolve:vn,tokenize:bn};function vn(e){let t=e.length-4,n=3,r,i;if((e[n][1].type===`lineEnding`||e[n][1].type===`space`)&&(e[t][1].type===`lineEnding`||e[t][1].type===`space`)){for(r=n;++r<t;)if(e[r][1].type===`codeTextData`){e[n][1].type=`codeTextPadding`,e[t][1].type=`codeTextPadding`,n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!==`lineEnding`&&(i=r):(r===t||e[r][1].type===`lineEnding`)&&(e[i][1].type=`codeTextData`,r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function yn(e){return e!==96||this.events[this.events.length-1][1].type===`characterEscape`}function bn(e,t,n){let r=this,i=0,a,o;return s;function s(t){return e.enter(`codeText`),e.enter(`codeTextSequence`),c(t)}function c(t){return t===96?(e.consume(t),i++,c):(e.exit(`codeTextSequence`),l(t))}function l(t){return t===null?n(t):t===32?(e.enter(`space`),e.consume(t),e.exit(`space`),l):t===96?(o=e.enter(`codeTextSequence`),a=0,d(t)):k(t)?(e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),l):(e.enter(`codeTextData`),u(t))}function u(t){return t===null||t===32||t===96||k(t)?(e.exit(`codeTextData`),l(t)):(e.consume(t),u)}function d(n){return n===96?(e.consume(n),a++,d):a===i?(e.exit(`codeTextSequence`),e.exit(`codeText`),t(n)):(o.type=`codeTextData`,u(n))}}var xn=class{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let n=t??1/0;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){let r=t||0;this.setCursor(Math.trunc(e));let i=this.right.splice(this.right.length-r,1/0);return n&&Sn(this.left,n),i.reverse()}pop(){return this.setCursor(1/0),this.left.pop()}push(e){this.setCursor(1/0),this.left.push(e)}pushMany(e){this.setCursor(1/0),Sn(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Sn(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let t=this.left.splice(e,1/0);Sn(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,1/0);Sn(this.left,t.reverse())}}};function Sn(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Cn(e){let t={},n=-1,r,i,a,o,s,c,l,u=new xn(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type===`chunkFlow`&&u.get(n-1)[1].type===`listItemPrefix`&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type===`lineEndingBlank`&&(a+=2),a<c.length&&c[a][1].type===`content`))for(;++a<c.length&&c[a][1].type!==`content`;)c[a][1].type===`chunkText`&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]===`enter`)r[1].contentType&&(Object.assign(t,wn(u,n)),n=t[n],l=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=u.get(a),o[1].type===`lineEnding`||o[1].type===`lineEndingBlank`)o[0]===`enter`&&(i&&(u.get(i)[1].type=`lineEndingBlank`),o[1].type=`lineEnding`,i=a);else if(!(o[1].type===`linePrefix`||o[1].type===`listItemIndent`))break;i&&(r[1].end={...u.get(i)[1].start},s=u.slice(i,n),s.unshift(r),u.splice(i,n-i+1,s))}}return yt(e,0,1/0,u.slice(0)),!l}function wn(e,t){let n=e.get(t)[1],r=e.get(t)[2],i=t-1,a=[],o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));let s=o.events,c=[],l={},u,d,f=-1,p=n,m=0,h=0,g=[h];for(;p;){for(;e.get(++i)[1]!==p;);a.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++f<s.length;)s[f][0]===`exit`&&s[f-1][0]===`enter`&&s[f][1].type===s[f-1][1].type&&s[f][1].start.line!==s[f][1].end.line&&(h=f+1,g.push(h),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),f=g.length;f--;){let t=s.slice(g[f],g[f+1]),n=a.pop();c.push([n,n+t.length-1]),e.splice(n,2,t)}for(c.reverse(),f=-1;++f<c.length;)l[m+c[f][0]]=m+c[f][1],m+=c[f][1]-c[f][0]-1;return l}const Tn={resolve:Dn,tokenize:On},En={partial:!0,tokenize:kn};function Dn(e){return Cn(e),e}function On(e,t){let n;return r;function r(t){return e.enter(`content`),n=e.enter(`chunkContent`,{contentType:`content`}),i(t)}function i(t){return t===null?a(t):k(t)?e.check(En,o,a)(t):(e.consume(t),i)}function a(n){return e.exit(`chunkContent`),e.exit(`content`),t(n)}function o(t){return e.consume(t),e.exit(`chunkContent`),n.next=e.enter(`chunkContent`,{contentType:`content`,previous:n}),n=n.next,i}}function kn(e,t,n){let r=this;return i;function i(t){return e.exit(`chunkContent`),e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),M(e,a,`linePrefix`)}function a(i){if(i===null||k(i))return n(i);let a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes(`codeIndented`)&&a&&a[1].type===`linePrefix`&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function An(e,t,n,r,i,a,o,s,c){let l=c||1/0,u=0;return d;function d(t){return t===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),f):t===null||t===32||t===41||At(t)?n(t):(e.enter(r),e.enter(o),e.enter(s),e.enter(`chunkString`,{contentType:`string`}),h(t))}function f(n){return n===62?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter(`chunkString`,{contentType:`string`}),p(n))}function p(t){return t===62?(e.exit(`chunkString`),e.exit(s),f(t)):t===null||t===60||k(t)?n(t):(e.consume(t),t===92?m:p)}function m(t){return t===60||t===62||t===92?(e.consume(t),p):p(t)}function h(i){return!u&&(i===null||i===41||A(i))?(e.exit(`chunkString`),e.exit(s),e.exit(o),e.exit(r),t(i)):u<l&&i===40?(e.consume(i),u++,h):i===41?(e.consume(i),u--,h):i===null||i===32||i===40||At(i)?n(i):(e.consume(i),i===92?g:h)}function g(t){return t===40||t===41||t===92?(e.consume(t),h):h(t)}}function jn(e,t,n,r,i,a){let o=this,s=0,c;return l;function l(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),u}function u(l){return s>999||l===null||l===91||l===93&&!c||l===94&&!s&&`_hiddenFootnoteSupport`in o.parser.constructs?n(l):l===93?(e.exit(a),e.enter(i),e.consume(l),e.exit(i),e.exit(r),t):k(l)?(e.enter(`lineEnding`),e.consume(l),e.exit(`lineEnding`),u):(e.enter(`chunkString`,{contentType:`string`}),d(l))}function d(t){return t===null||t===91||t===93||k(t)||s++>999?(e.exit(`chunkString`),u(t)):(e.consume(t),c||=!j(t),t===92?f:d)}function f(t){return t===91||t===92||t===93?(e.consume(t),s++,d):d(t)}}function Mn(e,t,n,r,i,a){let o;return s;function s(t){return t===34||t===39||t===40?(e.enter(r),e.enter(i),e.consume(t),e.exit(i),o=t===40?41:t,c):n(t)}function c(n){return n===o?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===o?(e.exit(a),c(o)):t===null?n(t):k(t)?(e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),M(e,l,`linePrefix`)):(e.enter(`chunkString`,{contentType:`string`}),u(t))}function u(t){return t===o||t===null||k(t)?(e.exit(`chunkString`),l(t)):(e.consume(t),t===92?d:u)}function d(t){return t===o||t===92?(e.consume(t),u):u(t)}}function Nn(e,t){let n;return r;function r(i){return k(i)?(e.enter(`lineEnding`),e.consume(i),e.exit(`lineEnding`),n=!0,r):j(i)?M(e,r,n?`linePrefix`:`lineSuffix`)(i):t(i)}}const Pn={name:`definition`,tokenize:In},Fn={partial:!0,tokenize:Ln};function In(e,t,n){let r=this,i;return a;function a(t){return e.enter(`definition`),o(t)}function o(t){return jn.call(r,e,s,n,`definitionLabel`,`definitionLabelMarker`,`definitionLabelString`)(t)}function s(t){return i=Et(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),t===58?(e.enter(`definitionMarker`),e.consume(t),e.exit(`definitionMarker`),c):n(t)}function c(t){return A(t)?Nn(e,l)(t):l(t)}function l(t){return An(e,u,n,`definitionDestination`,`definitionDestinationLiteral`,`definitionDestinationLiteralMarker`,`definitionDestinationRaw`,`definitionDestinationString`)(t)}function u(t){return e.attempt(Fn,d,d)(t)}function d(t){return j(t)?M(e,f,`whitespace`)(t):f(t)}function f(a){return a===null||k(a)?(e.exit(`definition`),r.parser.defined.push(i),t(a)):n(a)}}function Ln(e,t,n){return r;function r(t){return A(t)?Nn(e,i)(t):n(t)}function i(t){return Mn(e,a,n,`definitionTitle`,`definitionTitleMarker`,`definitionTitleString`)(t)}function a(t){return j(t)?M(e,o,`whitespace`)(t):o(t)}function o(e){return e===null||k(e)?t(e):n(e)}}const Rn={name:`hardBreakEscape`,tokenize:zn};function zn(e,t,n){return r;function r(t){return e.enter(`hardBreakEscape`),e.consume(t),i}function i(r){return k(r)?(e.exit(`hardBreakEscape`),t(r)):n(r)}}const Bn={name:`headingAtx`,resolve:Vn,tokenize:Hn};function Vn(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type===`whitespace`&&(r+=2),n-2>r&&e[n][1].type===`whitespace`&&(n-=2),e[n][1].type===`atxHeadingSequence`&&(r===n-1||n-4>r&&e[n-2][1].type===`whitespace`)&&(n-=r+1===n?2:4),n>r&&(i={type:`atxHeadingText`,start:e[r][1].start,end:e[n][1].end},a={type:`chunkText`,start:e[r][1].start,end:e[n][1].end,contentType:`text`},yt(e,r,n-r+1,[[`enter`,i,t],[`enter`,a,t],[`exit`,a,t],[`exit`,i,t]])),e}function Hn(e,t,n){let r=0;return i;function i(t){return e.enter(`atxHeading`),a(t)}function a(t){return e.enter(`atxHeadingSequence`),o(t)}function o(t){return t===35&&r++<6?(e.consume(t),o):t===null||A(t)?(e.exit(`atxHeadingSequence`),s(t)):n(t)}function s(n){return n===35?(e.enter(`atxHeadingSequence`),c(n)):n===null||k(n)?(e.exit(`atxHeading`),t(n)):j(n)?M(e,s,`whitespace`)(n):(e.enter(`atxHeadingText`),l(n))}function c(t){return t===35?(e.consume(t),c):(e.exit(`atxHeadingSequence`),s(t))}function l(t){return t===null||t===35||A(t)?(e.exit(`atxHeadingText`),s(t)):(e.consume(t),l)}}const Un=`address.article.aside.base.basefont.blockquote.body.caption.center.col.colgroup.dd.details.dialog.dir.div.dl.dt.fieldset.figcaption.figure.footer.form.frame.frameset.h1.h2.h3.h4.h5.h6.head.header.hr.html.iframe.legend.li.link.main.menu.menuitem.nav.noframes.ol.optgroup.option.p.param.search.section.summary.table.tbody.td.tfoot.th.thead.title.tr.track.ul`.split(`.`),Wn=[`pre`,`script`,`style`,`textarea`],Gn={concrete:!0,name:`htmlFlow`,resolveTo:Jn,tokenize:Yn},Kn={partial:!0,tokenize:Zn},qn={partial:!0,tokenize:Xn};function Jn(e){let t=e.length;for(;t--&&!(e[t][0]===`enter`&&e[t][1].type===`htmlFlow`););return t>1&&e[t-2][1].type===`linePrefix`&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Yn(e,t,n){let r=this,i,a,o,s,c;return l;function l(e){return u(e)}function u(t){return e.enter(`htmlFlow`),e.enter(`htmlFlowData`),e.consume(t),d}function d(s){return s===33?(e.consume(s),f):s===47?(e.consume(s),a=!0,h):s===63?(e.consume(s),i=3,r.interrupt?t:se):Dt(s)?(e.consume(s),o=String.fromCharCode(s),g):n(s)}function f(a){return a===45?(e.consume(a),i=2,p):a===91?(e.consume(a),i=5,s=0,m):Dt(a)?(e.consume(a),i=4,r.interrupt?t:se):n(a)}function p(i){return i===45?(e.consume(i),r.interrupt?t:se):n(i)}function m(i){let a=`CDATA[`;return i===a.charCodeAt(s++)?(e.consume(i),s===a.length?r.interrupt?t:E:m):n(i)}function h(t){return Dt(t)?(e.consume(t),o=String.fromCharCode(t),g):n(t)}function g(s){if(s===null||s===47||s===62||A(s)){let c=s===47,l=o.toLowerCase();return!c&&!a&&Wn.includes(l)?(i=1,r.interrupt?t(s):E(s)):Un.includes(o.toLowerCase())?(i=6,c?(e.consume(s),_):r.interrupt?t(s):E(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):a?v(s):y(s))}return s===45||Ot(s)?(e.consume(s),o+=String.fromCharCode(s),g):n(s)}function _(i){return i===62?(e.consume(i),r.interrupt?t:E):n(i)}function v(t){return j(t)?(e.consume(t),v):T(t)}function y(t){return t===47?(e.consume(t),T):t===58||t===95||Dt(t)?(e.consume(t),b):j(t)?(e.consume(t),y):T(t)}function b(t){return t===45||t===46||t===58||t===95||Ot(t)?(e.consume(t),b):ee(t)}function ee(t){return t===61?(e.consume(t),x):j(t)?(e.consume(t),ee):y(t)}function x(t){return t===null||t===60||t===61||t===62||t===96?n(t):t===34||t===39?(e.consume(t),c=t,S):j(t)?(e.consume(t),x):C(t)}function S(t){return t===c?(e.consume(t),c=null,w):t===null||k(t)?n(t):(e.consume(t),S)}function C(t){return t===null||t===34||t===39||t===47||t===60||t===61||t===62||t===96||A(t)?ee(t):(e.consume(t),C)}function w(e){return e===47||e===62||j(e)?y(e):n(e)}function T(t){return t===62?(e.consume(t),te):n(t)}function te(t){return t===null||k(t)?E(t):j(t)?(e.consume(t),te):n(t)}function E(t){return t===45&&i===2?(e.consume(t),ie):t===60&&i===1?(e.consume(t),O):t===62&&i===4?(e.consume(t),ce):t===63&&i===3?(e.consume(t),se):t===93&&i===5?(e.consume(t),oe):k(t)&&(i===6||i===7)?(e.exit(`htmlFlowData`),e.check(Kn,le,D)(t)):t===null||k(t)?(e.exit(`htmlFlowData`),D(t)):(e.consume(t),E)}function D(t){return e.check(qn,ne,le)(t)}function ne(t){return e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),re}function re(t){return t===null||k(t)?D(t):(e.enter(`htmlFlowData`),E(t))}function ie(t){return t===45?(e.consume(t),se):E(t)}function O(t){return t===47?(e.consume(t),o=``,ae):E(t)}function ae(t){if(t===62){let n=o.toLowerCase();return Wn.includes(n)?(e.consume(t),ce):E(t)}return Dt(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),ae):E(t)}function oe(t){return t===93?(e.consume(t),se):E(t)}function se(t){return t===62?(e.consume(t),ce):t===45&&i===2?(e.consume(t),se):E(t)}function ce(t){return t===null||k(t)?(e.exit(`htmlFlowData`),le(t)):(e.consume(t),ce)}function le(n){return e.exit(`htmlFlow`),t(n)}}function Xn(e,t,n){let r=this;return i;function i(t){return k(t)?(e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),a):n(t)}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function Zn(e,t,n){return r;function r(r){return e.enter(`lineEnding`),e.consume(r),e.exit(`lineEnding`),e.attempt(Qt,t,n)}}const Qn={name:`htmlText`,tokenize:$n};function $n(e,t,n){let r=this,i,a,o;return s;function s(t){return e.enter(`htmlText`),e.enter(`htmlTextData`),e.consume(t),c}function c(t){return t===33?(e.consume(t),l):t===47?(e.consume(t),ee):t===63?(e.consume(t),y):Dt(t)?(e.consume(t),C):n(t)}function l(t){return t===45?(e.consume(t),u):t===91?(e.consume(t),a=0,m):Dt(t)?(e.consume(t),v):n(t)}function u(t){return t===45?(e.consume(t),p):n(t)}function d(t){return t===null?n(t):t===45?(e.consume(t),f):k(t)?(o=d,O(t)):(e.consume(t),d)}function f(t){return t===45?(e.consume(t),p):d(t)}function p(e){return e===62?ie(e):e===45?f(e):d(e)}function m(t){let r=`CDATA[`;return t===r.charCodeAt(a++)?(e.consume(t),a===r.length?h:m):n(t)}function h(t){return t===null?n(t):t===93?(e.consume(t),g):k(t)?(o=h,O(t)):(e.consume(t),h)}function g(t){return t===93?(e.consume(t),_):h(t)}function _(t){return t===62?ie(t):t===93?(e.consume(t),_):h(t)}function v(t){return t===null||t===62?ie(t):k(t)?(o=v,O(t)):(e.consume(t),v)}function y(t){return t===null?n(t):t===63?(e.consume(t),b):k(t)?(o=y,O(t)):(e.consume(t),y)}function b(e){return e===62?ie(e):y(e)}function ee(t){return Dt(t)?(e.consume(t),x):n(t)}function x(t){return t===45||Ot(t)?(e.consume(t),x):S(t)}function S(t){return k(t)?(o=S,O(t)):j(t)?(e.consume(t),S):ie(t)}function C(t){return t===45||Ot(t)?(e.consume(t),C):t===47||t===62||A(t)?w(t):n(t)}function w(t){return t===47?(e.consume(t),ie):t===58||t===95||Dt(t)?(e.consume(t),T):k(t)?(o=w,O(t)):j(t)?(e.consume(t),w):ie(t)}function T(t){return t===45||t===46||t===58||t===95||Ot(t)?(e.consume(t),T):te(t)}function te(t){return t===61?(e.consume(t),E):k(t)?(o=te,O(t)):j(t)?(e.consume(t),te):w(t)}function E(t){return t===null||t===60||t===61||t===62||t===96?n(t):t===34||t===39?(e.consume(t),i=t,D):k(t)?(o=E,O(t)):j(t)?(e.consume(t),E):(e.consume(t),ne)}function D(t){return t===i?(e.consume(t),i=void 0,re):t===null?n(t):k(t)?(o=D,O(t)):(e.consume(t),D)}function ne(t){return t===null||t===34||t===39||t===60||t===61||t===96?n(t):t===47||t===62||A(t)?w(t):(e.consume(t),ne)}function re(e){return e===47||e===62||A(e)?w(e):n(e)}function ie(r){return r===62?(e.consume(r),e.exit(`htmlTextData`),e.exit(`htmlText`),t):n(r)}function O(t){return e.exit(`htmlTextData`),e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),ae}function ae(t){return j(t)?M(e,oe,`linePrefix`,r.parser.constructs.disable.null.includes(`codeIndented`)?void 0:4)(t):oe(t)}function oe(t){return e.enter(`htmlTextData`),o(t)}}const er={name:`labelEnd`,resolveAll:ir,resolveTo:ar,tokenize:or},tr={tokenize:sr},nr={tokenize:cr},rr={tokenize:lr};function ir(e){let t=-1,n=[];for(;++t<e.length;){let r=e[t][1];if(n.push(e[t]),r.type===`labelImage`||r.type===`labelLink`||r.type===`labelEnd`){let e=r.type===`labelImage`?4:2;r.type=`data`,t+=e}}return e.length!==n.length&&yt(e,0,e.length,n),e}function ar(e,t){let n=e.length,r=0,i,a,o,s;for(;n--;)if(i=e[n][1],a){if(i.type===`link`||i.type===`labelLink`&&i._inactive)break;e[n][0]===`enter`&&i.type===`labelLink`&&(i._inactive=!0)}else if(o){if(e[n][0]===`enter`&&(i.type===`labelImage`||i.type===`labelLink`)&&!i._balanced&&(a=n,i.type!==`labelLink`)){r=2;break}}else i.type===`labelEnd`&&(o=n);let c={type:e[a][1].type===`labelLink`?`link`:`image`,start:{...e[a][1].start},end:{...e[e.length-1][1].end}},l={type:`label`,start:{...e[a][1].start},end:{...e[o][1].end}},u={type:`labelText`,start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return s=[[`enter`,c,t],[`enter`,l,t]],s=bt(s,e.slice(a+1,a+r+3)),s=bt(s,[[`enter`,u,t]]),s=bt(s,Gt(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),s=bt(s,[[`exit`,u,t],e[o-2],e[o-1],[`exit`,l,t]]),s=bt(s,e.slice(o+1)),s=bt(s,[[`exit`,c,t]]),yt(e,a,e.length,s),e}function or(e,t,n){let r=this,i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type===`labelImage`||r.events[i][1].type===`labelLink`)&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(t){return a?a._inactive?d(t):(o=r.parser.defined.includes(Et(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter(`labelEnd`),e.enter(`labelMarker`),e.consume(t),e.exit(`labelMarker`),e.exit(`labelEnd`),c):n(t)}function c(t){return t===40?e.attempt(tr,u,o?u:d)(t):t===91?e.attempt(nr,u,o?l:d)(t):o?u(t):d(t)}function l(t){return e.attempt(rr,u,d)(t)}function u(e){return t(e)}function d(e){return a._balanced=!0,n(e)}}function sr(e,t,n){return r;function r(t){return e.enter(`resource`),e.enter(`resourceMarker`),e.consume(t),e.exit(`resourceMarker`),i}function i(t){return A(t)?Nn(e,a)(t):a(t)}function a(t){return t===41?u(t):An(e,o,s,`resourceDestination`,`resourceDestinationLiteral`,`resourceDestinationLiteralMarker`,`resourceDestinationRaw`,`resourceDestinationString`,32)(t)}function o(t){return A(t)?Nn(e,c)(t):u(t)}function s(e){return n(e)}function c(t){return t===34||t===39||t===40?Mn(e,l,n,`resourceTitle`,`resourceTitleMarker`,`resourceTitleString`)(t):u(t)}function l(t){return A(t)?Nn(e,u)(t):u(t)}function u(r){return r===41?(e.enter(`resourceMarker`),e.consume(r),e.exit(`resourceMarker`),e.exit(`resource`),t):n(r)}}function cr(e,t,n){let r=this;return i;function i(t){return jn.call(r,e,a,o,`reference`,`referenceMarker`,`referenceString`)(t)}function a(e){return r.parser.defined.includes(Et(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}function lr(e,t,n){return r;function r(t){return e.enter(`reference`),e.enter(`referenceMarker`),e.consume(t),e.exit(`referenceMarker`),i}function i(r){return r===93?(e.enter(`referenceMarker`),e.consume(r),e.exit(`referenceMarker`),e.exit(`reference`),t):n(r)}}const ur={name:`labelStartImage`,resolveAll:er.resolveAll,tokenize:dr};function dr(e,t,n){let r=this;return i;function i(t){return e.enter(`labelImage`),e.enter(`labelImageMarker`),e.consume(t),e.exit(`labelImageMarker`),a}function a(t){return t===91?(e.enter(`labelMarker`),e.consume(t),e.exit(`labelMarker`),e.exit(`labelImage`),o):n(t)}function o(e){return e===94&&`_hiddenFootnoteSupport`in r.parser.constructs?n(e):t(e)}}const fr={name:`labelStartLink`,resolveAll:er.resolveAll,tokenize:pr};function pr(e,t,n){let r=this;return i;function i(t){return e.enter(`labelLink`),e.enter(`labelMarker`),e.consume(t),e.exit(`labelMarker`),e.exit(`labelLink`),a}function a(e){return e===94&&`_hiddenFootnoteSupport`in r.parser.constructs?n(e):t(e)}}const mr={name:`lineEnding`,tokenize:hr};function hr(e,t){return n;function n(n){return e.enter(`lineEnding`),e.consume(n),e.exit(`lineEnding`),M(e,t,`linePrefix`)}}const gr={name:`thematicBreak`,tokenize:_r};function _r(e,t,n){let r=0,i;return a;function a(t){return e.enter(`thematicBreak`),o(t)}function o(e){return i=e,s(e)}function s(a){return a===i?(e.enter(`thematicBreakSequence`),c(a)):r>=3&&(a===null||k(a))?(e.exit(`thematicBreak`),t(a)):n(a)}function c(t){return t===i?(e.consume(t),r++,c):(e.exit(`thematicBreakSequence`),j(t)?M(e,s,`whitespace`)(t):s(t))}}const vr={continuation:{tokenize:Sr},exit:wr,name:`list`,tokenize:xr},yr={partial:!0,tokenize:Tr},br={partial:!0,tokenize:Cr};function xr(e,t,n){let r=this,i=r.events[r.events.length-1],a=i&&i[1].type===`linePrefix`?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(t){let i=r.containerState.type||(t===42||t===43||t===45?`listUnordered`:`listOrdered`);if(i===`listUnordered`?!r.containerState.marker||t===r.containerState.marker:jt(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),i===`listUnordered`)return e.enter(`listItemPrefix`),t===42||t===45?e.check(gr,n,l)(t):l(t);if(!r.interrupt||t===49)return e.enter(`listItemPrefix`),e.enter(`listItemValue`),c(t)}return n(t)}function c(t){return jt(t)&&++o<10?(e.consume(t),c):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:t===41||t===46)?(e.exit(`listItemValue`),l(t)):n(t)}function l(t){return e.enter(`listItemMarker`),e.consume(t),e.exit(`listItemMarker`),r.containerState.marker=r.containerState.marker||t,e.check(Qt,r.interrupt?n:u,e.attempt(yr,f,d))}function u(e){return r.containerState.initialBlankLine=!0,a++,f(e)}function d(t){return j(t)?(e.enter(`listItemPrefixWhitespace`),e.consume(t),e.exit(`listItemPrefixWhitespace`),f):n(t)}function f(n){return r.containerState.size=a+r.sliceSerialize(e.exit(`listItemPrefix`),!0).length,t(n)}}function Sr(e,t,n){let r=this;return r.containerState._closeFlow=void 0,e.check(Qt,i,a);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,M(e,t,`listItemIndent`,r.containerState.size+1)(n)}function a(n){return r.containerState.furtherBlankLines||!j(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(br,t,o)(n))}function o(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,M(e,e.attempt(vr,t,n),`linePrefix`,r.parser.constructs.disable.null.includes(`codeIndented`)?void 0:4)(i)}}function Cr(e,t,n){let r=this;return M(e,i,`listItemIndent`,r.containerState.size+1);function i(e){let i=r.events[r.events.length-1];return i&&i[1].type===`listItemIndent`&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}}function wr(e){e.exit(this.containerState.type)}function Tr(e,t,n){let r=this;return M(e,i,`listItemPrefixWhitespace`,r.parser.constructs.disable.null.includes(`codeIndented`)?void 0:5);function i(e){let i=r.events[r.events.length-1];return!j(e)&&i&&i[1].type===`listItemPrefixWhitespace`?t(e):n(e)}}const Er={name:`setextUnderline`,resolveTo:Dr,tokenize:Or};function Dr(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]===`enter`){if(e[n][1].type===`content`){r=n;break}e[n][1].type===`paragraph`&&(i=n)}else e[n][1].type===`content`&&e.splice(n,1),!a&&e[n][1].type===`definition`&&(a=n);let o={type:`setextHeading`,start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type=`setextHeadingText`,a?(e.splice(i,0,[`enter`,o,t]),e.splice(a+1,0,[`exit`,e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push([`exit`,o,t]),e}function Or(e,t,n){let r=this,i;return a;function a(t){let a=r.events.length,s;for(;a--;)if(r.events[a][1].type!==`lineEnding`&&r.events[a][1].type!==`linePrefix`&&r.events[a][1].type!==`content`){s=r.events[a][1].type===`paragraph`;break}return!r.parser.lazy[r.now().line]&&(r.interrupt||s)?(e.enter(`setextHeadingLine`),i=t,o(t)):n(t)}function o(t){return e.enter(`setextHeadingLineSequence`),s(t)}function s(t){return t===i?(e.consume(t),s):(e.exit(`setextHeadingLineSequence`),j(t)?M(e,c,`lineSuffix`)(t):c(t))}function c(r){return r===null||k(r)?(e.exit(`setextHeadingLine`),t(r)):n(r)}}const kr={tokenize:Ar};function Ar(e){let t=this,n=e.attempt(Qt,r,e.attempt(this.parser.constructs.flowInitial,i,M(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Tn,i)),`linePrefix`)));return n;function r(r){if(r===null){e.consume(r);return}return e.enter(`lineEndingBlank`),e.consume(r),e.exit(`lineEndingBlank`),t.currentConstruct=void 0,n}function i(r){if(r===null){e.consume(r);return}return e.enter(`lineEnding`),e.consume(r),e.exit(`lineEnding`),t.currentConstruct=void 0,n}}const jr={resolveAll:Fr()},Mr=Pr(`string`),Nr=Pr(`text`);function Pr(e){return{resolveAll:Fr(e===`text`?Ir:void 0),tokenize:t};function t(t){let n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return c(e)?i(e):o(e)}function o(e){if(e===null){t.consume(e);return}return t.enter(`data`),t.consume(e),s}function s(e){return c(e)?(t.exit(`data`),i(e)):(t.consume(e),s)}function c(e){if(e===null)return!0;let t=r[e],i=-1;if(t)for(;++i<t.length;){let e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}function Fr(e){return t;function t(t,n){let r=-1,i;for(;++r<=t.length;)i===void 0?t[r]&&t[r][1].type===`data`&&(i=r,r++):(!t[r]||t[r][1].type!==`data`)&&(r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),r=i+2),i=void 0);return e?e(t,n):t}}function Ir(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type===`lineEnding`)&&e[n-1][1].type===`data`){let r=e[n-1][1],i=t.sliceStream(r),a=i.length,o=-1,s=0,c;for(;a--;){let e=i[a];if(typeof e==`string`){for(o=e.length;e.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(e===-2)c=!0,s++;else if(e!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(s=0),s){let i={type:n===e.length||c||s<2?`lineSuffix`:`hardBreakTrailing`,start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...i.start},r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,[`enter`,i,t],[`exit`,i,t]),n+=2)}n++}return e}var Lr={};t(Lr,{attentionMarkers:()=>Gr,contentInitial:()=>zr,disable:()=>Kr,document:()=>Rr,flow:()=>Vr,flowInitial:()=>Br,insideSpan:()=>Wr,string:()=>Hr,text:()=>Ur});const Rr={42:vr,43:vr,45:vr,48:vr,49:vr,50:vr,51:vr,52:vr,53:vr,54:vr,55:vr,56:vr,57:vr,62:en},zr={91:Pn},Br={[-2]:pn,[-1]:pn,32:pn},Vr={35:Bn,42:gr,45:[Er,gr],60:Gn,61:Er,95:gr,96:un,126:un},Hr={38:sn,92:an},Ur={[-5]:mr,[-4]:mr,[-3]:mr,33:ur,38:sn,42:Kt,60:[Xt,Qn],91:fr,92:[Rn,an],93:er,95:Kt,96:_n},Wr={null:[Kt,jr]},Gr={null:[42,95]},Kr={null:[]};function qr(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0},i={},a=[],o=[],s=[],c=!0,l={attempt:w(S),check:w(C),consume:b,enter:ee,exit:x,interrupt:w(C,{interrupt:!0})},u={code:null,containerState:{},defineSkip:_,events:[],now:g,parser:e,previous:null,sliceSerialize:m,sliceStream:h,write:p},d=t.tokenize.call(u,l),f;return t.resolveAll&&a.push(t),u;function p(e){return o=bt(o,e),v(),o[o.length-1]===null?(T(t,0),u.events=Gt(a,u.events,u),u.events):[]}function m(e,t){return Yr(h(e),t)}function h(e){return Jr(o,e)}function g(){let{_bufferIndex:e,_index:t,line:n,column:i,offset:a}=r;return{_bufferIndex:e,_index:t,line:n,column:i,offset:a}}function _(e){i[e.line]=e.column,E()}function v(){let e;for(;r._index<o.length;){let t=o[r._index];if(typeof t==`string`)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)y(t.charCodeAt(r._bufferIndex));else y(t)}}function y(e){c=void 0,f=e,d=d(e)}function b(e){k(e)?(r.line++,r.column=1,r.offset+=e===-3?2:1,E()):e!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=e,c=!0}function ee(e,t){let n=t||{};return n.type=e,n.start=g(),u.events.push([`enter`,n,u]),s.push(n),n}function x(e){let t=s.pop();return t.end=g(),u.events.push([`exit`,t,u]),t}function S(e,t){T(e,t.from)}function C(e,t){t.restore()}function w(e,t){return n;function n(n,r,i){let a,o,s,d;return Array.isArray(n)?p(n):`tokenize`in n?p([n]):f(n);function f(e){return t;function t(t){let n=t!==null&&e[t],r=t!==null&&e.null,i=[...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]];return p(i)(t)}}function p(e){return a=e,o=0,e.length===0?i:m(e[o])}function m(e){return n;function n(n){return d=te(),s=e,e.partial||(u.currentConstruct=e),e.name&&u.parser.constructs.disable.null.includes(e.name)?g(n):e.tokenize.call(t?Object.assign(Object.create(u),t):u,l,h,g)(n)}}function h(t){return c=!0,e(s,d),r}function g(e){return c=!0,d.restore(),++o<a.length?m(a[o]):i}}}function T(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&yt(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function te(){let e=g(),t=u.previous,n=u.currentConstruct,i=u.events.length,a=Array.from(s);return{from:i,restore:o};function o(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,s=a,E()}}function E(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Jr(e,t){let n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex,o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){let e=o[0];typeof e==`string`?o[0]=e.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function Yr(e,t){let n=-1,r=[],i;for(;++n<e.length;){let a=e[n],o;if(typeof a==`string`)o=a;else switch(a){case-5:o=`\r`;break;case-4:o=`
`;break;case-3:o=`\r
`;break;case-2:o=t?` `:`	`;break;case-1:if(!t&&i)continue;o=` `;break;default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join(``)}function Xr(e){let t=e||{},n=St([Lr,...t.extensions||[]]),r={constructs:n,content:i(Rt),defined:[],document:i(Bt),flow:i(kr),lazy:{},string:i(Mr),text:i(Nr)};return r;function i(e){return t;function t(t){return qr(r,e,t)}}}function Zr(e){for(;!Cn(e););return e}const Qr=/[\0\t\n\r]/g;function $r(){let e=1,t=``,n=!0,r;return i;function i(i,a,o){let s=[],c,l,u,d,f;for(i=t+(typeof i==`string`?i.toString():new TextDecoder(a||void 0).decode(i)),u=0,t=``,n&&(i.charCodeAt(0)===65279&&u++,n=void 0);u<i.length;){if(Qr.lastIndex=u,c=Qr.exec(i),d=c&&c.index!==void 0?c.index:i.length,f=i.charCodeAt(d),!c){t=i.slice(u);break}if(f===10&&u===d&&r)s.push(-3),r=void 0;else switch(r&&(s.push(-5),r=void 0),u<d&&(s.push(i.slice(u,d)),e+=d-u),f){case 0:s.push(65533),e++;break;case 9:for(l=Math.ceil(e/4)*4,s.push(-2);e++<l;)s.push(-1);break;case 10:s.push(-4),e=1;break;default:r=!0,e=1}u=d+1}return o&&(r&&s.push(-5),t&&s.push(t),s.push(null)),s}}const ei=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ti(e){return e.replace(ei,ni)}function ni(e,t,n){if(t)return t;let r=n.charCodeAt(0);if(r===35){let e=n.charCodeAt(1),t=e===120||e===88;return Tt(n.slice(t?2:1),t?16:10)}return vt(n)||e}const ri={}.hasOwnProperty;function ii(e,t,n){return typeof t!=`string`&&(n=t,t=void 0),ai(n)(Zr(Xr(n).document().write($r()(e,t,!0))))}function ai(e){let t={transforms:[],canContainEols:[`emphasis`,`fragment`,`heading`,`paragraph`,`strong`],enter:{autolink:a(Ee),autolinkProtocol:w,autolinkEmail:w,atxHeading:a(Se),blockQuote:a(_e),characterEscape:w,characterReference:w,codeFenced:a(ve),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(ve,o),codeText:a(ye,o),codeTextData:w,data:w,codeFlowValue:w,definition:a(be),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(xe),hardBreakEscape:a(Ce),hardBreakTrailing:a(Ce),htmlFlow:a(we,o),htmlFlowData:w,htmlText:a(we,o),htmlTextData:w,image:a(Te),label:o,link:a(Ee),listItem:a(Oe),listItemValue:f,listOrdered:a(De,d),listUnordered:a(De),paragraph:a(ke),reference:ue,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(Se),strong:a(Ae),thematicBreak:a(Ne)},exit:{atxHeading:c(),atxHeadingSequence:ee,autolink:c(),autolinkEmail:ge,autolinkProtocol:he,blockQuote:c(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:pe,characterReference:me,codeFenced:c(g),codeFencedFence:h,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:T,codeIndented:c(_),codeText:c(re),codeTextData:T,data:T,definition:c(),definitionDestinationString:b,definitionLabelString:v,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(E),hardBreakTrailing:c(E),htmlFlow:c(D),htmlFlowData:T,htmlText:c(ne),htmlTextData:T,image:c(O),label:oe,labelText:ae,lineEnding:te,link:c(ie),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:de,resourceDestinationString:se,resourceTitleString:ce,resource:le,setextHeading:c(C),setextHeadingLineSequence:S,setextHeadingText:x,strong:c(),thematicBreak:c()}};si(t,(e||{}).mdastExtensions||[]);let n={};return r;function r(e){let r={type:`root`,children:[]},a={stack:[r],tokenStack:[],config:t,enter:s,exit:l,buffer:o,resume:u,data:n},c=[],d=-1;for(;++d<e.length;)if(e[d][1].type===`listOrdered`||e[d][1].type===`listUnordered`)if(e[d][0]===`enter`)c.push(d);else{let t=c.pop();d=i(e,t,d)}for(d=-1;++d<e.length;){let n=t[e[d][0]];ri.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},a),e[d][1])}if(a.tokenStack.length>0){let e=a.tokenStack[a.tokenStack.length-1],t=e[1]||li;t.call(a,void 0,e[0])}for(r.position={start:oi(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:oi(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r=t-1,i=-1,a=!1,o,s,c,l;for(;++r<=n;){let t=e[r];switch(t[1].type){case`listUnordered`:case`listOrdered`:case`blockQuote`:t[0]===`enter`?i++:i--,l=void 0;break;case`lineEndingBlank`:t[0]===`enter`&&(o&&!l&&!i&&!c&&(c=r),l=void 0);break;case`linePrefix`:case`listItemValue`:case`listItemMarker`:case`listItemPrefix`:case`listItemPrefixWhitespace`:break;default:l=void 0}if(!i&&t[0]===`enter`&&t[1].type===`listItemPrefix`||i===-1&&t[0]===`exit`&&(t[1].type===`listUnordered`||t[1].type===`listOrdered`)){if(o){let i=r;for(s=void 0;i--;){let t=e[i];if(t[1].type===`lineEnding`||t[1].type===`lineEndingBlank`){if(t[0]===`exit`)continue;s&&(e[s][1].type=`lineEndingBlank`,a=!0),t[1].type=`lineEnding`,s=i}else if(!(t[1].type===`linePrefix`||t[1].type===`blockQuotePrefix`||t[1].type===`blockQuotePrefixWhitespace`||t[1].type===`blockQuoteMarker`||t[1].type===`listItemIndent`))break}c&&(!s||c<s)&&(o._spread=!0),o.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||r,0,[`exit`,o,t[2]]),r++,n++}if(t[1].type===`listItemPrefix`){let i={type:`listItem`,_spread:!1,start:Object.assign({},t[1].start),end:void 0};o=i,e.splice(r,0,[`enter`,i,t[2]]),r++,n++,c=void 0,l=!0}}}return e[t][1]._spread=a,n}function a(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function o(){this.stack.push({type:`fragment`,children:[]})}function s(e,t,n){let r=this.stack[this.stack.length-1],i=r.children;i.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:oi(t.start),end:void 0}}function c(e){return t;function t(t){e&&e.call(this,t),l.call(this,t)}}function l(e,t){let n=this.stack.pop(),r=this.tokenStack.pop();if(r){if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{let t=r[1]||li;t.call(this,e,r[0])}}else throw Error("Cannot close `"+e.type+"` ("+je({start:e.start,end:e.end})+`): it’s not open`);n.position.end=oi(e.end)}function u(){return pt(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(e){if(this.data.expectingFirstListItemValue){let t=this.stack[this.stack.length-2];t.start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){let e=this.resume(),t=this.stack[this.stack.length-1];t.lang=e}function m(){let e=this.resume(),t=this.stack[this.stack.length-1];t.meta=e}function h(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,``),this.data.flowCodeInside=void 0}function _(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/(\r?\n|\r)$/g,``)}function v(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Et(this.sliceSerialize(e)).toLowerCase()}function y(){let e=this.resume(),t=this.stack[this.stack.length-1];t.title=e}function b(){let e=this.resume(),t=this.stack[this.stack.length-1];t.url=e}function ee(e){let t=this.stack[this.stack.length-1];if(!t.depth){let n=this.sliceSerialize(e).length;t.depth=n}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function S(e){let t=this.stack[this.stack.length-1];t.depth=this.sliceSerialize(e).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function w(e){let t=this.stack[this.stack.length-1],n=t.children,r=n[n.length-1];(!r||r.type!==`text`)&&(r=Me(),r.position={start:oi(e.start),end:void 0},n.push(r)),this.stack.push(r)}function T(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=oi(e.end)}function te(e){let n=this.stack[this.stack.length-1];if(this.data.atHardBreak){let t=n.children[n.children.length-1];t.position.end=oi(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(w.call(this,e),T.call(this,e))}function E(){this.data.atHardBreak=!0}function D(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function ne(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function re(){let e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function ie(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||`shortcut`;e.type+=`Reference`,e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||`shortcut`;e.type+=`Reference`,e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function ae(e){let t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=ti(t),n.identifier=Et(t).toLowerCase()}function oe(){let e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,n.type===`link`){let t=e.children;n.children=t}else n.alt=t}function se(){let e=this.resume(),t=this.stack[this.stack.length-1];t.url=e}function ce(){let e=this.resume(),t=this.stack[this.stack.length-1];t.title=e}function le(){this.data.inReference=void 0}function ue(){this.data.referenceType=`collapsed`}function de(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Et(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType=`full`}function fe(e){this.data.characterReferenceType=e.type}function pe(e){let t=this.sliceSerialize(e),n=this.data.characterReferenceType,r;if(n)r=Tt(t,n===`characterReferenceMarkerNumeric`?10:16),this.data.characterReferenceType=void 0;else{let e=vt(t);r=e}let i=this.stack[this.stack.length-1];i.value+=r}function me(e){let t=this.stack.pop();t.position.end=oi(e.end)}function he(e){T.call(this,e);let t=this.stack[this.stack.length-1];t.url=this.sliceSerialize(e)}function ge(e){T.call(this,e);let t=this.stack[this.stack.length-1];t.url=`mailto:`+this.sliceSerialize(e)}function _e(){return{type:`blockquote`,children:[]}}function ve(){return{type:`code`,lang:null,meta:null,value:``}}function ye(){return{type:`inlineCode`,value:``}}function be(){return{type:`definition`,identifier:``,label:null,title:null,url:``}}function xe(){return{type:`emphasis`,children:[]}}function Se(){return{type:`heading`,depth:0,children:[]}}function Ce(){return{type:`break`}}function we(){return{type:`html`,value:``}}function Te(){return{type:`image`,title:null,url:``,alt:null}}function Ee(){return{type:`link`,title:null,url:``,children:[]}}function De(e){return{type:`list`,ordered:e.type===`listOrdered`,start:null,spread:e._spread,children:[]}}function Oe(e){return{type:`listItem`,spread:e._spread,checked:null,children:[]}}function ke(){return{type:`paragraph`,children:[]}}function Ae(){return{type:`strong`,children:[]}}function Me(){return{type:`text`,value:``}}function Ne(){return{type:`thematicBreak`}}}function oi(e){return{line:e.line,column:e.column,offset:e.offset}}function si(e,t){let n=-1;for(;++n<t.length;){let r=t[n];Array.isArray(r)?si(e,r):ci(e,r)}}function ci(e,t){let n;for(n in t)if(ri.call(t,n))switch(n){case`canContainEols`:{let r=t[n];r&&e[n].push(...r);break}case`transforms`:{let r=t[n];r&&e[n].push(...r);break}case`enter`:case`exit`:{let r=t[n];r&&Object.assign(e[n],r);break}}}function li(e,t){throw e?Error("Cannot close `"+e.type+"` ("+je({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+je({start:t.start,end:t.end})+`) is open`):Error("Cannot close document, a token (`"+t.type+"`, "+je({start:t.start,end:t.end})+`) is still open`)}function ui(e){let t=this;t.parser=n;function n(n){return ii(n,{...t.data(`settings`),...e,extensions:t.data(`micromarkExtensions`)||[],mdastExtensions:t.data(`fromMarkdownExtensions`)||[]})}}function di(e,t){let n={type:`element`,tagName:`blockquote`,properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function fi(e,t){let n={type:`element`,tagName:`br`,properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:`text`,value:`
`}]}function pi(e,t){let n=t.value?t.value+`
`:``,r={};t.lang&&(r.className=[`language-`+t.lang]);let i={type:`element`,tagName:`code`,properties:r,children:[{type:`text`,value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:`element`,tagName:`pre`,properties:{},children:[i]},e.patch(t,i),i}function mi(e,t){let n={type:`element`,tagName:`del`,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function hi(e,t){let n={type:`element`,tagName:`em`,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gi(e,t){let n=typeof e.options.clobberPrefix==`string`?e.options.clobberPrefix:`user-content-`,r=String(t.identifier).toUpperCase(),i=Lt(r.toLowerCase()),a=e.footnoteOrder.indexOf(r),o,s=e.footnoteCounts.get(r);s===void 0?(s=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,s+=1,e.footnoteCounts.set(r,s);let c={type:`element`,tagName:`a`,properties:{href:`#`+n+`fn-`+i,id:n+`fnref-`+i+(s>1?`-`+s:``),dataFootnoteRef:!0,ariaDescribedBy:[`footnote-label`]},children:[{type:`text`,value:String(o)}]};e.patch(t,c);let l={type:`element`,tagName:`sup`,properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)}function _i(e,t){let n={type:`element`,tagName:`h`+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vi(e,t){if(e.options.allowDangerousHtml){let n={type:`raw`,value:t.value};return e.patch(t,n),e.applyData(t,n)}}function yi(e,t){let n=t.referenceType,r=`]`;if(n===`collapsed`?r+=`[]`:n===`full`&&(r+=`[`+(t.label||t.identifier)+`]`),t.type===`imageReference`)return[{type:`text`,value:`![`+t.alt+r}];let i=e.all(t),a=i[0];a&&a.type===`text`?a.value=`[`+a.value:i.unshift({type:`text`,value:`[`});let o=i[i.length-1];return o&&o.type===`text`?o.value+=r:i.push({type:`text`,value:r}),i}function bi(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yi(e,t);let i={src:Lt(r.url||``),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);let a={type:`element`,tagName:`img`,properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function xi(e,t){let n={src:Lt(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);let r={type:`element`,tagName:`img`,properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Si(e,t){let n={type:`text`,value:t.value.replace(/\r?\n|\r/g,` `)};e.patch(t,n);let r={type:`element`,tagName:`code`,properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Ci(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yi(e,t);let i={href:Lt(r.url||``)};r.title!==null&&r.title!==void 0&&(i.title=r.title);let a={type:`element`,tagName:`a`,properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function wi(e,t){let n={href:Lt(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);let r={type:`element`,tagName:`a`,properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ti(e,t,n){let r=e.all(t),i=n?Ei(n):Di(t),a={},o=[];if(typeof t.checked==`boolean`){let e=r[0],n;e&&e.type===`element`&&e.tagName===`p`?n=e:(n={type:`element`,tagName:`p`,properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:`text`,value:` `}),n.children.unshift({type:`element`,tagName:`input`,properties:{type:`checkbox`,checked:t.checked,disabled:!0},children:[]}),a.className=[`task-list-item`]}let s=-1;for(;++s<r.length;){let e=r[s];(i||s!==0||e.type!==`element`||e.tagName!==`p`)&&o.push({type:`text`,value:`
`}),e.type===`element`&&e.tagName===`p`&&!i?o.push(...e.children):o.push(e)}let c=r[r.length-1];c&&(i||c.type!==`element`||c.tagName!==`p`)&&o.push({type:`text`,value:`
`});let l={type:`element`,tagName:`li`,properties:a,children:o};return e.patch(t,l),e.applyData(t,l)}function Ei(e){let t=!1;if(e.type===`list`){t=e.spread||!1;let n=e.children,r=-1;for(;!t&&++r<n.length;)t=Di(n[r])}return t}function Di(e){let t=e.spread;return t??e.children.length>1}function Oi(e,t){let n={},r=e.all(t),i=-1;for(typeof t.start==`number`&&t.start!==1&&(n.start=t.start);++i<r.length;){let e=r[i];if(e.type===`element`&&e.tagName===`li`&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes(`task-list-item`)){n.className=[`contains-task-list`];break}}let a={type:`element`,tagName:t.ordered?`ol`:`ul`,properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function ki(e,t){let n={type:`element`,tagName:`p`,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ai(e,t){let n={type:`root`,children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ji(e,t){let n={type:`element`,tagName:`strong`,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Mi(e,t){let n=e.all(t),r=n.shift(),i=[];if(r){let n={type:`element`,tagName:`thead`,properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){let r={type:`element`,tagName:`tbody`,properties:{},children:e.wrap(n,!0)},a=Oe(t.children[1]),o=De(t.children[t.children.length-1]);a&&o&&(r.position={start:a,end:o}),i.push(r)}let a={type:`element`,tagName:`table`,properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function Ni(e,t,n){let r=n?n.children:void 0,i=r?r.indexOf(t):1,a=i===0?`th`:`td`,o=n&&n.type===`table`?n.align:void 0,s=o?o.length:t.children.length,c=-1,l=[];for(;++c<s;){let n=t.children[c],r={},i=o?o[c]:void 0;i&&(r.align=i);let s={type:`element`,tagName:a,properties:r,children:[]};n&&(s.children=e.all(n),e.patch(n,s),s=e.applyData(n,s)),l.push(s)}let u={type:`element`,tagName:`tr`,properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)}function Pi(e,t){let n={type:`element`,tagName:`td`,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Fi=9,Ii=32;function Li(e){let t=String(e),n=/\r?\n|\r/g,r=n.exec(t),i=0,a=[];for(;r;)a.push(Ri(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(Ri(t.slice(i),i>0,!1)),a.join(``)}function Ri(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;t===Fi||t===Ii;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;t===Fi||t===Ii;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):``}function zi(e,t){let n={type:`text`,value:Li(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Bi(e,t){let n={type:`element`,tagName:`hr`,properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Vi={blockquote:di,break:fi,code:pi,delete:mi,emphasis:hi,footnoteReference:gi,heading:_i,html:vi,imageReference:bi,image:xi,inlineCode:Si,linkReference:Ci,link:wi,listItem:Ti,list:Oi,paragraph:ki,root:Ai,strong:ji,table:Mi,tableCell:Pi,tableRow:Ni,text:zi,thematicBreak:Bi,toml:Hi,yaml:Hi,definition:Hi,footnoteDefinition:Hi};function Hi(){}const Ui=-1,Wi=0,Gi=1,Ki=2,qi=3,Ji=4,Yi=5,Xi=6,Zi=7,Qi=8,$i=typeof self==`object`?self:globalThis,ea=(e,t)=>{let n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);let[a,o]=t[i];switch(a){case Wi:case Ui:return n(o,i);case Gi:{let e=n([],i);for(let t of o)e.push(r(t));return e}case Ki:{let e=n({},i);for(let[t,n]of o)e[r(t)]=r(n);return e}case qi:return n(new Date(o),i);case Ji:{let{source:e,flags:t}=o;return n(new RegExp(e,t),i)}case Yi:{let e=n(new Map,i);for(let[t,n]of o)e.set(r(t),r(n));return e}case Xi:{let e=n(new Set,i);for(let t of o)e.add(r(t));return e}case Zi:{let{name:e,message:t}=o;return n(new $i[e](t),i)}case Qi:return n(BigInt(o),i);case`BigInt`:return n(Object(BigInt(o)),i);case`ArrayBuffer`:return n(new Uint8Array(o).buffer,o);case`DataView`:{let{buffer:e}=new Uint8Array(o);return n(new DataView(e),o)}}return n(new $i[a](o),i)};return r},ta=e=>ea(new Map,e)(0),na=``,{toString:ra}={},{keys:ia}=Object,aa=e=>{let t=typeof e;if(t!==`object`||!e)return[Wi,t];let n=ra.call(e).slice(8,-1);switch(n){case`Array`:return[Gi,na];case`Object`:return[Ki,na];case`Date`:return[qi,na];case`RegExp`:return[Ji,na];case`Map`:return[Yi,na];case`Set`:return[Xi,na];case`DataView`:return[Gi,n]}return n.includes(`Array`)?[Gi,n]:n.includes(`Error`)?[Zi,n]:[Ki,n]},oa=([e,t])=>e===Wi&&(t===`function`||t===`symbol`),sa=(e,t,n,r)=>{let i=(e,t)=>{let i=r.push(e)-1;return n.set(t,i),i},a=r=>{if(n.has(r))return n.get(r);let[o,s]=aa(r);switch(o){case Wi:{let t=r;switch(s){case`bigint`:o=Qi,t=r.toString();break;case`function`:case`symbol`:if(e)throw TypeError(`unable to serialize `+s);t=null;break;case`undefined`:return i([Ui],r)}return i([o,t],r)}case Gi:{if(s){let e=r;return s===`DataView`?e=new Uint8Array(r.buffer):s===`ArrayBuffer`&&(e=new Uint8Array(r)),i([s,[...e]],r)}let e=[],t=i([o,e],r);for(let t of r)e.push(a(t));return t}case Ki:{if(s)switch(s){case`BigInt`:return i([s,r.toString()],r);case`Boolean`:case`Number`:case`String`:return i([s,r.valueOf()],r)}if(t&&`toJSON`in r)return a(r.toJSON());let n=[],c=i([o,n],r);for(let t of ia(r))(e||!oa(aa(r[t])))&&n.push([a(t),a(r[t])]);return c}case qi:return i([o,r.toISOString()],r);case Ji:{let{source:e,flags:t}=r;return i([o,{source:e,flags:t}],r)}case Yi:{let t=[],n=i([o,t],r);for(let[n,i]of r)(e||!(oa(aa(n))||oa(aa(i))))&&t.push([a(n),a(i)]);return n}case Xi:{let t=[],n=i([o,t],r);for(let n of r)(e||!oa(aa(n)))&&t.push(a(n));return n}}let{message:c}=r;return i([o,{name:s,message:c}],r)};return a},ca=(e,{json:t,lossy:n}={})=>{let r=[];return sa(!(t||n),!!t,new Map,r)(e),r};var la=typeof structuredClone==`function`?(e,t)=>t&&(`json`in t||`lossy`in t)?ta(ca(e,t)):structuredClone(e):(e,t)=>ta(ca(e,t));function ua(e,t){let n=[{type:`text`,value:`↩`}];return t>1&&n.push({type:`element`,tagName:`sup`,properties:{},children:[{type:`text`,value:String(t)}]}),n}function da(e,t){return`Back to reference `+(e+1)+(t>1?`-`+t:``)}function fa(e){let t=typeof e.options.clobberPrefix==`string`?e.options.clobberPrefix:`user-content-`,n=e.options.footnoteBackContent||ua,r=e.options.footnoteBackLabel||da,i=e.options.footnoteLabel||`Footnotes`,a=e.options.footnoteLabelTagName||`h2`,o=e.options.footnoteLabelProperties||{className:[`sr-only`]},s=[],c=-1;for(;++c<e.footnoteOrder.length;){let i=e.footnoteById.get(e.footnoteOrder[c]);if(!i)continue;let a=e.all(i),o=String(i.identifier).toUpperCase(),l=Lt(o.toLowerCase()),u=0,d=[],f=e.footnoteCounts.get(o);for(;f!==void 0&&++u<=f;){d.length>0&&d.push({type:`text`,value:` `});let e=typeof n==`string`?n:n(c,u);typeof e==`string`&&(e={type:`text`,value:e}),d.push({type:`element`,tagName:`a`,properties:{href:`#`+t+`fnref-`+l+(u>1?`-`+u:``),dataFootnoteBackref:``,ariaLabel:typeof r==`string`?r:r(c,u),className:[`data-footnote-backref`]},children:Array.isArray(e)?e:[e]})}let p=a[a.length-1];if(p&&p.type===`element`&&p.tagName===`p`){let e=p.children[p.children.length-1];e&&e.type===`text`?e.value+=` `:p.children.push({type:`text`,value:` `}),p.children.push(...d)}else a.push(...d);let m={type:`element`,tagName:`li`,properties:{id:t+`fn-`+l},children:e.wrap(a,!0)};e.patch(i,m),s.push(m)}if(s.length!==0)return{type:`element`,tagName:`section`,properties:{dataFootnotes:!0,className:[`footnotes`]},children:[{type:`element`,tagName:a,properties:{...la(o),id:`footnote-label`},children:[{type:`text`,value:i}]},{type:`text`,value:`
`},{type:`element`,tagName:`ol`,properties:{},children:e.wrap(s,!0)},{type:`text`,value:`
`}]}}const pa=function(e){if(e==null)return va;if(typeof e==`function`)return _a(e);if(typeof e==`object`)return Array.isArray(e)?ma(e):ha(e);if(typeof e==`string`)return ga(e);throw Error(`Expected function, string, or object as test`)};function ma(e){let t=[],n=-1;for(;++n<e.length;)t[n]=pa(e[n]);return _a(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}function ha(e){let t=e;return _a(n);function n(n){let r=n,i;for(i in e)if(r[i]!==t[i])return!1;return!0}}function ga(e){return _a(t);function t(t){return t&&t.type===e}}function _a(e){return t;function t(t,n,r){return!!(ya(t)&&e.call(this,t,typeof n==`number`?n:void 0,r||void 0))}}function va(){return!0}function ya(e){return typeof e==`object`&&!!e&&`type`in e}function ba(e){return e}const xa=[],Sa=!0,Ca=!1,wa=`skip`;function Ta(e,t,n,r){let i;typeof t==`function`&&typeof n!=`function`?(r=n,n=t):i=t;let a=pa(i),o=r?-1:1;s(e,void 0,[])();function s(e,i,c){let l=e&&typeof e==`object`?e:{};if(typeof l.type==`string`){let t=typeof l.tagName==`string`?l.tagName:typeof l.name==`string`?l.name:void 0;Object.defineProperty(u,`name`,{value:`node (`+ba(e.type+(t?`<`+t+`>`:``))+`)`})}return u;function u(){let l=xa,u,d,f;if((!t||a(e,i,c[c.length-1]||void 0))&&(l=Ea(n(e,c)),l[0]===Ca))return l;if(`children`in e&&e.children){let t=e;if(t.children&&l[0]!==wa)for(d=(r?t.children.length:-1)+o,f=c.concat(t);d>-1&&d<t.children.length;){let e=t.children[d];if(u=s(e,d,f)(),u[0]===Ca)return u;d=typeof u[1]==`number`?u[1]:d+o}}return l}}}function Ea(e){return Array.isArray(e)?e:typeof e==`number`?[Sa,e]:e==null?xa:[e]}function Da(e,t,n,r){let i,a,o;typeof t==`function`&&typeof n!=`function`?(a=void 0,o=t,i=n):(a=t,o=n,i=r),Ta(e,a,s,i);function s(e,t){let n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return o(e,r,n)}}const Oa={}.hasOwnProperty,ka={};function Aa(e,t){let n=t||ka,r=new Map,i=new Map,a=new Map,o={...Vi,...n.handlers},s={all:l,applyData:Ma,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:ja,wrap:Pa};return Da(e,function(e){if(e.type===`definition`||e.type===`footnoteDefinition`){let t=e.type===`definition`?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),s;function c(e,t){let n=e.type,r=s.handlers[n];if(Oa.call(s.handlers,n)&&r)return r(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if(`children`in e){let{children:t,...n}=e,r=la(n);return r.children=s.all(e),r}return la(e)}let i=s.options.unknownHandler||Na;return i(s,e,t)}function l(e){let t=[];if(`children`in e){let n=e.children,r=-1;for(;++r<n.length;){let i=s.one(n[r],e);if(i){if(r&&n[r-1].type===`break`&&(!Array.isArray(i)&&i.type===`text`&&(i.value=Fa(i.value)),!Array.isArray(i)&&i.type===`element`)){let e=i.children[0];e&&e.type===`text`&&(e.value=Fa(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t}}function ja(e,t){e.position&&(t.position=Ae(e))}function Ma(e,t){let n=t;if(e&&e.data){let t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if(typeof t==`string`)if(n.type===`element`)n.tagName=t;else{let e=`children`in n?n.children:[n];n={type:`element`,tagName:t,properties:{},children:e}}n.type===`element`&&i&&Object.assign(n.properties,la(i)),`children`in n&&n.children&&r!=null&&(n.children=r)}return n}function Na(e,t){let n=t.data||{},r=`value`in t&&!(Oa.call(n,`hProperties`)||Oa.call(n,`hChildren`))?{type:`text`,value:t.value}:{type:`element`,tagName:`div`,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Pa(e,t){let n=[],r=-1;for(t&&n.push({type:`text`,value:`
`});++r<e.length;)r&&n.push({type:`text`,value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:`text`,value:`
`}),n}function Fa(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ia(e,t){let n=Aa(e,t),r=n.one(e,void 0),i=fa(n),a=Array.isArray(r)?{type:`root`,children:r}:r||{type:`root`,children:[]};return i&&(o(`children`in a),a.children.push({type:`text`,value:`
`},i)),a}function La(e,t){return e&&`run`in e?async function(n,r){let i=Ia(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Ia(n,{file:r,...e||t})}}function Ra(e){if(e)throw e}var za=e((exports,t)=>{var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(e){return typeof Array.isArray==`function`?Array.isArray(e):r.call(e)===`[object Array]`},s=function(e){if(!e||r.call(e)!==`[object Object]`)return!1;var t=n.call(e,`constructor`),i=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,`isPrototypeOf`);if(e.constructor&&!t&&!i)return!1;for(var a in e);return a===void 0||n.call(e,a)},c=function(e,t){i&&t.name===`__proto__`?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,t){if(t===`__proto__`)if(n.call(e,t)){if(a)return a(e,t).value}else return;return e[t]};t.exports=function e(){var t,n,r,i,a,u,d=arguments[0],f=1,p=arguments.length,m=!1;for(typeof d==`boolean`&&(m=d,d=arguments[1]||{},f=2),(d==null||typeof d!=`object`&&typeof d!=`function`)&&(d={});f<p;++f)if(t=arguments[f],t!=null)for(n in t)r=l(d,n),i=l(t,n),d!==i&&(m&&i&&(s(i)||(a=o(i)))?(a?(a=!1,u=r&&o(r)?r:[]):u=r&&s(r)?r:{},c(d,{name:n,newValue:e(m,u,i)})):i!==void 0&&c(d,{name:n,newValue:i}));return d}});function Ba(e){if(typeof e!=`object`||!e)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Va(){let e=[],t={run:n,use:r};return t;function n(...t){let n=-1,r=t.pop();if(typeof r!=`function`)throw TypeError(`Expected function as last argument, not `+r);i(null,...t);function i(a,...o){let s=e[++n],c=-1;if(a){r(a);return}for(;++c<t.length;)(o[c]===null||o[c]===void 0)&&(o[c]=t[c]);t=o,s?Ha(s,i)(...o):r(null,...o)}}function r(n){if(typeof n!=`function`)throw TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}}function Ha(e,t){let n;return r;function r(...t){let r=e.length>t.length,o;r&&t.push(i);try{o=e.apply(this,t)}catch(e){let t=e;if(r&&n)throw t;return i(t)}r||(o&&o.then&&typeof o.then==`function`?o.then(a,i):o instanceof Error?i(o):a(o))}function i(e,...r){n||(n=!0,t(e,...r))}function a(e){i(null,e)}}const Ua={basename:Wa,dirname:Ga,extname:Ka,join:qa,sep:`/`};function Wa(e,t){if(t!==void 0&&typeof t!=`string`)throw TypeError(`"ext" argument must be a string`);Xa(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?``:e.slice(n,r)}if(t===e)return``;let o=-1,s=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(e.codePointAt(i)===t.codePointAt(s--)?s<0&&(r=i):(s=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Ga(e){if(Xa(e),e.length===0)return`.`;let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||=!0;return t<0?e.codePointAt(0)===47?`/`:`.`:t===1&&e.codePointAt(0)===47?`//`:e.slice(0,t)}function Ka(e){Xa(e);let t=e.length,n=-1,r=0,i=-1,a=0,o;for(;t--;){let s=e.codePointAt(t);if(s===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),s===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?``:e.slice(i,n)}function qa(...e){let t=-1,n;for(;++t<e.length;)Xa(e[t]),e[t]&&(n=n===void 0?e[t]:n+`/`+e[t]);return n===void 0?`.`:Ja(n)}function Ja(e){Xa(e);let t=e.codePointAt(0)===47,n=Ya(e,!t);return n.length===0&&!t&&(n=`.`),n.length>0&&e.codePointAt(e.length-1)===47&&(n+=`/`),t?`/`+n:n}function Ya(e,t){let n=``,r=0,i=-1,a=0,o=-1,s,c;for(;++o<=e.length;){if(o<e.length)s=e.codePointAt(o);else if(s===47)break;else s=47;if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf(`/`),c!==n.length-1){c<0?(n=``,r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf(`/`)),i=o,a=0;continue}}else if(n.length>0){n=``,r=0,i=o,a=0;continue}}t&&(n=n.length>0?n+`/..`:`..`,r=2)}else n.length>0?n+=`/`+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return n}function Xa(e){if(typeof e!=`string`)throw TypeError(`Path must be a string. Received `+JSON.stringify(e))}const Za={cwd:Qa};function Qa(){return`/`}function $a(e){return!!(typeof e==`object`&&e&&`href`in e&&e.href&&`protocol`in e&&e.protocol&&e.auth===void 0)}function eo(e){if(typeof e==`string`)e=new URL(e);else if(!$a(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code=`ERR_INVALID_ARG_TYPE`,t}if(e.protocol!==`file:`){let e=TypeError(`The URL must be of scheme file`);throw e.code=`ERR_INVALID_URL_SCHEME`,e}return to(e)}function to(e){if(e.hostname!==``){let e=TypeError(`File URL host must be "localhost" or empty on darwin`);throw e.code=`ERR_INVALID_FILE_URL_HOST`,e}let t=e.pathname,n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){let e=t.codePointAt(n+2);if(e===70||e===102){let e=TypeError(`File URL path must not include encoded / characters`);throw e.code=`ERR_INVALID_FILE_URL_PATH`,e}}return decodeURIComponent(t)}const no=[`history`,`path`,`basename`,`stem`,`extname`,`dirname`];var ro=class{constructor(e){let t;t=e?$a(e)?{path:e}:typeof e==`string`||so(e)?{value:e}:e:{},this.cwd=`cwd`in t?``:Za.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<no.length;){let e=no[n];e in t&&t[e]!==void 0&&t[e]!==null&&(this[e]=e===`history`?[...t[e]]:t[e])}let r;for(r in t)no.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path==`string`?Ua.basename(this.path):void 0}set basename(e){ao(e,`basename`),io(e,`basename`),this.path=Ua.join(this.dirname||``,e)}get dirname(){return typeof this.path==`string`?Ua.dirname(this.path):void 0}set dirname(e){oo(this.basename,`dirname`),this.path=Ua.join(e||``,this.basename)}get extname(){return typeof this.path==`string`?Ua.extname(this.path):void 0}set extname(e){if(io(e,`extname`),oo(this.dirname,`extname`),e){if(e.codePointAt(0)!==46)throw Error("`extname` must start with `.`");if(e.includes(`.`,1))throw Error("`extname` cannot contain multiple dots")}this.path=Ua.join(this.dirname,this.stem+(e||``))}get path(){return this.history[this.history.length-1]}set path(e){$a(e)&&(e=eo(e)),ao(e,`path`),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path==`string`?Ua.basename(this.path,this.extname):void 0}set stem(e){ao(e,`stem`),io(e,`stem`),this.path=Ua.join(this.dirname||``,e+(this.extname||``))}fail(e,t,n){let r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){let r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){let r=new Fe(e,t,n);return this.path&&(r.name=this.path+`:`+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(this.value===void 0)return``;if(typeof this.value==`string`)return this.value;let t=new TextDecoder(e||void 0);return t.decode(this.value)}};function io(e,t){if(e&&e.includes(Ua.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+Ua.sep+"`")}function ao(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function oo(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}function so(e){return!!(e&&typeof e==`object`&&`byteLength`in e&&`byteOffset`in e)}const co=function(e){let t=this,n=t.constructor,r=n.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a};var lo=n(za());const uo={}.hasOwnProperty;var fo=class e extends co{constructor(){super(`copy`),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Va()}copy(){let t=new e,n=-1;for(;++n<this.attachers.length;){let e=this.attachers[n];t.use(...e)}return t.data((0,lo.default)(!0,{},this.namespace)),t}data(e,t){return typeof e==`string`?arguments.length===2?(go(`data`,this.frozen),this.namespace[e]=t,this):uo.call(this.namespace,e)&&this.namespace[e]||void 0:e?(go(`data`,this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[t,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);let r=t.call(e,...n);typeof r==`function`&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=yo(e),n=this.parser||this.Parser;return mo(`parse`,n),n(String(t),t)}process(e,t){let n=this;return this.freeze(),mo(`process`,this.parser||this.Parser),ho(`process`,this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){let a=yo(e),s=n.parse(a);n.run(s,a,function(e,t,r){if(e||!t||!r)return c(e);let i=t,a=n.stringify(i,r);xo(a)?r.value=a:r.result=a,c(e,r)});function c(e,n){e||!n?i(e):r?r(n):(o(t,"`done` is defined if `resolve` is not"),t(void 0,n))}}}processSync(e){let t=!1,n;return this.freeze(),mo(`processSync`,this.parser||this.Parser),ho(`processSync`,this.compiler||this.Compiler),this.process(e,r),vo(`processSync`,`process`,t),o(n,`we either bailed on an error or have a tree`),n;function r(e,r){t=!0,Ra(e),n=r}}run(e,t,n){_o(e),this.freeze();let r=this.transformers;return!n&&typeof t==`function`&&(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,a){o(typeof t!=`function`,"`file` can’t be a `done` anymore, we checked");let s=yo(t);r.run(e,s,c);function c(t,r,s){let c=r||e;t?a(t):i?i(c):(o(n,"`done` is defined if `resolve` is not"),n(void 0,c,s))}}}runSync(e,t){let n=!1,r;return this.run(e,t,i),vo(`runSync`,`run`,n),o(r,`we either bailed on an error or have a tree`),r;function i(e,t){Ra(e),r=t,n=!0}}stringify(e,t){this.freeze();let n=yo(t),r=this.compiler||this.Compiler;return ho(`stringify`,r),_o(e),r(e,n)}use(e,...t){let n=this.attachers,r=this.namespace;if(go(`use`,this.frozen),e!=null)if(typeof e==`function`)s(e,t);else if(typeof e==`object`)Array.isArray(e)?o(e):a(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function i(e){if(typeof e==`function`)s(e,[]);else if(typeof e==`object`)if(Array.isArray(e)){let[t,...n]=e;s(t,n)}else a(e);else throw TypeError("Expected usable value, not `"+e+"`")}function a(e){if(!(`plugins`in e)&&!(`settings`in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(e.plugins),e.settings&&(r.settings=(0,lo.default)(!0,r.settings,e.settings))}function o(e){let t=-1;if(e!=null)if(Array.isArray(e))for(;++t<e.length;){let n=e[t];i(n)}else throw TypeError("Expected a list of plugins, not `"+e+"`")}function s(e,t){let r=-1,i=-1;for(;++r<n.length;)if(n[r][0]===e){i=r;break}if(i===-1)n.push([e,...t]);else if(t.length>0){let[r,...a]=t,o=n[i][1];Ba(o)&&Ba(r)&&(r=(0,lo.default)(!0,o,r)),n[i]=[e,r,...a]}}}};const po=new fo().freeze();function mo(e,t){if(typeof t!=`function`)throw TypeError("Cannot `"+e+"` without `parser`")}function ho(e,t){if(typeof t!=`function`)throw TypeError("Cannot `"+e+"` without `compiler`")}function go(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _o(e){if(!Ba(e)||typeof e.type!=`string`)throw TypeError("Expected node, got `"+e+"`")}function vo(e,t,n){if(!n)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function yo(e){return bo(e)?e:new ro(e)}function bo(e){return!!(e&&typeof e==`object`&&`message`in e&&`messages`in e)}function xo(e){return typeof e==`string`||So(e)}function So(e){return!!(e&&typeof e==`object`&&`byteLength`in e&&`byteOffset`in e)}var Co=n(i()),wo=n(a());const To=`https://github.com/remarkjs/react-markdown/blob/main/changelog.md`,Eo=[],Do={allowDangerousHtml:!0},Oo=/^(https?|ircs?|mailto|xmpp)$/i,ko=[{from:`astPlugins`,id:`remove-buggy-html-in-markdown-parser`},{from:`allowDangerousHtml`,id:`remove-buggy-html-in-markdown-parser`},{from:`allowNode`,id:`replace-allownode-allowedtypes-and-disallowedtypes`,to:`allowElement`},{from:`allowedTypes`,id:`replace-allownode-allowedtypes-and-disallowedtypes`,to:`allowedElements`},{from:`className`,id:`remove-classname`},{from:`disallowedTypes`,id:`replace-allownode-allowedtypes-and-disallowedtypes`,to:`disallowedElements`},{from:`escapeHtml`,id:`remove-buggy-html-in-markdown-parser`},{from:`includeElementIndex`,id:`#remove-includeelementindex`},{from:`includeNodeIndex`,id:`change-includenodeindex-to-includeelementindex`},{from:`linkTarget`,id:`remove-linktarget`},{from:`plugins`,id:`change-plugins-to-remarkplugins`,to:`remarkPlugins`},{from:`rawSourcePos`,id:`#remove-rawsourcepos`},{from:`renderers`,id:`change-renderers-to-components`,to:`components`},{from:`source`,id:`change-source-to-children`,to:`children`},{from:`sourcePos`,id:`#remove-sourcepos`},{from:`transformImageUri`,id:`#add-urltransform`,to:`urlTransform`},{from:`transformLinkUri`,id:`#add-urltransform`,to:`urlTransform`}];function Ao(e){let t=jo(e),n=Mo(e);return No(t.runSync(t.parse(n),n),e)}function jo(e){let t=e.rehypePlugins||Eo,n=e.remarkPlugins||Eo,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Do}:Do,i=po().use(ui).use(n).use(La,r).use(t);return i}function Mo(e){let t=e.children||``,n=new ro;return typeof t==`string`?n.value=t:s("Unexpected value `"+t+"` for `children` prop, expected `string`"),n}function No(e,t){let n=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,c=t.unwrapDisallowed,l=t.urlTransform||Po;for(let e of ko)Object.hasOwn(t,e.from)&&s("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":`remove it`)+` (see <`+To+`#`+e.id+`> for more info)`);return n&&a&&s("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),Da(e,u),Ue(e,{Fragment:Co.Fragment,components:i,ignoreInvalidStyle:!0,jsx:Co.jsx,jsxs:Co.jsxs,passKeys:!0,passNode:!0});function u(e,t,i){if(e.type===`raw`&&i&&typeof t==`number`)return o?i.children.splice(t,1):i.children[t]={type:`text`,value:e.value},t;if(e.type===`element`){let t;for(t in dt)if(Object.hasOwn(dt,t)&&Object.hasOwn(e.properties,t)){let n=e.properties[t],r=dt[t];(r===null||r.includes(e.tagName))&&(e.properties[t]=l(String(n||``),t,e))}}if(e.type===`element`){let o=n?!n.includes(e.tagName):a?a.includes(e.tagName):!1;if(!o&&r&&typeof t==`number`&&(o=!r(e,t,i)),o&&i&&typeof t==`number`)return c&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}}function Po(e){let t=e.indexOf(`:`),n=e.indexOf(`?`),r=e.indexOf(`#`),i=e.indexOf(`/`);return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Oo.test(e.slice(0,t))?e:``}function Fo(e,t){let n=String(e);if(typeof t!=`string`)throw TypeError(`Expected character`);let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function Io(e){if(typeof e!=`string`)throw TypeError(`Expected a string`);return e.replace(/[|\\{}()[\]^$+*?.]/g,`\\$&`).replace(/-/g,`\\x2d`)}function Lo(e,t,n){let r=n||{},i=pa(r.ignore||[]),a=Ro(t),o=-1;for(;++o<a.length;)Ta(e,`text`,s);function s(e,t){let n=-1,r;for(;++n<t.length;){let e=t[n],a=r?r.children:void 0;if(i(e,a?a.indexOf(e):void 0,r))return;r=e}if(r)return c(e,t)}function c(e,t){let n=t[t.length-1],r=a[o][0],i=a[o][1],s=0,c=n.children,l=c.indexOf(e),u=!1,d=[];r.lastIndex=0;let f=r.exec(e.value);for(;f;){let n=f.index,a={index:f.index,input:f.input,stack:[...t,e]},o=i(...f,a);if(typeof o==`string`&&(o=o.length>0?{type:`text`,value:o}:void 0),o===!1?r.lastIndex=n+1:(s!==n&&d.push({type:`text`,value:e.value.slice(s,n)}),Array.isArray(o)?d.push(...o):o&&d.push(o),s=n+f[0].length,u=!0),!r.global)break;f=r.exec(e.value)}return u?(s<e.value.length&&d.push({type:`text`,value:e.value.slice(s)}),n.children.splice(l,1,...d)):d=[e],l+d.length}}function Ro(e){let t=[];if(!Array.isArray(e))throw TypeError(`Expected find and replace tuple or list of tuples`);let n=!e[0]||Array.isArray(e[0])?e:[e],r=-1;for(;++r<n.length;){let e=n[r];t.push([zo(e[0]),Bo(e[1])])}return t}function zo(e){return typeof e==`string`?new RegExp(Io(e),`g`):e}function Bo(e){return typeof e==`function`?e:function(){return e}}const Vo=`phrasing`,Ho=[`autolink`,`link`,`image`,`label`];function Uo(){return{transforms:[Zo],enter:{literalAutolink:Go,literalAutolinkEmail:Ko,literalAutolinkHttp:Ko,literalAutolinkWww:Ko},exit:{literalAutolink:Xo,literalAutolinkEmail:Yo,literalAutolinkHttp:qo,literalAutolinkWww:Jo}}}function Wo(){return{unsafe:[{character:`@`,before:`[+\\-.\\w]`,after:`[\\-.\\w]`,inConstruct:Vo,notInConstruct:Ho},{character:`.`,before:`[Ww]`,after:`[\\-.\\w]`,inConstruct:Vo,notInConstruct:Ho},{character:`:`,before:`[ps]`,after:`\\/`,inConstruct:Vo,notInConstruct:Ho}]}}function Go(e){this.enter({type:`link`,title:null,url:``,children:[]},e)}function Ko(e){this.config.enter.autolinkProtocol.call(this,e)}function qo(e){this.config.exit.autolinkProtocol.call(this,e)}function Jo(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];o(t.type===`link`),t.url=`http://`+this.sliceSerialize(e)}function Yo(e){this.config.exit.autolinkEmail.call(this,e)}function Xo(e){this.exit(e)}function Zo(e){Lo(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Qo],[RegExp(`(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)`,`gu`),$o]],{ignore:[`link`,`linkReference`]})}function Qo(e,t,n,r,i){let a=``;if(!ns(i)||(/^w/i.test(t)&&(n=t+n,t=``,a=`http://`),!es(n)))return!1;let o=ts(n+r);if(!o[0])return!1;let s={type:`link`,title:null,url:a+t+o[0],children:[{type:`text`,value:t+o[0]}]};return o[1]?[s,{type:`text`,value:o[1]}]:s}function $o(e,t,n,r){return!ns(r,!0)||/[-\d_]$/.test(n)?!1:{type:`link`,title:null,url:`mailto:`+t+`@`+n,children:[{type:`text`,value:t+`@`+n}]}}function es(e){let t=e.split(`.`);return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function ts(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(`)`),i=Fo(e,`(`),a=Fo(e,`)`);for(;r!==-1&&i>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(`)`),a++;return[e,n]}function ns(e,t){let n=e.input.charCodeAt(e.index-1);return(e.index===0||Ft(n)||Pt(n))&&(!t||n!==47)}ms.peek=ps;function rs(){this.buffer()}function os(e){this.enter({type:`footnoteReference`,identifier:``,label:``},e)}function ss(){this.buffer()}function cs(e){this.enter({type:`footnoteDefinition`,identifier:``,label:``,children:[]},e)}function ls(e){let t=this.resume(),n=this.stack[this.stack.length-1];o(n.type===`footnoteReference`),n.identifier=Et(this.sliceSerialize(e)).toLowerCase(),n.label=t}function us(e){this.exit(e)}function ds(e){let t=this.resume(),n=this.stack[this.stack.length-1];o(n.type===`footnoteDefinition`),n.identifier=Et(this.sliceSerialize(e)).toLowerCase(),n.label=t}function fs(e){this.exit(e)}function ps(){return`[`}function ms(e,t,n,r){let i=n.createTracker(r),a=i.move(`[^`),o=n.enter(`footnoteReference`),s=n.enter(`reference`);return a+=i.move(n.safe(n.associationId(e),{after:`]`,before:a})),s(),o(),a+=i.move(`]`),a}function hs(){return{enter:{gfmFootnoteCallString:rs,gfmFootnoteCall:os,gfmFootnoteDefinitionLabelString:ss,gfmFootnoteDefinition:cs},exit:{gfmFootnoteCallString:ls,gfmFootnoteCall:us,gfmFootnoteDefinitionLabelString:ds,gfmFootnoteDefinition:fs}}}function gs(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:ms},unsafe:[{character:`[`,inConstruct:[`label`,`phrasing`,`reference`]}]};function n(e,n,r,i){let a=r.createTracker(i),o=a.move(`[^`),s=r.enter(`footnoteDefinition`),c=r.enter(`label`);return o+=a.move(r.safe(r.associationId(e),{before:o,after:`]`})),c(),o+=a.move(`]:`),e.children&&e.children.length>0&&(a.shift(4),o+=a.move((t?`
`:` `)+r.indentLines(r.containerFlow(e,a.current()),t?vs:_s))),s(),o}}function _s(e,t,n){return t===0?e:vs(e,t,n)}function vs(e,t,n){return(n?``:`    `)+e}const ys=[`autolink`,`destinationLiteral`,`destinationRaw`,`reference`,`titleQuote`,`titleApostrophe`];ws.peek=Ts;function bs(){return{canContainEols:[`delete`],enter:{strikethrough:Ss},exit:{strikethrough:Cs}}}function xs(){return{unsafe:[{character:`~`,inConstruct:`phrasing`,notInConstruct:ys}],handlers:{delete:ws}}}function Ss(e){this.enter({type:`delete`,children:[]},e)}function Cs(e){this.exit(e)}function ws(e,t,n,r){let i=n.createTracker(r),a=n.enter(`strikethrough`),o=i.move(`~~`);return o+=n.containerPhrasing(e,{...i.current(),before:o,after:`~`}),o+=i.move(`~~`),a(),o}function Ts(){return`~`}function Es(e){return e.length}function Ds(e,t){let n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Es,a=[],o=[],s=[],c=[],l=0,u=-1;for(;++u<e.length;){let t=[],r=[],a=-1;for(e[u].length>l&&(l=e[u].length);++a<e[u].length;){let o=Os(e[u][a]);if(n.alignDelimiters!==!1){let e=i(o);r[a]=e,(c[a]===void 0||e>c[a])&&(c[a]=e)}t.push(o)}o[u]=t,s[u]=r}let d=-1;if(typeof r==`object`&&`length`in r)for(;++d<l;)a[d]=ks(r[d]);else{let e=ks(r);for(;++d<l;)a[d]=e}d=-1;let f=[],p=[];for(;++d<l;){let e=a[d],t=``,r=``;e===99?(t=`:`,r=`:`):e===108?t=`:`:e===114&&(r=`:`);let i=n.alignDelimiters===!1?1:Math.max(1,c[d]-t.length-r.length),o=t+`-`.repeat(i)+r;n.alignDelimiters!==!1&&(i=t.length+i+r.length,i>c[d]&&(c[d]=i),p[d]=i),f[d]=o}o.splice(1,0,f),s.splice(1,0,p),u=-1;let m=[];for(;++u<o.length;){let e=o[u],t=s[u];d=-1;let r=[];for(;++d<l;){let i=e[d]||``,o=``,s=``;if(n.alignDelimiters!==!1){let e=c[d]-(t[d]||0),n=a[d];n===114?o=` `.repeat(e):n===99?e%2?(o=` `.repeat(e/2+.5),s=` `.repeat(e/2-.5)):(o=` `.repeat(e/2),s=o):s=` `.repeat(e)}n.delimiterStart!==!1&&!d&&r.push(`|`),n.padding!==!1&&!(n.alignDelimiters===!1&&i===``)&&(n.delimiterStart!==!1||d)&&r.push(` `),n.alignDelimiters!==!1&&r.push(o),r.push(i),n.alignDelimiters!==!1&&r.push(s),n.padding!==!1&&r.push(` `),(n.delimiterEnd!==!1||d!==l-1)&&r.push(`|`)}m.push(n.delimiterEnd===!1?r.join(``).replace(/ +$/,``):r.join(``))}return m.join(`
`)}function Os(e){return e==null?``:String(e)}function ks(e){let t=typeof e==`string`?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function As(e,t,n,r){let i=n.enter(`blockquote`),a=n.createTracker(r);a.move(`> `),a.shift(2);let o=n.indentLines(n.containerFlow(e,a.current()),js);return i(),o}function js(e,t,n){return`>`+(n?``:` `)+e}function Ms(e,t){return Ns(e,t.inConstruct,!0)&&!Ns(e,t.notInConstruct,!1)}function Ns(e,t,n){if(typeof t==`string`&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Ps(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Ms(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?``:` `;return`\\
`}function Fs(e,t){let n=String(e),r=n.indexOf(t),i=r,a=0,o=0;if(typeof t!=`string`)throw TypeError(`Expected substring`);for(;r!==-1;)r===i?++a>o&&(o=a):a=1,i=r+t.length,r=n.indexOf(t,i);return o}function Is(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Ls(e){let t=e.options.fence||"`";if(t!=="`"&&t!==`~`)throw Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Rs(e,t,n,r){let i=Ls(n),a=e.value||``,o=i==="`"?`GraveAccent`:`Tilde`;if(Is(e,n)){let e=n.enter(`codeIndented`),t=n.indentLines(a,zs);return e(),t}let s=n.createTracker(r),c=i.repeat(Math.max(Fs(a,i)+1,3)),l=n.enter(`codeFenced`),u=s.move(c);if(e.lang){let t=n.enter(`codeFencedLang${o}`);u+=s.move(n.safe(e.lang,{before:u,after:` `,encode:["`"],...s.current()})),t()}if(e.lang&&e.meta){let t=n.enter(`codeFencedMeta${o}`);u+=s.move(` `),u+=s.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...s.current()})),t()}return u+=s.move(`
`),a&&(u+=s.move(a+`
`)),u+=s.move(c),l(),u}function zs(e,t,n){return(n?``:`    `)+e}function Bs(e){let t=e.options.quote||`"`;if(t!==`"`&&t!==`'`)throw Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Vs(e,t,n,r){let i=Bs(n),a=i===`"`?`Quote`:`Apostrophe`,o=n.enter(`definition`),s=n.enter(`label`),c=n.createTracker(r),l=c.move(`[`);return l+=c.move(n.safe(n.associationId(e),{before:l,after:`]`,...c.current()})),l+=c.move(`]: `),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter(`destinationLiteral`),l+=c.move(`<`),l+=c.move(n.safe(e.url,{before:l,after:`>`,...c.current()})),l+=c.move(`>`)):(s=n.enter(`destinationRaw`),l+=c.move(n.safe(e.url,{before:l,after:e.title?` `:`
`,...c.current()}))),s(),e.title&&(s=n.enter(`title${a}`),l+=c.move(` `+i),l+=c.move(n.safe(e.title,{before:l,after:i,...c.current()})),l+=c.move(i),s()),o(),l}function Hs(e){let t=e.options.emphasis||`*`;if(t!==`*`&&t!==`_`)throw Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Us(e){return`&#x`+e.toString(16).toUpperCase()+`;`}function Ws(e,t,n){let r=Wt(e),i=Wt(t);return r===void 0?i===void 0?n===`_`?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Gs.peek=Ks;function Gs(e,t,n,r){let i=Hs(n),a=n.enter(`emphasis`),o=n.createTracker(r),s=o.move(i),c=o.move(n.containerPhrasing(e,{after:i,before:s,...o.current()})),l=c.charCodeAt(0),u=Ws(r.before.charCodeAt(r.before.length-1),l,i);u.inside&&(c=Us(l)+c.slice(1));let d=c.charCodeAt(c.length-1),f=Ws(r.after.charCodeAt(0),d,i);f.inside&&(c=c.slice(0,-1)+Us(d));let p=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},s+c+p}function Ks(e,t,n){return n.options.emphasis||`*`}function qs(e,t){let n=!1;return Da(e,function(e){if(`value`in e&&/\r?\n|\r/.test(e.value)||e.type===`break`)return n=!0,Ca}),!!((!e.depth||e.depth<3)&&pt(e)&&(t.options.setext||n))}function Js(e,t,n,r){let i=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(qs(e,n)){let t=n.enter(`headingSetext`),r=n.enter(`phrasing`),o=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return r(),t(),o+`
`+(i===1?`=`:`-`).repeat(o.length-(Math.max(o.lastIndexOf(`\r`),o.lastIndexOf(`
`))+1))}let o=`#`.repeat(i),s=n.enter(`headingAtx`),c=n.enter(`phrasing`);a.move(o+` `);let l=n.containerPhrasing(e,{before:`# `,after:`
`,...a.current()});return/^[\t ]/.test(l)&&(l=Us(l.charCodeAt(0))+l.slice(1)),l=l?o+` `+l:o,n.options.closeAtx&&(l+=` `+o),c(),s(),l}Ys.peek=Xs;function Ys(e){return e.value||``}function Xs(){return`<`}Zs.peek=Qs;function Zs(e,t,n,r){let i=Bs(n),a=i===`"`?`Quote`:`Apostrophe`,o=n.enter(`image`),s=n.enter(`label`),c=n.createTracker(r),l=c.move(`![`);return l+=c.move(n.safe(e.alt,{before:l,after:`]`,...c.current()})),l+=c.move(`](`),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter(`destinationLiteral`),l+=c.move(`<`),l+=c.move(n.safe(e.url,{before:l,after:`>`,...c.current()})),l+=c.move(`>`)):(s=n.enter(`destinationRaw`),l+=c.move(n.safe(e.url,{before:l,after:e.title?` `:`)`,...c.current()}))),s(),e.title&&(s=n.enter(`title${a}`),l+=c.move(` `+i),l+=c.move(n.safe(e.title,{before:l,after:i,...c.current()})),l+=c.move(i),s()),l+=c.move(`)`),o(),l}function Qs(){return`!`}$s.peek=ec;function $s(e,t,n,r){let i=e.referenceType,a=n.enter(`imageReference`),o=n.enter(`label`),s=n.createTracker(r),c=s.move(`![`),l=n.safe(e.alt,{before:c,after:`]`,...s.current()});c+=s.move(l+`][`),o();let u=n.stack;n.stack=[],o=n.enter(`reference`);let d=n.safe(n.associationId(e),{before:c,after:`]`,...s.current()});return o(),n.stack=u,a(),i===`full`||!l||l!==d?c+=s.move(d+`]`):i===`shortcut`?c=c.slice(0,-1):c+=s.move(`]`),c}function ec(){return`!`}tc.peek=nc;function tc(e,t,n){let r=e.value||``,i="`",a=-1;for(;RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=` `+r+` `);++a<n.unsafe.length;){let e=n.unsafe[a],t=n.compilePattern(e),i;if(e.atBreak)for(;i=t.exec(r);){let e=i.index;r.charCodeAt(e)===10&&r.charCodeAt(e-1)===13&&e--,r=r.slice(0,e)+` `+r.slice(i.index+1)}}return i+r+i}function nc(){return"`"}function rc(e,t){let n=pt(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type===`text`&&(n===e.url||`mailto:`+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}ic.peek=ac;function ic(e,t,n,r){let i=Bs(n),a=i===`"`?`Quote`:`Apostrophe`,o=n.createTracker(r),s,c;if(rc(e,n)){let t=n.stack;n.stack=[],s=n.enter(`autolink`);let r=o.move(`<`);return r+=o.move(n.containerPhrasing(e,{before:r,after:`>`,...o.current()})),r+=o.move(`>`),s(),n.stack=t,r}s=n.enter(`link`),c=n.enter(`label`);let l=o.move(`[`);return l+=o.move(n.containerPhrasing(e,{before:l,after:`](`,...o.current()})),l+=o.move(`](`),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter(`destinationLiteral`),l+=o.move(`<`),l+=o.move(n.safe(e.url,{before:l,after:`>`,...o.current()})),l+=o.move(`>`)):(c=n.enter(`destinationRaw`),l+=o.move(n.safe(e.url,{before:l,after:e.title?` `:`)`,...o.current()}))),c(),e.title&&(c=n.enter(`title${a}`),l+=o.move(` `+i),l+=o.move(n.safe(e.title,{before:l,after:i,...o.current()})),l+=o.move(i),c()),l+=o.move(`)`),s(),l}function ac(e,t,n){return rc(e,n)?`<`:`[`}oc.peek=sc;function oc(e,t,n,r){let i=e.referenceType,a=n.enter(`linkReference`),o=n.enter(`label`),s=n.createTracker(r),c=s.move(`[`),l=n.containerPhrasing(e,{before:c,after:`]`,...s.current()});c+=s.move(l+`][`),o();let u=n.stack;n.stack=[],o=n.enter(`reference`);let d=n.safe(n.associationId(e),{before:c,after:`]`,...s.current()});return o(),n.stack=u,a(),i===`full`||!l||l!==d?c+=s.move(d+`]`):i===`shortcut`?c=c.slice(0,-1):c+=s.move(`]`),c}function sc(){return`[`}function cc(e){let t=e.options.bullet||`*`;if(t!==`*`&&t!==`+`&&t!==`-`)throw Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function lc(e){let t=cc(e),n=e.options.bulletOther;if(!n)return t===`*`?`-`:`*`;if(n!==`*`&&n!==`+`&&n!==`-`)throw Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function uc(e){let t=e.options.bulletOrdered||`.`;if(t!==`.`&&t!==`)`)throw Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function dc(e){let t=e.options.rule||`*`;if(t!==`*`&&t!==`-`&&t!==`_`)throw Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function fc(e,t,n,r){let i=n.enter(`list`),a=n.bulletCurrent,o=e.ordered?uc(n):cc(n),s=e.ordered?o===`.`?`)`:`.`:lc(n),c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){let t=e.children?e.children[0]:void 0;if((o===`*`||o===`-`)&&t&&(!t.children||!t.children[0])&&n.stack[n.stack.length-1]===`list`&&n.stack[n.stack.length-2]===`listItem`&&n.stack[n.stack.length-3]===`list`&&n.stack[n.stack.length-4]===`listItem`&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),dc(n)===o&&t){let t=-1;for(;++t<e.children.length;){let n=e.children[t];if(n&&n.type===`listItem`&&n.children&&n.children[0]&&n.children[0].type===`thematicBreak`){c=!0;break}}}}c&&(o=s),n.bulletCurrent=o;let l=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=a,i(),l}function pc(e){let t=e.options.listItemIndent||`one`;if(t!==`tab`&&t!==`one`&&t!==`mixed`)throw Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function mc(e,t,n,r){let i=pc(n),a=n.bulletCurrent||cc(n);t&&t.type===`list`&&t.ordered&&(a=(typeof t.start==`number`&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let o=a.length+1;(i===`tab`||i===`mixed`&&(t&&t.type===`list`&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);let s=n.createTracker(r);s.move(a+` `.repeat(o-a.length)),s.shift(o);let c=n.enter(`listItem`),l=n.indentLines(n.containerFlow(e,s.current()),u);return c(),l;function u(e,t,n){return t?(n?``:` `.repeat(o))+e:(n?a:a+` `.repeat(o-a.length))+e}}function hc(e,t,n,r){let i=n.enter(`paragraph`),a=n.enter(`phrasing`),o=n.containerPhrasing(e,r);return a(),i(),o}const gc=pa([`break`,`delete`,`emphasis`,`footnote`,`footnoteReference`,`image`,`imageReference`,`inlineCode`,`inlineMath`,`link`,`linkReference`,`mdxJsxTextElement`,`mdxTextExpression`,`strong`,`text`,`textDirective`]);function _c(e,t,n,r){let i=e.children.some(function(e){return gc(e)}),a=i?n.containerPhrasing:n.containerFlow;return a.call(n,e,r)}function vc(e){let t=e.options.strong||`*`;if(t!==`*`&&t!==`_`)throw Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}yc.peek=bc;function yc(e,t,n,r){let i=vc(n),a=n.enter(`strong`),o=n.createTracker(r),s=o.move(i+i),c=o.move(n.containerPhrasing(e,{after:i,before:s,...o.current()})),l=c.charCodeAt(0),u=Ws(r.before.charCodeAt(r.before.length-1),l,i);u.inside&&(c=Us(l)+c.slice(1));let d=c.charCodeAt(c.length-1),f=Ws(r.after.charCodeAt(0),d,i);f.inside&&(c=c.slice(0,-1)+Us(d));let p=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},s+c+p}function bc(e,t,n){return n.options.strong||`*`}function xc(e,t,n,r){return n.safe(e.value,r)}function Sc(e){let t=e.options.ruleRepetition||3;if(t<3)throw Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Cc(e,t,n){let r=(dc(n)+(n.options.ruleSpaces?` `:``)).repeat(Sc(n));return n.options.ruleSpaces?r.slice(0,-1):r}const wc={blockquote:As,break:Ps,code:Rs,definition:Vs,emphasis:Gs,hardBreak:Ps,heading:Js,html:Ys,image:Zs,imageReference:$s,inlineCode:tc,link:ic,linkReference:oc,list:fc,listItem:mc,paragraph:hc,root:_c,strong:yc,text:xc,thematicBreak:Cc};function Tc(){return{enter:{table:Ec,tableData:Ac,tableHeader:Ac,tableRow:Oc},exit:{codeText:jc,table:Dc,tableData:kc,tableHeader:kc,tableRow:kc}}}function Ec(e){let t=e._align;o(t,"expected `_align` on table"),this.enter({type:`table`,align:t.map(function(e){return e===`none`?null:e}),children:[]},e),this.data.inTable=!0}function Dc(e){this.exit(e),this.data.inTable=void 0}function Oc(e){this.enter({type:`tableRow`,children:[]},e)}function kc(e){this.exit(e)}function Ac(e){this.enter({type:`tableCell`,children:[]},e)}function jc(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Mc));let n=this.stack[this.stack.length-1];o(n.type===`inlineCode`),n.value=t,this.exit(e)}function Mc(e,t){return t===`|`?t:e}function Nc(e){let t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?` `:`|`;return{unsafe:[{character:`\r`,inConstruct:`tableCell`},{character:`
`,inConstruct:`tableCell`},{atBreak:!0,character:`|`,after:`[	 :-]`},{character:`|`,inConstruct:`tableCell`},{atBreak:!0,character:`:`,after:`-`},{atBreak:!0,character:`-`,after:`[:|-]`}],handlers:{inlineCode:f,table:o,tableCell:c,tableRow:s}};function o(e,t,n,r){return l(u(e,n,r),e.align)}function s(e,t,n,r){let i=d(e,n,r),a=l([i]);return a.slice(0,a.indexOf(`
`))}function c(e,t,n,r){let i=n.enter(`tableCell`),o=n.enter(`phrasing`),s=n.containerPhrasing(e,{...r,before:a,after:a});return o(),i(),s}function l(e,t){return Ds(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function u(e,t,n){let r=e.children,i=-1,a=[],o=t.enter(`table`);for(;++i<r.length;)a[i]=d(r[i],t,n);return o(),a}function d(e,t,n){let r=e.children,i=-1,a=[],o=t.enter(`tableRow`);for(;++i<r.length;)a[i]=c(r[i],e,t,n);return o(),a}function f(e,t,n){let r=wc.inlineCode(e,t,n);return n.stack.includes(`tableCell`)&&(r=r.replace(/\|/g,`\\$&`)),r}}function Pc(){return{exit:{taskListCheckValueChecked:Ic,taskListCheckValueUnchecked:Ic,paragraph:Lc}}}function Fc(){return{unsafe:[{atBreak:!0,character:`-`,after:`[:|-]`}],handlers:{listItem:Rc}}}function Ic(e){let t=this.stack[this.stack.length-2];o(t.type===`listItem`),t.checked=e.type===`taskListCheckValueChecked`}function Lc(e){let t=this.stack[this.stack.length-2];if(t&&t.type===`listItem`&&typeof t.checked==`boolean`){let e=this.stack[this.stack.length-1];o(e.type===`paragraph`);let n=e.children[0];if(n&&n.type===`text`){let r=t.children,i=-1,a;for(;++i<r.length;){let e=r[i];if(e.type===`paragraph`){a=e;break}}a===e&&(n.value=n.value.slice(1),n.value.length===0?e.children.shift():e.position&&n.position&&typeof n.position.start.offset==`number`&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function Rc(e,t,n,r){let i=e.children[0],a=typeof e.checked==`boolean`&&i&&i.type===`paragraph`,o=`[`+(e.checked?`x`:` `)+`] `,s=n.createTracker(r);a&&s.move(o);let c=wc.listItem(e,t,n,{...r,...s.current()});return a&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,l)),c;function l(e){return e+o}}function zc(){return[Uo(),hs(),bs(),Tc(),Pc()]}function Bc(e){return{extensions:[Wo(),gs(e),xs(),Nc(e),Fc()]}}const Vc={tokenize:tl,partial:!0},Hc={tokenize:nl,partial:!0},Uc={tokenize:rl,partial:!0},Wc={tokenize:il,partial:!0},Gc={tokenize:al,partial:!0},Kc={name:`wwwAutolink`,tokenize:$c,previous:ol},qc={name:`protocolAutolink`,tokenize:el,previous:sl},Jc={name:`emailAutolink`,tokenize:Qc,previous:cl},Yc={};function Xc(){return{text:Yc}}let Zc=48;for(;Zc<123;)Yc[Zc]=Jc,Zc++,Zc===58?Zc=65:Zc===91&&(Zc=97);Yc[43]=Jc,Yc[45]=Jc,Yc[46]=Jc,Yc[95]=Jc,Yc[72]=[Jc,qc],Yc[104]=[Jc,qc],Yc[87]=[Jc,Kc],Yc[119]=[Jc,Kc];function Qc(e,t,n){let r=this,i,a;return o;function o(t){return!ll(t)||!cl.call(r,r.previous)||ul(r.events)?n(t):(e.enter(`literalAutolink`),e.enter(`literalAutolinkEmail`),s(t))}function s(t){return ll(t)?(e.consume(t),s):t===64?(e.consume(t),c):n(t)}function c(t){return t===46?e.check(Gc,u,l)(t):t===45||t===95||Ot(t)?(a=!0,e.consume(t),c):u(t)}function l(t){return e.consume(t),i=!0,c}function u(o){return a&&i&&Dt(r.previous)?(e.exit(`literalAutolinkEmail`),e.exit(`literalAutolink`),t(o)):n(o)}}function $c(e,t,n){let r=this;return i;function i(t){return t!==87&&t!==119||!ol.call(r,r.previous)||ul(r.events)?n(t):(e.enter(`literalAutolink`),e.enter(`literalAutolinkWww`),e.check(Vc,e.attempt(Hc,e.attempt(Uc,a),n),n)(t))}function a(n){return e.exit(`literalAutolinkWww`),e.exit(`literalAutolink`),t(n)}}function el(e,t,n){let r=this,i=``,a=!1;return o;function o(t){return(t===72||t===104)&&sl.call(r,r.previous)&&!ul(r.events)?(e.enter(`literalAutolink`),e.enter(`literalAutolinkHttp`),i+=String.fromCodePoint(t),e.consume(t),s):n(t)}function s(t){if(Dt(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),s;if(t===58){let n=i.toLowerCase();if(n===`http`||n===`https`)return e.consume(t),c}return n(t)}function c(t){return t===47?(e.consume(t),a?l:(a=!0,c)):n(t)}function l(t){return t===null||At(t)||A(t)||Ft(t)||Pt(t)?n(t):e.attempt(Hc,e.attempt(Uc,u),n)(t)}function u(n){return e.exit(`literalAutolinkHttp`),e.exit(`literalAutolink`),t(n)}}function tl(e,t,n){let r=0;return i;function i(t){return(t===87||t===119)&&r<3?(r++,e.consume(t),i):t===46&&r===3?(e.consume(t),a):n(t)}function a(e){return e===null?n(e):t(e)}}function nl(e,t,n){let r,i,a;return o;function o(t){return t===46||t===95?e.check(Wc,c,s)(t):t===null||A(t)||Ft(t)||t!==45&&Pt(t)?c(t):(a=!0,e.consume(t),o)}function s(t){return t===95?r=!0:(i=r,r=void 0),e.consume(t),o}function c(e){return i||r||!a?n(e):t(e)}}function rl(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(Wc,t,a)(o):o===null||A(o)||Ft(o)?t(o):(e.consume(o),i)}function a(t){return t===41&&r++,e.consume(t),i}}function il(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),a):o===93?(e.consume(o),i):o===60||o===null||A(o)||Ft(o)?t(o):n(o)}function i(e){return e===null||e===40||e===91||A(e)||Ft(e)?t(e):r(e)}function a(e){return Dt(e)?o(e):n(e)}function o(t){return t===59?(e.consume(t),r):Dt(t)?(e.consume(t),o):n(t)}}function al(e,t,n){return r;function r(t){return e.consume(t),i}function i(e){return Ot(e)?n(e):t(e)}}function ol(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||A(e)}function sl(e){return!Dt(e)}function cl(e){return!(e===47||ll(e))}function ll(e){return e===43||e===45||e===46||e===95||Ot(e)}function ul(e){let t=e.length,n=!1;for(;t--;){let r=e[t][1];if((r.type===`labelLink`||r.type===`labelImage`)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const dl={tokenize:yl,partial:!0};function fl(){return{document:{91:{name:`gfmFootnoteDefinition`,tokenize:gl,continuation:{tokenize:_l},exit:vl}},text:{91:{name:`gfmFootnoteCall`,tokenize:hl},93:{name:`gfmPotentialFootnoteCall`,add:`after`,tokenize:pl,resolveTo:ml}}}}function pl(e,t,n){let r=this,i=r.events.length,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),o;for(;i--;){let e=r.events[i][1];if(e.type===`labelImage`){o=e;break}if(e.type===`gfmFootnoteCall`||e.type===`labelLink`||e.type===`label`||e.type===`image`||e.type===`link`)break}return s;function s(i){if(!o||!o._balanced)return n(i);let s=Et(r.sliceSerialize({start:o.end,end:r.now()}));return s.codePointAt(0)!==94||!a.includes(s.slice(1))?n(i):(e.enter(`gfmFootnoteCallLabelMarker`),e.consume(i),e.exit(`gfmFootnoteCallLabelMarker`),t(i))}}function ml(e,t){let n=e.length,r;for(;n--;)if(e[n][1].type===`labelImage`&&e[n][0]===`enter`){r=e[n][1];break}e[n+1][1].type=`data`,e[n+3][1].type=`gfmFootnoteCallLabelMarker`;let i={type:`gfmFootnoteCall`,start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:`gfmFootnoteCallMarker`,start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;let o={type:`gfmFootnoteCallString`,start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},s={type:`chunkString`,contentType:`string`,start:Object.assign({},o.start),end:Object.assign({},o.end)},c=[e[n+1],e[n+2],[`enter`,i,t],e[n+3],e[n+4],[`enter`,a,t],[`exit`,a,t],[`enter`,o,t],[`enter`,s,t],[`exit`,s,t],[`exit`,o,t],e[e.length-2],e[e.length-1],[`exit`,i,t]];return e.splice(n,e.length-n+1,...c),e}function hl(e,t,n){let r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),a=0,o;return s;function s(t){return e.enter(`gfmFootnoteCall`),e.enter(`gfmFootnoteCallLabelMarker`),e.consume(t),e.exit(`gfmFootnoteCallLabelMarker`),c}function c(t){return t===94?(e.enter(`gfmFootnoteCallMarker`),e.consume(t),e.exit(`gfmFootnoteCallMarker`),e.enter(`gfmFootnoteCallString`),e.enter(`chunkString`).contentType=`string`,l):n(t)}function l(s){if(a>999||s===93&&!o||s===null||s===91||A(s))return n(s);if(s===93){e.exit(`chunkString`);let a=e.exit(`gfmFootnoteCallString`);return i.includes(Et(r.sliceSerialize(a)))?(e.enter(`gfmFootnoteCallLabelMarker`),e.consume(s),e.exit(`gfmFootnoteCallLabelMarker`),e.exit(`gfmFootnoteCall`),t):n(s)}return A(s)||(o=!0),a++,e.consume(s),s===92?u:l}function u(t){return t===91||t===92||t===93?(e.consume(t),a++,l):l(t)}}function gl(e,t,n){let r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),a,o=0,s;return c;function c(t){return e.enter(`gfmFootnoteDefinition`)._container=!0,e.enter(`gfmFootnoteDefinitionLabel`),e.enter(`gfmFootnoteDefinitionLabelMarker`),e.consume(t),e.exit(`gfmFootnoteDefinitionLabelMarker`),l}function l(t){return t===94?(e.enter(`gfmFootnoteDefinitionMarker`),e.consume(t),e.exit(`gfmFootnoteDefinitionMarker`),e.enter(`gfmFootnoteDefinitionLabelString`),e.enter(`chunkString`).contentType=`string`,u):n(t)}function u(t){if(o>999||t===93&&!s||t===null||t===91||A(t))return n(t);if(t===93){e.exit(`chunkString`);let n=e.exit(`gfmFootnoteDefinitionLabelString`);return a=Et(r.sliceSerialize(n)),e.enter(`gfmFootnoteDefinitionLabelMarker`),e.consume(t),e.exit(`gfmFootnoteDefinitionLabelMarker`),e.exit(`gfmFootnoteDefinitionLabel`),f}return A(t)||(s=!0),o++,e.consume(t),t===92?d:u}function d(t){return t===91||t===92||t===93?(e.consume(t),o++,u):u(t)}function f(t){return t===58?(e.enter(`definitionMarker`),e.consume(t),e.exit(`definitionMarker`),i.includes(a)||i.push(a),M(e,p,`gfmFootnoteDefinitionWhitespace`)):n(t)}function p(e){return t(e)}}function _l(e,t,n){return e.check(Qt,t,e.attempt(dl,t,n))}function vl(e){e.exit(`gfmFootnoteDefinition`)}function yl(e,t,n){let r=this;return M(e,i,`gfmFootnoteDefinitionIndent`,5);function i(e){let i=r.events[r.events.length-1];return i&&i[1].type===`gfmFootnoteDefinitionIndent`&&i[2].sliceSerialize(i[1],!0).length===4?t(e):n(e)}}function bl(e){let t=e||{},n=t.singleTilde,r={name:`strikethrough`,tokenize:a,resolveAll:i};return n??=!0,{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(e,t){let n=-1;for(;++n<e.length;)if(e[n][0]===`enter`&&e[n][1].type===`strikethroughSequenceTemporary`&&e[n][1]._close){let r=n;for(;r--;)if(e[r][0]===`exit`&&e[r][1].type===`strikethroughSequenceTemporary`&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type=`strikethroughSequence`,e[r][1].type=`strikethroughSequence`;let i={type:`strikethrough`,start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},a={type:`strikethroughText`,start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},o=[[`enter`,i,t],[`enter`,e[r][1],t],[`exit`,e[r][1],t],[`enter`,a,t]],s=t.parser.constructs.insideSpan.null;s&&yt(o,o.length,0,Gt(s,e.slice(r+1,n),t)),yt(o,o.length,0,[[`exit`,a,t],[`enter`,e[n][1],t],[`exit`,e[n][1],t],[`exit`,i,t]]),yt(e,r-1,n-r+3,o),n=r+o.length-2;break}}for(n=-1;++n<e.length;)e[n][1].type===`strikethroughSequenceTemporary`&&(e[n][1].type=`data`);return e}function a(e,t,r){let i=this.previous,a=this.events,o=0;return s;function s(t){return i===126&&a[a.length-1][1].type!==`characterEscape`?r(t):(e.enter(`strikethroughSequenceTemporary`),c(t))}function c(a){let s=Wt(i);if(a===126)return o>1?r(a):(e.consume(a),o++,c);if(o<2&&!n)return r(a);let l=e.exit(`strikethroughSequenceTemporary`),u=Wt(a);return l._open=!u||u===2&&!!s,l._close=!s||s===2&&!!u,t(a)}}}var xl=class{constructor(){this.map=[]}add(e,t,n){Sl(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),this.map.length===0)return;let t=this.map.length,n=[];for(;t>0;)--t,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(let t of r)e.push(t);r=n.pop()}this.map.length=0}};function Sl(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function Cl(e,t){let n=!1,r=[];for(;t<e.length;){let i=e[t];if(n){if(i[0]===`enter`)i[1].type===`tableContent`&&r.push(e[t+1][1].type===`tableDelimiterMarker`?`left`:`none`);else if(i[1].type===`tableContent`){if(e[t-1][1].type===`tableDelimiterMarker`){let e=r.length-1;r[e]=r[e]===`left`?`center`:`right`}}else if(i[1].type===`tableDelimiterRow`)break}else i[0]===`enter`&&i[1].type===`tableDelimiterRow`&&(n=!0);t+=1}return r}function wl(){return{flow:{null:{name:`table`,tokenize:Tl,resolveAll:El}}}}function Tl(e,t,n){let r=this,i=0,a=0,o;return s;function s(e){let t=r.events.length-1;for(;t>-1;){let e=r.events[t][1].type;if(e===`lineEnding`||e===`linePrefix`)t--;else break}let i=t>-1?r.events[t][1].type:null,a=i===`tableHead`||i===`tableRow`?x:c;return a===x&&r.parser.lazy[r.now().line]?n(e):a(e)}function c(t){return e.enter(`tableHead`),e.enter(`tableRow`),l(t)}function l(e){return e===124?u(e):(o=!0,a+=1,u(e))}function u(t){return t===null?n(t):k(t)?a>1?(a=0,r.interrupt=!0,e.exit(`tableRow`),e.enter(`lineEnding`),e.consume(t),e.exit(`lineEnding`),p):n(t):j(t)?M(e,u,`whitespace`)(t):(a+=1,o&&(o=!1,i+=1),t===124?(e.enter(`tableCellDivider`),e.consume(t),e.exit(`tableCellDivider`),o=!0,u):(e.enter(`data`),d(t)))}function d(t){return t===null||t===124||A(t)?(e.exit(`data`),u(t)):(e.consume(t),t===92?f:d)}function f(t){return t===92||t===124?(e.consume(t),d):d(t)}function p(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter(`tableDelimiterRow`),o=!1,j(t)?M(e,m,`linePrefix`,r.parser.constructs.disable.null.includes(`codeIndented`)?void 0:4)(t):m(t))}function m(t){return t===45||t===58?g(t):t===124?(o=!0,e.enter(`tableCellDivider`),e.consume(t),e.exit(`tableCellDivider`),h):ee(t)}function h(t){return j(t)?M(e,g,`whitespace`)(t):g(t)}function g(t){return t===58?(a+=1,o=!0,e.enter(`tableDelimiterMarker`),e.consume(t),e.exit(`tableDelimiterMarker`),_):t===45?(a+=1,_(t)):t===null||k(t)?b(t):ee(t)}function _(t){return t===45?(e.enter(`tableDelimiterFiller`),v(t)):ee(t)}function v(t){return t===45?(e.consume(t),v):t===58?(o=!0,e.exit(`tableDelimiterFiller`),e.enter(`tableDelimiterMarker`),e.consume(t),e.exit(`tableDelimiterMarker`),y):(e.exit(`tableDelimiterFiller`),y(t))}function y(t){return j(t)?M(e,b,`whitespace`)(t):b(t)}function b(n){return n===124?m(n):n===null||k(n)?!o||i!==a?ee(n):(e.exit(`tableDelimiterRow`),e.exit(`tableHead`),t(n)):ee(n)}function ee(e){return n(e)}function x(t){return e.enter(`tableRow`),S(t)}function S(n){return n===124?(e.enter(`tableCellDivider`),e.consume(n),e.exit(`tableCellDivider`),S):n===null||k(n)?(e.exit(`tableRow`),t(n)):j(n)?M(e,S,`whitespace`)(n):(e.enter(`data`),C(n))}function C(t){return t===null||t===124||A(t)?(e.exit(`data`),S(t)):(e.consume(t),t===92?w:C)}function w(t){return t===92||t===124?(e.consume(t),C):C(t)}}function El(e,t){let n=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],s=!1,c=0,l,u,d,f=new xl;for(;++n<e.length;){let p=e[n],m=p[1];p[0]===`enter`?m.type===`tableHead`?(s=!1,c!==0&&(Ol(f,t,c,l,u),u=void 0,c=0),l={type:`table`,start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[[`enter`,l,t]])):m.type===`tableRow`||m.type===`tableDelimiterRow`?(r=!0,d=void 0,a=[0,0,0,0],o=[0,n+1,0,0],s&&(s=!1,u={type:`tableBody`,start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[[`enter`,u,t]])),i=m.type===`tableDelimiterRow`?2:u?3:1):i&&(m.type===`data`||m.type===`tableDelimiterMarker`||m.type===`tableDelimiterFiller`)?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],d=Dl(f,t,a,i,void 0,d),a=[0,0,0,0]),o[2]=n)):m.type===`tableCellDivider`&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],d=Dl(f,t,a,i,void 0,d)),a=o,o=[a[1],n,0,0])):m.type===`tableHead`?(s=!0,c=n):m.type===`tableRow`||m.type===`tableDelimiterRow`?(c=n,a[1]===0?o[1]!==0&&(d=Dl(f,t,o,i,n,d)):(o[0]=o[1],d=Dl(f,t,a,i,n,d)),i=0):i&&(m.type===`data`||m.type===`tableDelimiterMarker`||m.type===`tableDelimiterFiller`)&&(o[3]=n)}for(c!==0&&Ol(f,t,c,l,u),f.consume(t.events),n=-1;++n<t.events.length;){let e=t.events[n];e[0]===`enter`&&e[1].type===`table`&&(e[1]._align=Cl(t.events,n))}return e}function Dl(e,t,n,r,i,a){let o=r===1?`tableHeader`:r===2?`tableDelimiter`:`tableData`,s=`tableContent`;n[0]!==0&&(a.end=Object.assign({},kl(t.events,n[0])),e.add(n[0],0,[[`exit`,a,t]]));let c=kl(t.events,n[1]);if(a={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[[`enter`,a,t]]),n[2]!==0){let i=kl(t.events,n[2]),a=kl(t.events,n[3]),o={type:s,start:Object.assign({},i),end:Object.assign({},a)};if(e.add(n[2],0,[[`enter`,o,t]]),r!==2){let r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type=`chunkText`,r[1].contentType=`text`,n[3]>n[2]+1){let t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[[`exit`,o,t]])}return i!==void 0&&(a.end=Object.assign({},kl(t.events,i)),e.add(i,0,[[`exit`,a,t]]),a=void 0),a}function Ol(e,t,n,r,i){let a=[],o=kl(t.events,n);i&&(i.end=Object.assign({},o),a.push([`exit`,i,t])),r.end=Object.assign({},o),a.push([`exit`,r,t]),e.add(n+1,0,a)}function kl(e,t){let n=e[t],r=n[0]===`enter`?`start`:`end`;return n[1][r]}const Al={name:`tasklistCheck`,tokenize:Ml};function jl(){return{text:{91:Al}}}function Ml(e,t,n){let r=this;return i;function i(t){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(t):(e.enter(`taskListCheck`),e.enter(`taskListCheckMarker`),e.consume(t),e.exit(`taskListCheckMarker`),a)}function a(t){return A(t)?(e.enter(`taskListCheckValueUnchecked`),e.consume(t),e.exit(`taskListCheckValueUnchecked`),o):t===88||t===120?(e.enter(`taskListCheckValueChecked`),e.consume(t),e.exit(`taskListCheckValueChecked`),o):n(t)}function o(t){return t===93?(e.enter(`taskListCheckMarker`),e.consume(t),e.exit(`taskListCheckMarker`),e.exit(`taskListCheck`),s):n(t)}function s(r){return k(r)?t(r):j(r)?e.check({tokenize:Nl},t,n)(r):n(r)}}function Nl(e,t,n){return M(e,r,`whitespace`);function r(e){return e===null?n(e):t(e)}}function Pl(e){return St([Xc(),fl(),bl(e),wl(),jl()])}const Fl={};function Il(e){let t=this,n=e||Fl,r=t.data(),i=r.micromarkExtensions||=[],a=r.fromMarkdownExtensions||=[],o=r.toMarkdownExtensions||=[];i.push(Pl(n)),a.push(zc()),o.push(Bc(n))}const Ll=[Il],Rl=({children:e})=>r(`div`,{className:`markdown-body`,children:r(Ao,{remarkPlugins:Ll,children:e})});var zl=`vercel.ai.error`,Bl=Symbol.for(zl),Vl,Hl=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[Vl]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,zl)}static hasMarker(e,t){let n=Symbol.for(t);return typeof e==`object`&&!!e&&n in e&&typeof e[n]==`boolean`&&e[n]===!0}};Vl=Bl;var N=Hl,Ul=`AI_APICallError`,Wl=`vercel.ai.error.${Ul}`,Gl=Symbol.for(Wl),Kl,ql=class extends N{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:a,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:c}){super({name:Ul,message:e,cause:o}),this[Kl]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=a,this.isRetryable=s,this.data=c}static isInstance(e){return N.hasMarker(e,Wl)}};Kl=Gl;var Jl=`AI_EmptyResponseBodyError`,Yl=`vercel.ai.error.${Jl}`,Xl=Symbol.for(Yl),Zl,Ql=class extends N{constructor({message:e=`Empty response body`}={}){super({name:Jl,message:e}),this[Zl]=!0}static isInstance(e){return N.hasMarker(e,Yl)}};Zl=Xl;function $l(e){return e==null?`unknown error`:typeof e==`string`?e:e instanceof Error?e.message:JSON.stringify(e)}var eu=`AI_InvalidArgumentError`,tu=`vercel.ai.error.${eu}`,nu=Symbol.for(tu),ru,iu=class extends N{constructor({message:e,cause:t,argument:n}){super({name:eu,message:e,cause:t}),this[ru]=!0,this.argument=n}static isInstance(e){return N.hasMarker(e,tu)}};ru=nu;var au=`AI_InvalidPromptError`,ou=`vercel.ai.error.${au}`,su=Symbol.for(ou),cu,lu=class extends N{constructor({prompt:e,message:t,cause:n}){super({name:au,message:`Invalid prompt: ${t}`,cause:n}),this[cu]=!0,this.prompt=e}static isInstance(e){return N.hasMarker(e,ou)}};cu=su;var uu=`AI_InvalidResponseDataError`,du=`vercel.ai.error.${uu}`,fu=Symbol.for(du),pu,mu=class extends N{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:uu,message:t}),this[pu]=!0,this.data=e}static isInstance(e){return N.hasMarker(e,du)}};pu=fu;var hu=`AI_JSONParseError`,gu=`vercel.ai.error.${hu}`,_u=Symbol.for(gu),vu,yu=class extends N{constructor({text:e,cause:t}){super({name:hu,message:`JSON parsing failed: Text: ${e}.
Error message: ${$l(t)}`,cause:t}),this[vu]=!0,this.text=e}static isInstance(e){return N.hasMarker(e,gu)}};vu=_u;var bu=`AI_LoadAPIKeyError`,xu=`vercel.ai.error.${bu}`,Su=Symbol.for(xu),Cu,wu=class extends N{constructor({message:e}){super({name:bu,message:e}),this[Cu]=!0}static isInstance(e){return N.hasMarker(e,xu)}};Cu=Su;var Tu=`AI_LoadSettingError`,Eu=`vercel.ai.error.${Tu}`,Du=Symbol.for(Eu),Ou;Ou=Du;var ku=`AI_NoContentGeneratedError`,Au=`vercel.ai.error.${ku}`,ju=Symbol.for(Au),Mu;Mu=ju;var Nu=`AI_NoSuchModelError`,Pu=`vercel.ai.error.${Nu}`,Fu=Symbol.for(Pu),Iu,Lu=class extends N{constructor({errorName:e=Nu,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[Iu]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return N.hasMarker(e,Pu)}};Iu=Fu;var Ru=`AI_TooManyEmbeddingValuesForCallError`,zu=`vercel.ai.error.${Ru}`,Bu=Symbol.for(zu),Vu,Hu=class extends N{constructor(e){super({name:Ru,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Vu]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return N.hasMarker(e,zu)}};Vu=Bu;var Uu=`AI_TypeValidationError`,Wu=`vercel.ai.error.${Uu}`,Gu=Symbol.for(Wu),Ku,qu=class e extends N{constructor({value:e,cause:t}){super({name:Uu,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${$l(t)}`,cause:t}),this[Ku]=!0,this.value=e}static isInstance(e){return N.hasMarker(e,Wu)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}};Ku=Gu;var Ju=qu,Yu=`AI_UnsupportedFunctionalityError`,Xu=`vercel.ai.error.${Yu}`,Zu=Symbol.for(Xu),Qu,$u=class extends N{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Yu,message:t}),this[Qu]=!0,this.functionality=e}static isInstance(e){return N.hasMarker(e,Xu)}};Qu=Zu;var ed=class extends Error{constructor(e,t){super(e),this.name=`ParseError`,this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function td(e){}function nd(e){if(typeof e==`function`)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=td,onError:n=td,onRetry:r=td,onComment:i}=e,a=``,o=!0,s,c=``,l=``;function u(e){let t=o?e.replace(/^\xEF\xBB\xBF/,``):e,[n,r]=rd(`${a}${t}`);for(let e of n)d(e);a=r,o=!1}function d(e){if(e===``){p();return}if(e.startsWith(`:`)){i&&i(e.slice(e.startsWith(`: `)?2:1));return}let t=e.indexOf(`:`);if(t!==-1){let n=e.slice(0,t),r=e[t+1]===` `?2:1,i=e.slice(t+r);f(n,i,e);return}f(e,``,e)}function f(e,t,i){switch(e){case`event`:l=t;break;case`data`:c=`${c}${t}
`;break;case`id`:s=t.includes(`\0`)?void 0:t;break;case`retry`:/^\d+$/.test(t)?r(parseInt(t,10)):n(new ed(`Invalid \`retry\` value: "${t}"`,{type:`invalid-retry`,value:t,line:i}));break;default:n(new ed(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:`unknown-field`,field:e,value:t,line:i}));break}}function p(){c.length>0&&t({id:s,event:l||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),s=void 0,c=``,l=``}function m(e={}){a&&e.consume&&d(a),o=!0,s=void 0,c=``,l=``,a=``}return{feed:u,reset:m}}function rd(e){let t=[],n=``,r=0;for(;r<e.length;){let i=e.indexOf(`\r`,r),a=e.indexOf(`
`,r),o=-1;if(i!==-1&&a!==-1?o=Math.min(i,a):i===-1?a!==-1&&(o=a):o=i===e.length-1?-1:i,o===-1){n=e.slice(r);break}else{let n=e.slice(r,o);t.push(n),r=o+1,e[r-1]===`\r`&&e[r]===`
`&&r++}}return[t,n]}var id=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(i){r=nd({onEvent:e=>{i.enqueue(e)},onError(t){e===`terminate`?i.error(t):typeof e==`function`&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}};const ad=Object.freeze({status:`aborted`});function P(e,t,n){function r(n,r){var i;for(let a in Object.defineProperty(n,`_zod`,{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,r),o.prototype)a in n||Object.defineProperty(n,a,{value:o.prototype[a].bind(n)});n._zod.constr=o,n._zod.def=r}let i=n?.Parent??Object;class a extends i{}Object.defineProperty(a,`name`,{value:e});function o(e){var t;let i=n?.Parent?new a:this;r(i,e),(t=i._zod).deferred??(t.deferred=[]);for(let e of i._zod.deferred)e();return i}return Object.defineProperty(o,`init`,{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>{var r;return n?.Parent&&t instanceof n.Parent?!0:t==null||(r=t._zod)==null||(r=r.traits)==null?void 0:r.has(e)}}),Object.defineProperty(o,`name`,{value:e}),o}const od=Symbol(`zod_brand`);var sd=class extends Error{constructor(){super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`)}},cd=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name=`ZodEncodeError`}};const ld={};function ud(e){return e&&Object.assign(ld,e),ld}function dd(e){let t=Object.values(e).filter(e=>typeof e==`number`),n=Object.entries(e).filter(([e,n])=>t.indexOf(+e)===-1).map(([e,t])=>t);return n}function fd(e,t){return typeof t==`bigint`?t.toString():t}function pd(e){let t=!1;return{get value(){if(!t){let t=e();return Object.defineProperty(this,`value`,{value:t}),t}throw Error(`cached value already set`)}}}function md(e){return e==null}function hd(e){let t=e.startsWith(`^`)?1:0,n=e.endsWith(`$`)?e.length-1:e.length;return e.slice(t,n)}function gd(e,t){let n=(e.toString().split(`.`)[1]||``).length,r=t.toString(),i=(r.split(`.`)[1]||``).length;if(i===0&&/\d?e-\d?/.test(r)){let e=r.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=n>i?n:i,o=Number.parseInt(e.toFixed(a).replace(`.`,``)),s=Number.parseInt(t.toFixed(a).replace(`.`,``));return o%s/10**a}const _d=Symbol(`evaluating`);function F(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==_d)return r===void 0&&(r=_d,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function vd(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function yd(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function bd(...e){let t={};for(let n of e){let e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function xd(e){return JSON.stringify(e)}const Sd=`captureStackTrace`in Error?Error.captureStackTrace:(...e)=>{};function Cd(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}const wd=pd(()=>{var e;if(typeof navigator<`u`&&!((e=navigator)==null||(e=e.userAgent)==null)&&e.includes(`Cloudflare`))return!1;try{let e=Function;return new e(``),!0}catch{return!1}});function Td(e){if(Cd(e)===!1)return!1;let t=e.constructor;if(t===void 0)return!0;let n=t.prototype;return!(Cd(n)===!1||Object.prototype.hasOwnProperty.call(n,`isPrototypeOf`)===!1)}function Ed(e){return Td(e)?{...e}:e}const Dd=new Set([`string`,`number`,`symbol`]);function Od(e){return e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}function kd(e,t,n){let r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function I(e){let t=e;if(!t)return{};if(typeof t==`string`)return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error==`string`?{...t,error:()=>t.error}:t}function Ad(e){return Object.keys(e).filter(t=>e[t]._zod.optin===`optional`&&e[t]._zod.optout===`optional`)}const jd={safeint:[-(2**53-1),2**53-1],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Md(e,t){let n=e._zod.def,r=bd(e._zod.def,{get shape(){let e={};for(let r in t){if(!(r in n.shape))throw Error(`Unrecognized key: "${r}"`);if(!t[r])continue;e[r]=n.shape[r]}return yd(this,`shape`,e),e},checks:[]});return kd(e,r)}function Nd(e,t){let n=e._zod.def,r=bd(e._zod.def,{get shape(){let r={...e._zod.def.shape};for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);if(!t[e])continue;delete r[e]}return yd(this,`shape`,r),r},checks:[]});return kd(e,r)}function Pd(e,t){if(!Td(t))throw Error(`Invalid input to extend: expected a plain object`);let n=e._zod.def.checks,r=n&&n.length>0;if(r)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let i=bd(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t};return yd(this,`shape`,n),n},checks:[]});return kd(e,i)}function Fd(e,t){if(!Td(t))throw Error(`Invalid input to safeExtend: expected a plain object`);let n={...e._zod.def,get shape(){let n={...e._zod.def.shape,...t};return yd(this,`shape`,n),n},checks:e._zod.def.checks};return kd(e,n)}function Id(e,t){let n=bd(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t._zod.def.shape};return yd(this,`shape`,n),n},get catchall(){return t._zod.def.catchall},checks:[]});return kd(e,n)}function Ld(e,t,n){let r=bd(t._zod.def,{get shape(){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in r))throw Error(`Unrecognized key: "${t}"`);if(!n[t])continue;i[t]=e?new e({type:`optional`,innerType:r[t]}):r[t]}else for(let t in r)i[t]=e?new e({type:`optional`,innerType:r[t]}):r[t];return yd(this,`shape`,i),i},checks:[]});return kd(t,r)}function Rd(e,t,n){let r=bd(t._zod.def,{get shape(){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);if(!n[t])continue;i[t]=new e({type:`nonoptional`,innerType:r[t]})}else for(let t in r)i[t]=new e({type:`nonoptional`,innerType:r[t]});return yd(this,`shape`,i),i},checks:[]});return kd(t,r)}function zd(e,t=0){var n;if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if((n=e.issues[r])?.continue!==!0)return!0;return!1}function Bd(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function Vd(e){return typeof e==`string`?e:e?.message}function Hd(e,t,n){let r={...e,path:e.path??[]};if(!e.message){var i,a,o,s,c;let l=Vd((i=e.inst)==null||(i=i._zod.def)==null||(a=i.error)==null?void 0:a.call(i,e))??Vd(t==null||(o=t.error)==null?void 0:o.call(t,e))??Vd((s=n.customError)?.call(n,e))??Vd((c=n.localeError)?.call(n,e))??`Invalid input`;r.message=l}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function Ud(e){return Array.isArray(e)?`array`:typeof e==`string`?`string`:`unknown`}function Wd(...e){let[t,n,r]=e;return typeof t==`string`?{message:t,code:`custom`,input:n,inst:r}:{...t}}const Gd=(e,t)=>{e.name=`$ZodError`,Object.defineProperty(e,`_zod`,{value:e._zod,enumerable:!1}),Object.defineProperty(e,`issues`,{value:t,enumerable:!1}),e.message=JSON.stringify(t,fd,2),Object.defineProperty(e,`toString`,{value:()=>e.message,enumerable:!1})},Kd=P(`$ZodError`,Gd),qd=P(`$ZodError`,Gd,{Parent:Error});function Jd(e,t=e=>e.message){let n={},r=[];for(let i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function Yd(e,t){let n=t||function(e){return e.message},r={_errors:[]},i=e=>{for(let t of e.issues)if(t.code===`invalid_union`&&t.errors.length)t.errors.map(e=>i({issues:e}));else if(t.code===`invalid_key`)i({issues:t.issues});else if(t.code===`invalid_element`)i({issues:t.issues});else if(t.path.length===0)r._errors.push(n(t));else{let e=r,i=0;for(;i<t.path.length;){let r=t.path[i],a=i===t.path.length-1;a?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(e),r}const Xd=e=>(t,n,r,i)=>{let a=r?Object.assign(r,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise)throw new sd;if(o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>Hd(e,a,ud())));throw Sd(t,i?.callee),t}return o.value},Zd=Xd(qd),Qd=e=>async(t,n,r,i)=>{let a=r?Object.assign(r,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>Hd(e,a,ud())));throw Sd(t,i?.callee),t}return o.value},$d=Qd(qd),ef=e=>(t,n,r)=>{let i=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new sd;return a.issues.length?{success:!1,error:new(e??Kd)(a.issues.map(e=>Hd(e,i,ud())))}:{success:!0,data:a.value}},tf=ef(qd),nf=e=>async(t,n,r)=>{let i=r?Object.assign(r,{async:!0}):{async:!0},a=t._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>Hd(e,i,ud())))}:{success:!0,data:a.value}},rf=nf(qd),af=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return Xd(e)(t,n,i)},sf=af(qd),cf=e=>(t,n,r)=>Xd(e)(t,n,r),lf=cf(qd),uf=e=>async(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return Qd(e)(t,n,i)},df=uf(qd),ff=e=>async(t,n,r)=>Qd(e)(t,n,r),pf=ff(qd),mf=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return ef(e)(t,n,i)},hf=mf(qd),gf=e=>(t,n,r)=>ef(e)(t,n,r),_f=gf(qd),vf=e=>async(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return nf(e)(t,n,i)},yf=vf(qd),bf=e=>async(t,n,r)=>nf(e)(t,n,r),xf=bf(qd),Sf=/^[cC][^\s-]{8,}$/,Cf=/^[0-9a-z]+$/,wf=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Tf=/^[0-9a-vA-V]{20}$/,Ef=/^[A-Za-z0-9]{27}$/,Df=/^[a-zA-Z0-9_-]{21}$/,Of=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,kf=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Af=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,jf=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Mf=`^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`;function Nf(){return new RegExp(Mf,`u`)}const Pf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ff=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,If=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Lf=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rf=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,zf=/^[A-Za-z0-9_-]*$/,Bf=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Vf=/^\+(?:[0-9]){6,14}[0-9]$/,Hf=`(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))`,Uf=RegExp(`^${Hf}$`);function Wf(e){let t=`(?:[01]\\d|2[0-3]):[0-5]\\d`,n=typeof e.precision==`number`?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`;return n}function Gf(e){return RegExp(`^${Wf(e)}$`)}function Kf(e){let t=Wf({precision:e.precision}),n=[`Z`];e.local&&n.push(``),e.offset&&n.push(`([+-](?:[01]\\d|2[0-3]):[0-5]\\d)`);let r=`${t}(?:${n.join(`|`)})`;return RegExp(`^${Hf}T(?:${r})$`)}const qf=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??``}}`:`[\\s\\S]*`;return RegExp(`^${t}$`)},Jf=/^\d+$/,Yf=/^-?\d+(?:\.\d+)?/i,Xf=/true|false/i,Zf=/null/i,Qf=/^[^A-Z]*$/,$f=/^[^a-z]*$/,ep=P(`$ZodCheck`,(e,t)=>{var n;e._zod??={},e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),tp={number:`number`,bigint:`bigint`,object:`date`},np=P(`$ZodCheckLessThan`,(e,t)=>{ep.init(e,t);let n=tp[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??1/0;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:`too_big`,maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),rp=P(`$ZodCheckGreaterThan`,(e,t)=>{ep.init(e,t);let n=tp[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??-1/0;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:`too_small`,minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ip=P(`$ZodCheckMultipleOf`,(e,t)=>{ep.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw Error(`Cannot mix number and bigint in multiple_of check.`);let r=typeof n.value==`bigint`?n.value%t.value===BigInt(0):gd(n.value,t.value)===0;r||n.issues.push({origin:typeof n.value,code:`not_multiple_of`,divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),ap=P(`$ZodCheckNumberFormat`,(e,t)=>{var n;ep.init(e,t),t.format=t.format||`float64`;let r=(n=t.format)?.includes(`int`),i=r?`int`:`number`,[a,o]=jd[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=a,n.maximum=o,r&&(n.pattern=Jf)}),e._zod.check=n=>{let s=n.value;if(r){if(!Number.isInteger(s)){n.issues.push({expected:i,format:t.format,code:`invalid_type`,continue:!1,input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?n.issues.push({input:s,code:`too_big`,maximum:2**53-1,note:`Integers must be within the safe integer range.`,inst:e,origin:i,continue:!t.abort}):n.issues.push({input:s,code:`too_small`,minimum:-(2**53-1),note:`Integers must be within the safe integer range.`,inst:e,origin:i,continue:!t.abort});return}}s<a&&n.issues.push({origin:`number`,input:s,code:`too_small`,minimum:a,inclusive:!0,inst:e,continue:!t.abort}),s>o&&n.issues.push({origin:`number`,input:s,code:`too_big`,maximum:o,inst:e})}}),op=P(`$ZodCheckMaxLength`,(e,t)=>{var n;ep.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!md(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag.maximum??1/0;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let r=n.value,i=r.length;if(i<=t.maximum)return;let a=Ud(r);n.issues.push({origin:a,code:`too_big`,maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),sp=P(`$ZodCheckMinLength`,(e,t)=>{var n;ep.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!md(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag.minimum??-1/0;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let r=n.value,i=r.length;if(i>=t.minimum)return;let a=Ud(r);n.issues.push({origin:a,code:`too_small`,minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),cp=P(`$ZodCheckLengthEquals`,(e,t)=>{var n;ep.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!md(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{let r=n.value,i=r.length;if(i===t.length)return;let a=Ud(r),o=i>t.length;n.issues.push({origin:a,...o?{code:`too_big`,maximum:t.length}:{code:`too_small`,minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),lp=P(`$ZodCheckStringFormat`,(e,t)=>{var n,r;ep.init(e,t),e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??=new Set,n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:`string`,code:`invalid_format`,format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),up=P(`$ZodCheckRegex`,(e,t)=>{lp.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:`string`,code:`invalid_format`,format:`regex`,input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),dp=P(`$ZodCheckLowerCase`,(e,t)=>{t.pattern??=Qf,lp.init(e,t)}),fp=P(`$ZodCheckUpperCase`,(e,t)=>{t.pattern??=$f,lp.init(e,t)}),pp=P(`$ZodCheckIncludes`,(e,t)=>{ep.init(e,t);let n=Od(t.includes),r=new RegExp(typeof t.position==`number`?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:`string`,code:`invalid_format`,format:`includes`,includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),mp=P(`$ZodCheckStartsWith`,(e,t)=>{ep.init(e,t);let n=RegExp(`^${Od(t.prefix)}.*`);t.pattern??=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:`string`,code:`invalid_format`,format:`starts_with`,prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),hp=P(`$ZodCheckEndsWith`,(e,t)=>{ep.init(e,t);let n=RegExp(`.*${Od(t.suffix)}$`);t.pattern??=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:`string`,code:`invalid_format`,format:`ends_with`,suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),gp=P(`$ZodCheckOverwrite`,(e,t)=>{ep.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});var _p=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),--this.indent}write(e){if(typeof e==`function`){e(this,{execution:`sync`}),e(this,{execution:`async`});return}let t=e,n=t.split(`
`).filter(e=>e),r=Math.min(...n.map(e=>e.length-e.trimStart().length)),i=n.map(e=>e.slice(r)).map(e=>` `.repeat(this.indent*2)+e);for(let e of i)this.content.push(e)}compile(){var e,t;let n=Function,r=(e=this)?.args,i=(t=this)?.content??[``],a=[...i.map(e=>`  ${e}`)];return new n(...r,a.join(`
`))}};const vp={major:4,minor:1,patch:1},L=P(`$ZodType`,(e,t)=>{var n;e??={},e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=vp;let r=[...e._zod.def.checks??[]];e._zod.traits.has(`$ZodCheck`)&&r.unshift(e);for(let t of r)for(let n of t._zod.onattach)n(e);if(r.length===0){var i;(n=e._zod).deferred??(n.deferred=[]),(i=e._zod.deferred)?.push(()=>{e._zod.run=e._zod.parse})}else{let t=(e,t,n)=>{let r=zd(e),i;for(let a of t){if(a._zod.def.when){let t=a._zod.def.when(e);if(!t)continue}else if(r)continue;let t=e.issues.length,o=a._zod.check(e);if(o instanceof Promise&&n?.async===!1)throw new sd;if(i||o instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await o;let n=e.issues.length;n!==t&&(r||=zd(e,t))});else{let n=e.issues.length;if(n===t)continue;r||=zd(e,t)}}return i?i.then(()=>e):e},n=(n,i,a)=>{if(zd(n))return n.aborted=!0,n;let o=t(i,r,a);if(o instanceof Promise){if(a.async===!1)throw new sd;return o.then(t=>e._zod.parse(t,a))}return e._zod.parse(o,a)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if(a.direction===`backward`){let t=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,i,a)):n(t,i,a)}let o=e._zod.parse(i,a);if(o instanceof Promise){if(a.async===!1)throw new sd;return o.then(e=>t(e,r,a))}return t(o,r,a)}}e[`~standard`]={validate:t=>{try{var n;let r=tf(e,t);return r.success?{value:r.data}:{issues:(n=r.error)?.issues}}catch{return rf(e,t).then(e=>{var t;return e.success?{value:e.data}:{issues:(t=e.error)?.issues}})}},vendor:`zod`,version:1}}),yp=P(`$ZodString`,(e,t)=>{var n;L.init(e,t),e._zod.pattern=[...(e==null||(n=e._zod.bag)==null?void 0:n.patterns)??[]].pop()??qf(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value==`string`||n.issues.push({expected:`string`,code:`invalid_type`,input:n.value,inst:e}),n}}),R=P(`$ZodStringFormat`,(e,t)=>{lp.init(e,t),yp.init(e,t)}),bp=P(`$ZodGUID`,(e,t)=>{t.pattern??=kf,R.init(e,t)}),xp=P(`$ZodUUID`,(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8},n=e[t.version];if(n===void 0)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??=Af(n)}else t.pattern??=Af();R.init(e,t)}),Sp=P(`$ZodEmail`,(e,t)=>{t.pattern??=jf,R.init(e,t)}),Cp=P(`$ZodURL`,(e,t)=>{R.init(e,t),e._zod.check=n=>{try{let r=n.value.trim(),i=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:`invalid_format`,format:`url`,note:`Invalid hostname`,pattern:Bf.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(`:`)?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:`invalid_format`,format:`url`,note:`Invalid protocol`,pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:`invalid_format`,format:`url`,input:n.value,inst:e,continue:!t.abort})}}}),wp=P(`$ZodEmoji`,(e,t)=>{t.pattern??=Nf(),R.init(e,t)}),Tp=P(`$ZodNanoID`,(e,t)=>{t.pattern??=Df,R.init(e,t)}),Ep=P(`$ZodCUID`,(e,t)=>{t.pattern??=Sf,R.init(e,t)}),Dp=P(`$ZodCUID2`,(e,t)=>{t.pattern??=Cf,R.init(e,t)}),Op=P(`$ZodULID`,(e,t)=>{t.pattern??=wf,R.init(e,t)}),kp=P(`$ZodXID`,(e,t)=>{t.pattern??=Tf,R.init(e,t)}),Ap=P(`$ZodKSUID`,(e,t)=>{t.pattern??=Ef,R.init(e,t)}),jp=P(`$ZodISODateTime`,(e,t)=>{t.pattern??=Kf(t),R.init(e,t)}),Mp=P(`$ZodISODate`,(e,t)=>{t.pattern??=Uf,R.init(e,t)}),Np=P(`$ZodISOTime`,(e,t)=>{t.pattern??=Gf(t),R.init(e,t)}),Pp=P(`$ZodISODuration`,(e,t)=>{t.pattern??=Of,R.init(e,t)}),Fp=P(`$ZodIPv4`,(e,t)=>{t.pattern??=Pf,R.init(e,t),e._zod.onattach.push(e=>{let t=e._zod.bag;t.format=`ipv4`})}),Ip=P(`$ZodIPv6`,(e,t)=>{t.pattern??=Ff,R.init(e,t),e._zod.onattach.push(e=>{let t=e._zod.bag;t.format=`ipv6`}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:`invalid_format`,format:`ipv6`,input:n.value,inst:e,continue:!t.abort})}}}),Lp=P(`$ZodCIDRv4`,(e,t)=>{t.pattern??=If,R.init(e,t)}),Rp=P(`$ZodCIDRv6`,(e,t)=>{t.pattern??=Lf,R.init(e,t),e._zod.check=n=>{let[r,i]=n.value.split(`/`);try{if(!i)throw Error();let e=Number(i);if(`${e}`!==i||e<0||e>128)throw Error();new URL(`http://[${r}]`)}catch{n.issues.push({code:`invalid_format`,format:`cidrv6`,input:n.value,inst:e,continue:!t.abort})}}});function zp(e){if(e===``)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const Bp=P(`$ZodBase64`,(e,t)=>{t.pattern??=Rf,R.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding=`base64`}),e._zod.check=n=>{zp(n.value)||n.issues.push({code:`invalid_format`,format:`base64`,input:n.value,inst:e,continue:!t.abort})}});function Vp(e){if(!zf.test(e))return!1;let t=e.replace(/[-_]/g,e=>e===`-`?`+`:`/`),n=t.padEnd(Math.ceil(t.length/4)*4,`=`);return zp(n)}const Hp=P(`$ZodBase64URL`,(e,t)=>{t.pattern??=zf,R.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding=`base64url`}),e._zod.check=n=>{Vp(n.value)||n.issues.push({code:`invalid_format`,format:`base64url`,input:n.value,inst:e,continue:!t.abort})}}),Up=P(`$ZodE164`,(e,t)=>{t.pattern??=Vf,R.init(e,t)});function Wp(e,t=null){try{let n=e.split(`.`);if(n.length!==3)return!1;let[r]=n;if(!r)return!1;let i=JSON.parse(atob(r));return!(`typ`in i&&i?.typ!==`JWT`||!i.alg||t&&(!(`alg`in i)||i.alg!==t))}catch{return!1}}const Gp=P(`$ZodJWT`,(e,t)=>{R.init(e,t),e._zod.check=n=>{Wp(n.value,t.alg)||n.issues.push({code:`invalid_format`,format:`jwt`,input:n.value,inst:e,continue:!t.abort})}}),Kp=P(`$ZodNumber`,(e,t)=>{L.init(e,t),e._zod.pattern=e._zod.bag.pattern??Yf,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}let i=n.value;if(typeof i==`number`&&!Number.isNaN(i)&&Number.isFinite(i))return n;let a=typeof i==`number`?Number.isNaN(i)?`NaN`:Number.isFinite(i)?void 0:`Infinity`:void 0;return n.issues.push({expected:`number`,code:`invalid_type`,input:i,inst:e,...a?{received:a}:{}}),n}}),qp=P(`$ZodNumber`,(e,t)=>{ap.init(e,t),Kp.init(e,t)}),Jp=P(`$ZodBoolean`,(e,t)=>{L.init(e,t),e._zod.pattern=Xf,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}let i=n.value;return typeof i==`boolean`||n.issues.push({expected:`boolean`,code:`invalid_type`,input:i,inst:e}),n}}),Yp=P(`$ZodNull`,(e,t)=>{L.init(e,t),e._zod.pattern=Zf,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{let r=t.value;return r===null||t.issues.push({expected:`null`,code:`invalid_type`,input:r,inst:e}),t}}),Xp=P(`$ZodAny`,(e,t)=>{L.init(e,t),e._zod.parse=e=>e}),Zp=P(`$ZodUnknown`,(e,t)=>{L.init(e,t),e._zod.parse=e=>e}),Qp=P(`$ZodNever`,(e,t)=>{L.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:`never`,code:`invalid_type`,input:t.value,inst:e}),t)});function $p(e,t,n){e.issues.length&&t.issues.push(...Bd(n,e.issues)),t.value[n]=e.value}const em=P(`$ZodArray`,(e,t)=>{L.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({expected:`array`,code:`invalid_type`,input:i,inst:e}),n;n.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let o=i[e],s=t.element._zod.run({value:o,issues:[]},r);s instanceof Promise?a.push(s.then(t=>$p(t,n,e))):$p(s,n,e)}return a.length?Promise.all(a).then(()=>n):n}});function tm(e,t,n,r){e.issues.length&&t.issues.push(...Bd(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function nm(e){let t=Object.keys(e.shape);for(let n of t)if(!e.shape[n]._zod.traits.has(`$ZodType`))throw Error(`Invalid element at key "${n}": expected a Zod schema`);let n=Ad(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function rm(e,t,n,r,i,a){let o=[],s=i.keySet,c=i.catchall._zod,l=c.def.type;for(let i of Object.keys(t)){if(s.has(i))continue;if(l===`never`){o.push(i);continue}let a=c.run({value:t[i],issues:[]},r);a instanceof Promise?e.push(a.then(e=>tm(e,n,i,t))):tm(a,n,i,t)}return o.length&&n.issues.push({code:`unrecognized_keys`,keys:o,input:t,inst:a}),e.length?Promise.all(e).then(()=>n):n}const im=P(`$ZodObject`,(e,t)=>{L.init(e,t);let n=pd(()=>nm(t));F(e._zod,`propValues`,()=>{let e=t.shape,n={};for(let t in e){let r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(let e of r.values)n[t].add(e)}}return n});let r=Cd,i=t.catchall,a;e._zod.parse=(t,o)=>{a??=n.value;let s=t.value;if(!r(s))return t.issues.push({expected:`object`,code:`invalid_type`,input:s,inst:e}),t;t.value={};let c=[],l=a.shape;for(let e of a.keys){let n=l[e],r=n._zod.run({value:s[e],issues:[]},o);r instanceof Promise?c.push(r.then(n=>tm(n,t,e,s))):tm(r,t,e,s)}return i?rm(c,s,t,o,n.value,e):c.length?Promise.all(c).then(()=>t):t}}),am=P(`$ZodObjectJIT`,(e,t)=>{im.init(e,t);let n=e._zod.parse,r=pd(()=>nm(t)),i=e=>{let t=new _p([`shape`,`payload`,`ctx`]),n=r.value,i=e=>{let t=xd(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write(`const input = payload.value;`);let a=Object.create(null),o=0;for(let e of n.keys)a[e]=`key_${o++}`;t.write(`const newResult = {}`);for(let e of n.keys){let n=a[e],r=xd(e);t.write(`const ${n} = ${i(e)};`),t.write(`
        if (${n}.issues.length) {
          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${r}, ...iss.path] : [${r}]
          })));
        }
        
        if (${n}.value === undefined) {
          if (${r} in input) {
            newResult[${r}] = undefined;
          }
        } else {
          newResult[${r}] = ${n}.value;
        }
      `)}t.write(`payload.value = newResult;`),t.write(`return payload;`);let s=t.compile();return(t,n)=>s(e,t,n)},a,o=Cd,s=!ld.jitless,c=wd,l=s&&c.value,u=t.catchall,d;e._zod.parse=(c,f)=>{d??=r.value;let p=c.value;return o(p)?s&&l&&f?.async===!1&&f.jitless!==!0?(a||=i(t.shape),c=a(c,f),u?rm([],p,c,f,d,e):c):n(c,f):(c.issues.push({expected:`object`,code:`invalid_type`,input:p,inst:e}),c)}});function om(e,t,n,r){for(let n of e)if(n.issues.length===0)return t.value=n.value,t;let i=e.filter(e=>!zd(e));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:`invalid_union`,input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>Hd(e,r,ud())))}),t)}const sm=P(`$ZodUnion`,(e,t)=>{L.init(e,t),F(e._zod,`optin`,()=>t.options.some(e=>e._zod.optin===`optional`)?`optional`:void 0),F(e._zod,`optout`,()=>t.options.some(e=>e._zod.optout===`optional`)?`optional`:void 0),F(e._zod,`values`,()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),F(e._zod,`pattern`,()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>hd(e.source)).join(`|`)})$`)}});let n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(n)return r(i,a);let o=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)s.push(t),o=!0;else{if(t.issues.length===0)return t;s.push(t)}}return o?Promise.all(s).then(t=>om(t,i,e,a)):om(s,i,e,a)}}),cm=P(`$ZodDiscriminatedUnion`,(e,t)=>{sm.init(e,t);let n=e._zod.parse;F(e._zod,`propValues`,()=>{let e={};for(let n of t.options){let r=n._zod.propValues;if(!r||Object.keys(r).length===0)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(let r of n)e[t].add(r)}}return e});let r=pd(()=>{let e=t.options,n=new Map;for(let i of e){var r;let e=(r=i._zod.propValues)?.[t.discriminator];if(!e||e.size===0)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let t of e){if(n.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,i)}}return n});e._zod.parse=(i,a)=>{let o=i.value;if(!Cd(o))return i.issues.push({code:`invalid_type`,expected:`object`,input:o,inst:e}),i;let s=r.value.get(o?.[t.discriminator]);return s?s._zod.run(i,a):t.unionFallback?n(i,a):(i.issues.push({code:`invalid_union`,errors:[],note:`No matching discriminator`,discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),i)}}),lm=P(`$ZodIntersection`,(e,t)=>{L.init(e,t),e._zod.parse=(e,n)=>{let r=e.value,i=t.left._zod.run({value:r,issues:[]},n),a=t.right._zod.run({value:r,issues:[]},n),o=i instanceof Promise||a instanceof Promise;return o?Promise.all([i,a]).then(([t,n])=>dm(e,t,n)):dm(e,i,a)}});function um(e,t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Td(e)&&Td(t)){let n=Object.keys(t),r=Object.keys(e).filter(e=>n.indexOf(e)!==-1),i={...e,...t};for(let n of r){let r=um(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};i[n]=r.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t[r],o=um(i,a);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function dm(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),zd(e))return e;let r=um(t.value,n.value);if(!r.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const fm=P(`$ZodRecord`,(e,t)=>{L.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Td(i))return n.issues.push({expected:`record`,code:`invalid_type`,input:i,inst:e}),n;let a=[];if(t.keyType._zod.values){let o=t.keyType._zod.values;n.value={};for(let e of o)if(typeof e==`string`||typeof e==`number`||typeof e==`symbol`){let o=t.valueType._zod.run({value:i[e],issues:[]},r);o instanceof Promise?a.push(o.then(t=>{t.issues.length&&n.issues.push(...Bd(e,t.issues)),n.value[e]=t.value})):(o.issues.length&&n.issues.push(...Bd(e,o.issues)),n.value[e]=o.value)}let s;for(let e in i)o.has(e)||(s??=[],s.push(e));s&&s.length>0&&n.issues.push({code:`unrecognized_keys`,input:i,inst:e,keys:s})}else{n.value={};for(let o of Reflect.ownKeys(i)){if(o===`__proto__`)continue;let s=t.keyType._zod.run({value:o,issues:[]},r);if(s instanceof Promise)throw Error(`Async schemas not supported in object keys currently`);if(s.issues.length){n.issues.push({code:`invalid_key`,origin:`record`,issues:s.issues.map(e=>Hd(e,r,ud())),input:o,path:[o],inst:e}),n.value[s.value]=s.value;continue}let c=t.valueType._zod.run({value:i[o],issues:[]},r);c instanceof Promise?a.push(c.then(e=>{e.issues.length&&n.issues.push(...Bd(o,e.issues)),n.value[s.value]=e.value})):(c.issues.length&&n.issues.push(...Bd(o,c.issues)),n.value[s.value]=c.value)}}return a.length?Promise.all(a).then(()=>n):n}}),pm=P(`$ZodEnum`,(e,t)=>{L.init(e,t);let n=dd(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=RegExp(`^(${n.filter(e=>Dd.has(typeof e)).map(e=>typeof e==`string`?Od(e):e.toString()).join(`|`)})$`),e._zod.parse=(t,i)=>{let a=t.value;return r.has(a)||t.issues.push({code:`invalid_value`,values:n,input:a,inst:e}),t}}),mm=P(`$ZodLiteral`,(e,t)=>{if(L.init(e,t),t.values.length===0)throw Error(`Cannot create literal schema with no valid values`);e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>typeof e==`string`?Od(e):e?Od(e.toString()):String(e)).join(`|`)})$`),e._zod.parse=(n,r)=>{let i=n.value;return e._zod.values.has(i)||n.issues.push({code:`invalid_value`,values:t.values,input:i,inst:e}),n}}),hm=P(`$ZodTransform`,(e,t)=>{L.init(e,t),e._zod.parse=(n,r)=>{if(r.direction===`backward`)throw new cd(e.constructor.name);let i=t.transform(n.value,n);if(r.async){let e=i instanceof Promise?i:Promise.resolve(i);return e.then(e=>(n.value=e,n))}if(i instanceof Promise)throw new sd;return n.value=i,n}});function gm(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const _m=P(`$ZodOptional`,(e,t)=>{L.init(e,t),e._zod.optin=`optional`,e._zod.optout=`optional`,F(e._zod,`values`,()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),F(e._zod,`pattern`,()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${hd(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if(t.innerType._zod.optin===`optional`){let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>gm(t,e.value)):gm(r,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,n)}}),vm=P(`$ZodNullable`,(e,t)=>{L.init(e,t),F(e._zod,`optin`,()=>t.innerType._zod.optin),F(e._zod,`optout`,()=>t.innerType._zod.optout),F(e._zod,`pattern`,()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${hd(e.source)}|null)$`):void 0}),F(e._zod,`values`,()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>e.value===null?e:t.innerType._zod.run(e,n)}),ym=P(`$ZodDefault`,(e,t)=>{L.init(e,t),e._zod.optin=`optional`,F(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);if(e.value===void 0)return e.value=t.defaultValue,e;let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>bm(e,t)):bm(r,t)}});function bm(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const xm=P(`$ZodPrefault`,(e,t)=>{L.init(e,t),e._zod.optin=`optional`,F(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(n.direction===`backward`||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),Sm=P(`$ZodNonOptional`,(e,t)=>{L.init(e,t),F(e._zod,`values`,()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>e!==void 0)):void 0}),e._zod.parse=(n,r)=>{let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(t=>Cm(t,e)):Cm(i,e)}});function Cm(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:`invalid_type`,expected:`nonoptional`,input:e.value,inst:t}),e}const wm=P(`$ZodCatch`,(e,t)=>{L.init(e,t),F(e._zod,`optin`,()=>t.innerType._zod.optin),F(e._zod,`optout`,()=>t.innerType._zod.optout),F(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Hd(e,n,ud()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Hd(e,n,ud()))},input:e.value}),e.issues=[]),e)}}),Tm=P(`$ZodPipe`,(e,t)=>{L.init(e,t),F(e._zod,`values`,()=>t.in._zod.values),F(e._zod,`optin`,()=>t.in._zod.optin),F(e._zod,`optout`,()=>t.out._zod.optout),F(e._zod,`propValues`,()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if(n.direction===`backward`){let r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>Em(e,t.in,n)):Em(r,t.in,n)}let r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>Em(e,t.out,n)):Em(r,t.out,n)}});function Em(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Dm=P(`$ZodReadonly`,(e,t)=>{L.init(e,t),F(e._zod,`propValues`,()=>t.innerType._zod.propValues),F(e._zod,`values`,()=>t.innerType._zod.values),F(e._zod,`optin`,()=>t.innerType._zod.optin),F(e._zod,`optout`,()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Om):Om(r)}});function Om(e){return e.value=Object.freeze(e.value),e}const km=P(`$ZodLazy`,(e,t)=>{L.init(e,t),F(e._zod,`innerType`,()=>t.getter()),F(e._zod,`pattern`,()=>e._zod.innerType._zod.pattern),F(e._zod,`propValues`,()=>e._zod.innerType._zod.propValues),F(e._zod,`optin`,()=>e._zod.innerType._zod.optin??void 0),F(e._zod,`optout`,()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,n)=>{let r=e._zod.innerType;return r._zod.run(t,n)}}),Am=P(`$ZodCustom`,(e,t)=>{ep.init(e,t),L.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{let r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(t=>jm(t,n,r,e));jm(i,n,r,e)}});function jm(e,t,n,r){if(!e){let e={code:`custom`,input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(Wd(e))}}const Mm=Symbol(`ZodOutput`),Nm=Symbol(`ZodInput`);var Pm=class{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let n=t[0];if(this._map.set(e,n),n&&typeof n==`object`&&`id`in n){if(this._idmap.has(n.id))throw Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&typeof t==`object`&&`id`in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let n={...this.get(t)??{}};delete n.id;let r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Fm(){return new Pm}const Im=Fm();function Lm(e,t){return new e({type:`string`,...I(t)})}function Rm(e,t){return new e({type:`string`,format:`email`,check:`string_format`,abort:!1,...I(t)})}function zm(e,t){return new e({type:`string`,format:`guid`,check:`string_format`,abort:!1,...I(t)})}function Bm(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,...I(t)})}function Vm(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v4`,...I(t)})}function Hm(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v6`,...I(t)})}function Um(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v7`,...I(t)})}function Wm(e,t){return new e({type:`string`,format:`url`,check:`string_format`,abort:!1,...I(t)})}function Gm(e,t){return new e({type:`string`,format:`emoji`,check:`string_format`,abort:!1,...I(t)})}function Km(e,t){return new e({type:`string`,format:`nanoid`,check:`string_format`,abort:!1,...I(t)})}function qm(e,t){return new e({type:`string`,format:`cuid`,check:`string_format`,abort:!1,...I(t)})}function Jm(e,t){return new e({type:`string`,format:`cuid2`,check:`string_format`,abort:!1,...I(t)})}function Ym(e,t){return new e({type:`string`,format:`ulid`,check:`string_format`,abort:!1,...I(t)})}function Xm(e,t){return new e({type:`string`,format:`xid`,check:`string_format`,abort:!1,...I(t)})}function Zm(e,t){return new e({type:`string`,format:`ksuid`,check:`string_format`,abort:!1,...I(t)})}function Qm(e,t){return new e({type:`string`,format:`ipv4`,check:`string_format`,abort:!1,...I(t)})}function $m(e,t){return new e({type:`string`,format:`ipv6`,check:`string_format`,abort:!1,...I(t)})}function eh(e,t){return new e({type:`string`,format:`cidrv4`,check:`string_format`,abort:!1,...I(t)})}function th(e,t){return new e({type:`string`,format:`cidrv6`,check:`string_format`,abort:!1,...I(t)})}function nh(e,t){return new e({type:`string`,format:`base64`,check:`string_format`,abort:!1,...I(t)})}function rh(e,t){return new e({type:`string`,format:`base64url`,check:`string_format`,abort:!1,...I(t)})}function ih(e,t){return new e({type:`string`,format:`e164`,check:`string_format`,abort:!1,...I(t)})}function ah(e,t){return new e({type:`string`,format:`jwt`,check:`string_format`,abort:!1,...I(t)})}function oh(e,t){return new e({type:`string`,format:`datetime`,check:`string_format`,offset:!1,local:!1,precision:null,...I(t)})}function sh(e,t){return new e({type:`string`,format:`date`,check:`string_format`,...I(t)})}function ch(e,t){return new e({type:`string`,format:`time`,check:`string_format`,precision:null,...I(t)})}function lh(e,t){return new e({type:`string`,format:`duration`,check:`string_format`,...I(t)})}function uh(e,t){return new e({type:`number`,checks:[],...I(t)})}function dh(e,t){return new e({type:`number`,check:`number_format`,abort:!1,format:`safeint`,...I(t)})}function fh(e,t){return new e({type:`boolean`,...I(t)})}function ph(e,t){return new e({type:`null`,...I(t)})}function mh(e){return new e({type:`any`})}function hh(e){return new e({type:`unknown`})}function gh(e,t){return new e({type:`never`,...I(t)})}function _h(e,t){return new np({check:`less_than`,...I(t),value:e,inclusive:!1})}function vh(e,t){return new np({check:`less_than`,...I(t),value:e,inclusive:!0})}function yh(e,t){return new rp({check:`greater_than`,...I(t),value:e,inclusive:!1})}function bh(e,t){return new rp({check:`greater_than`,...I(t),value:e,inclusive:!0})}function xh(e,t){return new ip({check:`multiple_of`,...I(t),value:e})}function Sh(e,t){let n=new op({check:`max_length`,...I(t),maximum:e});return n}function Ch(e,t){return new sp({check:`min_length`,...I(t),minimum:e})}function wh(e,t){return new cp({check:`length_equals`,...I(t),length:e})}function Th(e,t){return new up({check:`string_format`,format:`regex`,...I(t),pattern:e})}function Eh(e){return new dp({check:`string_format`,format:`lowercase`,...I(e)})}function Dh(e){return new fp({check:`string_format`,format:`uppercase`,...I(e)})}function Oh(e,t){return new pp({check:`string_format`,format:`includes`,...I(t),includes:e})}function kh(e,t){return new mp({check:`string_format`,format:`starts_with`,...I(t),prefix:e})}function Ah(e,t){return new hp({check:`string_format`,format:`ends_with`,...I(t),suffix:e})}function jh(e){return new gp({check:`overwrite`,tx:e})}function Mh(e){return jh(t=>t.normalize(e))}function Nh(){return jh(e=>e.trim())}function Ph(){return jh(e=>e.toLowerCase())}function Fh(){return jh(e=>e.toUpperCase())}function Ih(e,t,n){return new e({type:`array`,element:t,...I(n)})}function Lh(e,t,n){let r=I(n);r.abort??=!0;let i=new e({type:`custom`,check:`custom`,fn:t,...r});return i}function Rh(e,t,n){let r=new e({type:`custom`,check:`custom`,fn:t,...I(n)});return r}function zh(e){let t=Bh(n=>(n.addIssue=e=>{if(typeof e==`string`)n.issues.push(Wd(e,n.value,t._zod.def));else{let r=e;r.fatal&&(r.continue=!1),r.code??=`custom`,r.input??=n.value,r.inst??=t,r.continue??=!t._zod.def.abort,n.issues.push(Wd(r))}},e(n.value,n)));return t}function Bh(e,t){let n=new ep({check:`custom`,...I(t)});return n._zod.check=e,n}var Vh=class{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??Im,this.target=e?.target??`draft-2020-12`,this.unrepresentable=e?.unrepresentable??`throw`,this.override=e?.override??(()=>{}),this.io=e?.io??`output`,this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var n,r,i;let a=e._zod.def,o={guid:`uuid`,url:`uri`,datetime:`date-time`,json_string:`json-string`,regex:``},s=this.seen.get(e);if(s){s.count++;let n=t.schemaPath.includes(e);return n&&(s.cycle=t.path),s.schema}let c={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,c);let l=(n=(r=e._zod).toJSONSchema)?.call(r);if(l)c.schema=l;else{let n={...t,schemaPath:[...t.schemaPath,e],path:t.path},r=e._zod.parent;if(r)c.ref=r,this.process(r,n),this.seen.get(r).isParent=!0;else{let t=c.schema;switch(a.type){case`string`:{let n=t;n.type=`string`;let{minimum:r,maximum:i,format:a,patterns:s,contentEncoding:l}=e._zod.bag;if(typeof r==`number`&&(n.minLength=r),typeof i==`number`&&(n.maxLength=i),a&&(n.format=o[a]??a,n.format===``&&delete n.format),l&&(n.contentEncoding=l),s&&s.size>0){let e=[...s];e.length===1?n.pattern=e[0].source:e.length>1&&(c.schema.allOf=[...e.map(e=>({...this.target===`draft-7`||this.target===`draft-4`||this.target===`openapi-3.0`?{type:`string`}:{},pattern:e.source}))])}break}case`number`:{let n=t,{minimum:r,maximum:i,format:a,multipleOf:o,exclusiveMaximum:s,exclusiveMinimum:c}=e._zod.bag;typeof a==`string`&&a.includes(`int`)?n.type=`integer`:n.type=`number`,typeof c==`number`&&(this.target===`draft-4`?(n.minimum=c,n.exclusiveMinimum=!0):n.exclusiveMinimum=c),typeof r==`number`&&(n.minimum=r,typeof c==`number`&&this.target!==`draft-4`&&(c>=r?delete n.minimum:delete n.exclusiveMinimum)),typeof s==`number`&&(this.target===`draft-4`?(n.maximum=s,n.exclusiveMaximum=!0):n.exclusiveMaximum=s),typeof i==`number`&&(n.maximum=i,typeof s==`number`&&this.target!==`draft-4`&&(s<=i?delete n.maximum:delete n.exclusiveMaximum)),typeof o==`number`&&(n.multipleOf=o);break}case`boolean`:{let e=t;e.type=`boolean`;break}case`bigint`:if(this.unrepresentable===`throw`)throw Error(`BigInt cannot be represented in JSON Schema`);break;case`symbol`:if(this.unrepresentable===`throw`)throw Error(`Symbols cannot be represented in JSON Schema`);break;case`null`:t.type=`null`;break;case`any`:break;case`unknown`:break;case`undefined`:if(this.unrepresentable===`throw`)throw Error(`Undefined cannot be represented in JSON Schema`);break;case`void`:if(this.unrepresentable===`throw`)throw Error(`Void cannot be represented in JSON Schema`);break;case`never`:t.not={};break;case`date`:if(this.unrepresentable===`throw`)throw Error(`Date cannot be represented in JSON Schema`);break;case`array`:{let r=t,{minimum:i,maximum:o}=e._zod.bag;typeof i==`number`&&(r.minItems=i),typeof o==`number`&&(r.maxItems=o),r.type=`array`,r.items=this.process(a.element,{...n,path:[...n.path,`items`]});break}case`object`:{var u;let e=t;e.type=`object`,e.properties={};let r=a.shape;for(let t in r)e.properties[t]=this.process(r[t],{...n,path:[...n.path,`properties`,t]});let i=new Set(Object.keys(r)),o=new Set([...i].filter(e=>{let t=a.shape[e]._zod;return this.io===`input`?t.optin===void 0:t.optout===void 0}));o.size>0&&(e.required=Array.from(o)),(u=a.catchall)?._zod.def.type===`never`?e.additionalProperties=!1:a.catchall?a.catchall&&(e.additionalProperties=this.process(a.catchall,{...n,path:[...n.path,`additionalProperties`]})):this.io===`output`&&(e.additionalProperties=!1);break}case`union`:{let e=t,r=a.options.map((e,t)=>this.process(e,{...n,path:[...n.path,`anyOf`,t]}));if(this.target===`openapi-3.0`){let t=r.filter(e=>e.type!==`null`),n=t.length!==r.length;t.length===1?Object.assign(e,t[0]):e.anyOf=t,n&&(e.nullable=!0)}else e.anyOf=r;break}case`intersection`:{let e=t,r=this.process(a.left,{...n,path:[...n.path,`allOf`,0]}),i=this.process(a.right,{...n,path:[...n.path,`allOf`,1]}),o=e=>`allOf`in e&&Object.keys(e).length===1,s=[...o(r)?r.allOf:[r],...o(i)?i.allOf:[i]];e.allOf=s;break}case`tuple`:{let r=t;r.type=`array`;let i=a.items.map((e,t)=>this.process(e,{...n,path:[...n.path,`prefixItems`,t]}));if(this.target===`draft-2020-12`?r.prefixItems=i:r.items=i,a.rest){let e=this.process(a.rest,{...n,path:[...n.path,`items`]});this.target===`draft-2020-12`?r.items=e:r.additionalItems=e}a.rest&&(r.items=this.process(a.rest,{...n,path:[...n.path,`items`]}));let{minimum:o,maximum:s}=e._zod.bag;typeof o==`number`&&(r.minItems=o),typeof s==`number`&&(r.maxItems=s);break}case`record`:{let e=t;e.type=`object`,this.target!==`draft-4`&&(e.propertyNames=this.process(a.keyType,{...n,path:[...n.path,`propertyNames`]})),e.additionalProperties=this.process(a.valueType,{...n,path:[...n.path,`additionalProperties`]});break}case`map`:if(this.unrepresentable===`throw`)throw Error(`Map cannot be represented in JSON Schema`);break;case`set`:if(this.unrepresentable===`throw`)throw Error(`Set cannot be represented in JSON Schema`);break;case`enum`:{let e=t,n=dd(a.entries);n.every(e=>typeof e==`number`)&&(e.type=`number`),n.every(e=>typeof e==`string`)&&(e.type=`string`),e.enum=n;break}case`literal`:{let e=t,n=[];for(let e of a.values)if(e===void 0){if(this.unrepresentable===`throw`)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof e==`bigint`){if(this.unrepresentable===`throw`)throw Error(`BigInt literals cannot be represented in JSON Schema`);n.push(Number(e))}else n.push(e);if(n.length!==0)if(n.length===1){let t=n[0];e.type=t===null?`null`:typeof t,this.target===`draft-4`||this.target===`openapi-3.0`?e.enum=[t]:e.const=t}else n.every(e=>typeof e==`number`)&&(e.type=`number`),n.every(e=>typeof e==`string`)&&(e.type=`string`),n.every(e=>typeof e==`boolean`)&&(e.type=`string`),n.every(e=>e===null)&&(e.type=`null`),e.enum=n;break}case`file`:{let n=t,r={type:`string`,format:`binary`,contentEncoding:`binary`},{minimum:i,maximum:a,mime:o}=e._zod.bag;i!==void 0&&(r.minLength=i),a!==void 0&&(r.maxLength=a),o?o.length===1?(r.contentMediaType=o[0],Object.assign(n,r)):n.anyOf=o.map(e=>{let t={...r,contentMediaType:e};return t}):Object.assign(n,r);break}case`transform`:if(this.unrepresentable===`throw`)throw Error(`Transforms cannot be represented in JSON Schema`);break;case`nullable`:{let e=this.process(a.innerType,n);this.target===`openapi-3.0`?(Object.assign(t,e),t.nullable=!0,c.ref=a.innerType):t.anyOf=[e,{type:`null`}];break}case`nonoptional`:this.process(a.innerType,n),c.ref=a.innerType;break;case`success`:{let e=t;e.type=`boolean`;break}case`default`:this.process(a.innerType,n),c.ref=a.innerType,t.default=JSON.parse(JSON.stringify(a.defaultValue));break;case`prefault`:this.process(a.innerType,n),c.ref=a.innerType,this.io===`input`&&(t._prefault=JSON.parse(JSON.stringify(a.defaultValue)));break;case`catch`:{this.process(a.innerType,n),c.ref=a.innerType;let e;try{e=a.catchValue(void 0)}catch{throw Error(`Dynamic catch values are not supported in JSON Schema`)}t.default=e;break}case`nan`:if(this.unrepresentable===`throw`)throw Error(`NaN cannot be represented in JSON Schema`);break;case`template_literal`:{let n=t,r=e._zod.pattern;if(!r)throw Error(`Pattern not found in template literal`);n.type=`string`,n.pattern=r.source;break}case`pipe`:{let e=this.io===`input`?a.in._zod.def.type===`transform`?a.out:a.in:a.out;this.process(e,n),c.ref=e;break}case`readonly`:this.process(a.innerType,n),c.ref=a.innerType,t.readOnly=!0;break;case`promise`:this.process(a.innerType,n),c.ref=a.innerType;break;case`optional`:this.process(a.innerType,n),c.ref=a.innerType;break;case`lazy`:{let t=e._zod.innerType;this.process(t,n),c.ref=t;break}case`custom`:if(this.unrepresentable===`throw`)throw Error(`Custom types cannot be represented in JSON Schema`);break;case`function`:if(this.unrepresentable===`throw`)throw Error(`Function types cannot be represented in JSON Schema`);break;default:}}}let d=this.metadataRegistry.get(e);d&&Object.assign(c.schema,d),this.io===`input`&&Uh(e)&&(delete c.schema.examples,delete c.schema.default),this.io===`input`&&c.schema._prefault&&((i=c.schema).default??(i.default=c.schema._prefault)),delete c.schema._prefault;let f=this.seen.get(e);return f.schema}emit(e,t){var n,r;let i={cycles:t?.cycles??`ref`,reused:t?.reused??`inline`,external:t?.external??void 0},a=this.seen.get(e);if(!a)throw Error(`Unprocessed schema. This is a bug in Zod.`);let o=e=>{let t=this.target===`draft-2020-12`?`$defs`:`definitions`;if(i.external){var n;let r=(n=i.external.registry.get(e[0]))?.id,a=i.external.uri??(e=>e);if(r)return{ref:a(r)};let o=e[1].defId??e[1].schema.id??`schema${this.counter++}`;return e[1].defId=o,{defId:o,ref:`${a(`__shared`)}#/${t}/${o}`}}if(e[1]===a)return{ref:`#`};let r=`#`,o=`${r}/${t}/`,s=e[1].schema.id??`__schema${this.counter++}`;return{defId:s,ref:o+s}},s=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:n,defId:r}=o(e);t.def={...t.schema},r&&(t.defId=r);let i=t.schema;for(let e in i)delete i[e];i.$ref=n};if(i.cycles===`throw`)for(let e of this.seen.entries()){var c;let t=e[1];if(t.cycle)throw Error(`Cycle detected: #/${(c=t.cycle)?.join(`/`)}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let t of this.seen.entries()){var l;let n=t[1];if(e===t[0]){s(t);continue}if(i.external){var u;let n=(u=i.external.registry.get(t[0]))?.id;if(e!==t[0]&&n){s(t);continue}}let r=(l=this.metadataRegistry.get(t[0]))?.id;if(r){s(t);continue}if(n.cycle){s(t);continue}if(n.count>1&&i.reused===`ref`){s(t);continue}}let d=(e,t)=>{let n=this.seen.get(e),r=n.def??n.schema,i={...r};if(n.ref===null)return;let a=n.ref;if(n.ref=null,a){d(a,t);let e=this.seen.get(a).schema;e.$ref&&(t.target===`draft-7`||t.target===`draft-4`||t.target===`openapi-3.0`)?(r.allOf=r.allOf??[],r.allOf.push(e)):(Object.assign(r,e),Object.assign(r,i))}n.isParent||this.override({zodSchema:e,jsonSchema:r,path:n.path??[]})};for(let e of[...this.seen.entries()].reverse())d(e[0],{target:this.target});let f={};if(this.target===`draft-2020-12`?f.$schema=`https://json-schema.org/draft/2020-12/schema`:this.target===`draft-7`?f.$schema=`http://json-schema.org/draft-07/schema#`:this.target===`draft-4`?f.$schema=`http://json-schema.org/draft-04/schema#`:this.target===`openapi-3.0`||console.warn(`Invalid target: ${this.target}`),(n=i.external)?.uri){var p;let t=(p=i.external.registry.get(e))?.id;if(!t)throw Error("Schema is missing an `id` property");f.$id=i.external.uri(t)}Object.assign(f,a.def);let m=(r=i.external)?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(m[t.defId]=t.def)}i.external||Object.keys(m).length>0&&(this.target===`draft-2020-12`?f.$defs=m:f.definitions=m);try{return JSON.parse(JSON.stringify(f))}catch{throw Error(`Error converting schema to JSON.`)}}};function Hh(e,t){if(e instanceof Pm){let n=new Vh(t),r={};for(let t of e._idmap.entries()){let[e,r]=t;n.process(r)}let i={},a={registry:e,uri:t?.uri,defs:r};for(let r of e._idmap.entries()){let[e,o]=r;i[e]=n.emit(o,{...t,external:a})}if(Object.keys(r).length>0){let e=n.target===`draft-2020-12`?`$defs`:`definitions`;i.__shared={[e]:r}}return{schemas:i}}let n=new Vh(t);return n.process(e),n.emit(e,t)}function Uh(e,t){let n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);let r=e,i=r._zod.def;switch(i.type){case`string`:case`number`:case`bigint`:case`boolean`:case`date`:case`symbol`:case`undefined`:case`null`:case`any`:case`unknown`:case`never`:case`void`:case`literal`:case`enum`:case`nan`:case`file`:case`template_literal`:return!1;case`array`:return Uh(i.element,n);case`object`:for(let e in i.shape)if(Uh(i.shape[e],n))return!0;return!1;case`union`:for(let e of i.options)if(Uh(e,n))return!0;return!1;case`intersection`:return Uh(i.left,n)||Uh(i.right,n);case`tuple`:for(let e of i.items)if(Uh(e,n))return!0;return!!(i.rest&&Uh(i.rest,n));case`record`:return Uh(i.keyType,n)||Uh(i.valueType,n);case`map`:return Uh(i.keyType,n)||Uh(i.valueType,n);case`set`:return Uh(i.valueType,n);case`promise`:case`optional`:case`nonoptional`:case`nullable`:case`readonly`:return Uh(i.innerType,n);case`lazy`:return Uh(i.getter(),n);case`default`:return Uh(i.innerType,n);case`prefault`:return Uh(i.innerType,n);case`custom`:return!1;case`transform`:return!0;case`pipe`:return Uh(i.in,n)||Uh(i.out,n);case`success`:return!1;case`catch`:return!1;case`function`:return!1;default:}throw Error(`Unknown schema type: ${i.type}`)}const Wh=P(`ZodISODateTime`,(e,t)=>{jp.init(e,t),V.init(e,t)});function Gh(e){return oh(Wh,e)}const Kh=P(`ZodISODate`,(e,t)=>{Mp.init(e,t),V.init(e,t)});function qh(e){return sh(Kh,e)}const Jh=P(`ZodISOTime`,(e,t)=>{Np.init(e,t),V.init(e,t)});function Yh(e){return ch(Jh,e)}const Xh=P(`ZodISODuration`,(e,t)=>{Pp.init(e,t),V.init(e,t)});function Zh(e){return lh(Xh,e)}const Qh=(e,t)=>{Kd.init(e,t),e.name=`ZodError`,Object.defineProperties(e,{format:{value:t=>Yd(e,t)},flatten:{value:t=>Jd(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,fd,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,fd,2)}},isEmpty:{get(){return e.issues.length===0}}})},$h=P(`ZodError`,Qh),eg=P(`ZodError`,Qh,{Parent:Error}),tg=Xd(eg),ng=Qd(eg),rg=ef(eg),ig=nf(eg),ag=af(eg),og=cf(eg),sg=uf(eg),cg=ff(eg),lg=mf(eg),ug=gf(eg),dg=vf(eg),fg=bf(eg),z=P(`ZodType`,(e,t)=>(L.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,`_def`,{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>typeof e==`function`?{_zod:{check:e,def:{check:`custom`},onattach:[]}}:e)]}),e.clone=(t,n)=>kd(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>tg(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>rg(e,t,n),e.parseAsync=async(t,n)=>ng(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>ig(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>ag(e,t,n),e.decode=(t,n)=>og(e,t,n),e.encodeAsync=async(t,n)=>sg(e,t,n),e.decodeAsync=async(t,n)=>cg(e,t,n),e.safeEncode=(t,n)=>lg(e,t,n),e.safeDecode=(t,n)=>ug(e,t,n),e.safeEncodeAsync=async(t,n)=>dg(e,t,n),e.safeDecodeAsync=async(t,n)=>fg(e,t,n),e.refine=(t,n)=>e.check(D_(t,n)),e.superRefine=t=>e.check(O_(t)),e.overwrite=t=>e.check(jh(t)),e.optional=()=>c_(e),e.nullable=()=>u_(e),e.nullish=()=>c_(u_(e)),e.nonoptional=t=>g_(e,t),e.array=()=>G(e),e.or=t=>J([e,t]),e.and=t=>$g(e,t),e.transform=t=>b_(e,o_(t)),e.default=t=>f_(e,t),e.prefault=t=>m_(e,t),e.catch=t=>v_(e,t),e.pipe=t=>b_(e,t),e.readonly=()=>S_(e),e.describe=t=>{let n=e.clone();return Im.add(n,{description:t}),n},Object.defineProperty(e,`description`,{get(){var t;return(t=Im.get(e))?.description},configurable:!0}),e.meta=(...t)=>{if(t.length===0)return Im.get(e);let n=e.clone();return Im.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),pg=P(`_ZodString`,(e,t)=>{yp.init(e,t),z.init(e,t);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(Th(...t)),e.includes=(...t)=>e.check(Oh(...t)),e.startsWith=(...t)=>e.check(kh(...t)),e.endsWith=(...t)=>e.check(Ah(...t)),e.min=(...t)=>e.check(Ch(...t)),e.max=(...t)=>e.check(Sh(...t)),e.length=(...t)=>e.check(wh(...t)),e.nonempty=(...t)=>e.check(Ch(1,...t)),e.lowercase=t=>e.check(Eh(t)),e.uppercase=t=>e.check(Dh(t)),e.trim=()=>e.check(Nh()),e.normalize=(...t)=>e.check(Mh(...t)),e.toLowerCase=()=>e.check(Ph()),e.toUpperCase=()=>e.check(Fh())}),mg=P(`ZodString`,(e,t)=>{yp.init(e,t),pg.init(e,t),e.email=t=>e.check(Rm(hg,t)),e.url=t=>e.check(Wm(vg,t)),e.jwt=t=>e.check(ah(Pg,t)),e.emoji=t=>e.check(Gm(yg,t)),e.guid=t=>e.check(zm(gg,t)),e.uuid=t=>e.check(Bm(_g,t)),e.uuidv4=t=>e.check(Vm(_g,t)),e.uuidv6=t=>e.check(Hm(_g,t)),e.uuidv7=t=>e.check(Um(_g,t)),e.nanoid=t=>e.check(Km(bg,t)),e.guid=t=>e.check(zm(gg,t)),e.cuid=t=>e.check(qm(xg,t)),e.cuid2=t=>e.check(Jm(Sg,t)),e.ulid=t=>e.check(Ym(Cg,t)),e.base64=t=>e.check(nh(Ag,t)),e.base64url=t=>e.check(rh(Mg,t)),e.xid=t=>e.check(Xm(wg,t)),e.ksuid=t=>e.check(Zm(Tg,t)),e.ipv4=t=>e.check(Qm(Eg,t)),e.ipv6=t=>e.check($m(Dg,t)),e.cidrv4=t=>e.check(eh(Og,t)),e.cidrv6=t=>e.check(th(kg,t)),e.e164=t=>e.check(ih(Ng,t)),e.datetime=t=>e.check(Gh(t)),e.date=t=>e.check(qh(t)),e.time=t=>e.check(Yh(t)),e.duration=t=>e.check(Zh(t))});function B(e){return Lm(mg,e)}const V=P(`ZodStringFormat`,(e,t)=>{R.init(e,t),pg.init(e,t)}),hg=P(`ZodEmail`,(e,t)=>{Sp.init(e,t),V.init(e,t)}),gg=P(`ZodGUID`,(e,t)=>{bp.init(e,t),V.init(e,t)}),_g=P(`ZodUUID`,(e,t)=>{xp.init(e,t),V.init(e,t)}),vg=P(`ZodURL`,(e,t)=>{Cp.init(e,t),V.init(e,t)}),yg=P(`ZodEmoji`,(e,t)=>{wp.init(e,t),V.init(e,t)}),bg=P(`ZodNanoID`,(e,t)=>{Tp.init(e,t),V.init(e,t)}),xg=P(`ZodCUID`,(e,t)=>{Ep.init(e,t),V.init(e,t)}),Sg=P(`ZodCUID2`,(e,t)=>{Dp.init(e,t),V.init(e,t)}),Cg=P(`ZodULID`,(e,t)=>{Op.init(e,t),V.init(e,t)}),wg=P(`ZodXID`,(e,t)=>{kp.init(e,t),V.init(e,t)}),Tg=P(`ZodKSUID`,(e,t)=>{Ap.init(e,t),V.init(e,t)}),Eg=P(`ZodIPv4`,(e,t)=>{Fp.init(e,t),V.init(e,t)}),Dg=P(`ZodIPv6`,(e,t)=>{Ip.init(e,t),V.init(e,t)}),Og=P(`ZodCIDRv4`,(e,t)=>{Lp.init(e,t),V.init(e,t)}),kg=P(`ZodCIDRv6`,(e,t)=>{Rp.init(e,t),V.init(e,t)}),Ag=P(`ZodBase64`,(e,t)=>{Bp.init(e,t),V.init(e,t)});function jg(e){return nh(Ag,e)}const Mg=P(`ZodBase64URL`,(e,t)=>{Hp.init(e,t),V.init(e,t)}),Ng=P(`ZodE164`,(e,t)=>{Up.init(e,t),V.init(e,t)}),Pg=P(`ZodJWT`,(e,t)=>{Gp.init(e,t),V.init(e,t)}),Fg=P(`ZodNumber`,(e,t)=>{Kp.init(e,t),z.init(e,t),e.gt=(t,n)=>e.check(yh(t,n)),e.gte=(t,n)=>e.check(bh(t,n)),e.min=(t,n)=>e.check(bh(t,n)),e.lt=(t,n)=>e.check(_h(t,n)),e.lte=(t,n)=>e.check(vh(t,n)),e.max=(t,n)=>e.check(vh(t,n)),e.int=t=>e.check(Lg(t)),e.safe=t=>e.check(Lg(t)),e.positive=t=>e.check(yh(0,t)),e.nonnegative=t=>e.check(bh(0,t)),e.negative=t=>e.check(_h(0,t)),e.nonpositive=t=>e.check(vh(0,t)),e.multipleOf=(t,n)=>e.check(xh(t,n)),e.step=(t,n)=>e.check(xh(t,n)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??-1/0,n.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(n.maximum??1/0,n.exclusiveMaximum??1/0)??null,e.isInt=(n.format??``).includes(`int`)||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function H(e){return uh(Fg,e)}const Ig=P(`ZodNumberFormat`,(e,t)=>{qp.init(e,t),Fg.init(e,t)});function Lg(e){return dh(Ig,e)}const Rg=P(`ZodBoolean`,(e,t)=>{Jp.init(e,t),z.init(e,t)});function U(e){return fh(Rg,e)}const zg=P(`ZodNull`,(e,t)=>{Yp.init(e,t),z.init(e,t)});function Bg(e){return ph(zg,e)}const Vg=P(`ZodAny`,(e,t)=>{Xp.init(e,t),z.init(e,t)});function Hg(){return mh(Vg)}const Ug=P(`ZodUnknown`,(e,t)=>{Zp.init(e,t),z.init(e,t)});function W(){return hh(Ug)}const Wg=P(`ZodNever`,(e,t)=>{Qp.init(e,t),z.init(e,t)});function Gg(e){return gh(Wg,e)}const Kg=P(`ZodArray`,(e,t)=>{em.init(e,t),z.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(Ch(t,n)),e.nonempty=t=>e.check(Ch(1,t)),e.max=(t,n)=>e.check(Sh(t,n)),e.length=(t,n)=>e.check(wh(t,n)),e.unwrap=()=>e.element});function G(e,t){return Ih(Kg,e,t)}const qg=P(`ZodObject`,(e,t)=>{am.init(e,t),z.init(e,t),F(e,`shape`,()=>t.shape),e.keyof=()=>r_(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:W()}),e.loose=()=>e.clone({...e._zod.def,catchall:W()}),e.strict=()=>e.clone({...e._zod.def,catchall:Gg()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>Pd(e,t),e.safeExtend=t=>Fd(e,t),e.merge=t=>Id(e,t),e.pick=t=>Md(e,t),e.omit=t=>Nd(e,t),e.partial=(...t)=>Ld(s_,e,t[0]),e.required=(...t)=>Rd(h_,e,t[0])});function K(e,t){let n={type:`object`,get shape(){return yd(this,`shape`,e?vd(e):{}),this.shape},...I(t)};return new qg(n)}function q(e,t){return new qg({type:`object`,get shape(){return yd(this,`shape`,vd(e)),this.shape},catchall:Gg(),...I(t)})}function Jg(e,t){return new qg({type:`object`,get shape(){return yd(this,`shape`,vd(e)),this.shape},catchall:W(),...I(t)})}const Yg=P(`ZodUnion`,(e,t)=>{sm.init(e,t),z.init(e,t),e.options=t.options});function J(e,t){return new Yg({type:`union`,options:e,...I(t)})}const Xg=P(`ZodDiscriminatedUnion`,(e,t)=>{Yg.init(e,t),cm.init(e,t)});function Zg(e,t,n){return new Xg({type:`union`,options:t,discriminator:e,...I(n)})}const Qg=P(`ZodIntersection`,(e,t)=>{lm.init(e,t),z.init(e,t)});function $g(e,t){return new Qg({type:`intersection`,left:e,right:t})}const e_=P(`ZodRecord`,(e,t)=>{fm.init(e,t),z.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function t_(e,t,n){return new e_({type:`record`,keyType:e,valueType:t,...I(n)})}const n_=P(`ZodEnum`,(e,t)=>{pm.init(e,t),z.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{let i={};for(let r of e)if(n.has(r))i[r]=t.entries[r];else throw Error(`Key ${r} not found in enum`);return new n_({...t,checks:[],...I(r),entries:i})},e.exclude=(e,r)=>{let i={...t.entries};for(let t of e)if(n.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new n_({...t,checks:[],...I(r),entries:i})}});function r_(e,t){let n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new n_({type:`enum`,entries:n,...I(t)})}const i_=P(`ZodLiteral`,(e,t)=>{mm.init(e,t),z.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,`value`,{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Y(e,t){return new i_({type:`literal`,values:Array.isArray(e)?e:[e],...I(t)})}const a_=P(`ZodTransform`,(e,t)=>{hm.init(e,t),z.init(e,t),e._zod.parse=(n,r)=>{if(r.direction===`backward`)throw new cd(e.constructor.name);n.addIssue=r=>{if(typeof r==`string`)n.issues.push(Wd(r,n.value,t));else{let t=r;t.fatal&&(t.continue=!1),t.code??=`custom`,t.input??=n.value,t.inst??=e,n.issues.push(Wd(t))}};let i=t.transform(n.value,n);return i instanceof Promise?i.then(e=>(n.value=e,n)):(n.value=i,n)}});function o_(e){return new a_({type:`transform`,transform:e})}const s_=P(`ZodOptional`,(e,t)=>{_m.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function c_(e){return new s_({type:`optional`,innerType:e})}const l_=P(`ZodNullable`,(e,t)=>{vm.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function u_(e){return new l_({type:`nullable`,innerType:e})}const d_=P(`ZodDefault`,(e,t)=>{ym.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function f_(e,t){return new d_({type:`default`,innerType:e,get defaultValue(){return typeof t==`function`?t():Ed(t)}})}const p_=P(`ZodPrefault`,(e,t)=>{xm.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function m_(e,t){return new p_({type:`prefault`,innerType:e,get defaultValue(){return typeof t==`function`?t():Ed(t)}})}const h_=P(`ZodNonOptional`,(e,t)=>{Sm.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function g_(e,t){return new h_({type:`nonoptional`,innerType:e,...I(t)})}const __=P(`ZodCatch`,(e,t)=>{wm.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function v_(e,t){return new __({type:`catch`,innerType:e,catchValue:typeof t==`function`?t:()=>t})}const y_=P(`ZodPipe`,(e,t)=>{Tm.init(e,t),z.init(e,t),e.in=t.in,e.out=t.out});function b_(e,t){return new y_({type:`pipe`,in:e,out:t})}const x_=P(`ZodReadonly`,(e,t)=>{Dm.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function S_(e){return new x_({type:`readonly`,innerType:e})}const C_=P(`ZodLazy`,(e,t)=>{km.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.getter()});function w_(e){return new C_({type:`lazy`,getter:e})}const T_=P(`ZodCustom`,(e,t)=>{Am.init(e,t),z.init(e,t)});function E_(e,t){return Lh(T_,e??(()=>!0),t)}function D_(e,t={}){return Rh(T_,e,t)}function O_(e){return zh(e)}function k_(e,t={error:`Input not instance of ${e.name}`}){let n=new T_({type:`custom`,check:`custom`,fn:t=>t instanceof e,abort:!0,...I(t)});return n._zod.bag.Class=e,n}var X;(function(e){})(X||={});const A_=Symbol(`Let zodToJsonSchema decide on which parser to use`),j_={name:void 0,$refStrategy:`root`,basePath:[`#`],effectStrategy:`input`,pipeStrategy:`all`,dateStrategy:`format:date-time`,mapStrategy:`entries`,removeAdditionalStrategy:`passthrough`,allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:`definitions`,target:`jsonSchema7`,strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:`escape`,applyRegexFlags:!1,emailStrategy:`format:email`,base64Strategy:`contentEncoding:base64`,nameStrategy:`ref`,openAiAnyTypeName:`OpenAiAnyType`},M_=e=>typeof e==`string`?{...j_,name:e}:{...j_,...e},N_=e=>{let t=M_(e),n=t.name===void 0?t.basePath:[...t.basePath,t.definitionPath,t.name];return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function P_(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function Z(e,t,n,r,i){e[t]=n,P_(e,t,r,i)}const F_=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join(`/`)};function I_(e){if(e.target!==`openAi`)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy===`relative`?F_(t,e.currentPath):t.join(`/`)}}function L_(e,t){var n,r;let i={type:`array`};return(n=e.type)?._def&&((r=e.type)==null||(r=r._def)==null?void 0:r.typeName)!==X.ZodAny&&(i.items=Q(e.type._def,{...t,currentPath:[...t.currentPath,`items`]})),e.minLength&&Z(i,`minItems`,e.minLength.value,e.minLength.message,t),e.maxLength&&Z(i,`maxItems`,e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Z(i,`minItems`,e.exactLength.value,e.exactLength.message,t),Z(i,`maxItems`,e.exactLength.value,e.exactLength.message,t)),i}function R_(e,t){let n={type:`integer`,format:`int64`};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case`min`:t.target===`jsonSchema7`?r.inclusive?Z(n,`minimum`,r.value,r.message,t):Z(n,`exclusiveMinimum`,r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Z(n,`minimum`,r.value,r.message,t));break;case`max`:t.target===`jsonSchema7`?r.inclusive?Z(n,`maximum`,r.value,r.message,t):Z(n,`exclusiveMaximum`,r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Z(n,`maximum`,r.value,r.message,t));break;case`multipleOf`:Z(n,`multipleOf`,r.value,r.message,t);break}return n}function z_(){return{type:`boolean`}}function B_(e,t){return Q(e.type._def,t)}const V_=(e,t)=>Q(e.innerType._def,t);function H_(e,t,n){let r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,r)=>H_(e,t,n))};switch(r){case`string`:case`format:date-time`:return{type:`string`,format:`date-time`};case`format:date`:return{type:`string`,format:`date`};case`integer`:return U_(e,t)}}const U_=(e,t)=>{let n={type:`integer`,format:`unix-time`};if(t.target===`openApi3`)return n;for(let r of e.checks)switch(r.kind){case`min`:Z(n,`minimum`,r.value,r.message,t);break;case`max`:Z(n,`maximum`,r.value,r.message,t);break}return n};function W_(e,t){return{...Q(e.innerType._def,t),default:e.defaultValue()}}function G_(e,t){return t.effectStrategy===`input`?Q(e.schema._def,t):I_(t)}function K_(e){return{type:`string`,enum:Array.from(e.values)}}const q_=e=>`type`in e&&e.type===`string`?!1:`allOf`in e;function J_(e,t){let n=[Q(e.left._def,{...t,currentPath:[...t.currentPath,`allOf`,`0`]}),Q(e.right._def,{...t,currentPath:[...t.currentPath,`allOf`,`1`]})].filter(e=>!!e),r=t.target===`jsonSchema2019-09`?{unevaluatedProperties:!1}:void 0,i=[];return n.forEach(e=>{if(q_(e))i.push(...e.allOf),e.unevaluatedProperties===void 0&&(r=void 0);else{let t=e;if(`additionalProperties`in e&&e.additionalProperties===!1){let{additionalProperties:n,...r}=e;t=r}else r=void 0;i.push(t)}}),i.length?{allOf:i,...r}:void 0}function Y_(e,t){let n=typeof e.value;return n!==`bigint`&&n!==`number`&&n!==`boolean`&&n!==`string`?{type:Array.isArray(e.value)?`array`:`object`}:t.target===`openApi3`?{type:n===`bigint`?`integer`:n,enum:[e.value]}:{type:n===`bigint`?`integer`:n,const:e.value}}let X_;const Z_={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(X_===void 0&&(X_=RegExp(`^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`,`u`)),X_),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Q_(e,t){let n={type:`string`};if(e.checks)for(let r of e.checks)switch(r.kind){case`min`:Z(n,`minLength`,typeof n.minLength==`number`?Math.max(n.minLength,r.value):r.value,r.message,t);break;case`max`:Z(n,`maxLength`,typeof n.maxLength==`number`?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case`email`:switch(t.emailStrategy){case`format:email`:nv(n,`email`,r.message,t);break;case`format:idn-email`:nv(n,`idn-email`,r.message,t);break;case`pattern:zod`:rv(n,Z_.email,r.message,t);break}break;case`url`:nv(n,`uri`,r.message,t);break;case`uuid`:nv(n,`uuid`,r.message,t);break;case`regex`:rv(n,r.regex,r.message,t);break;case`cuid`:rv(n,Z_.cuid,r.message,t);break;case`cuid2`:rv(n,Z_.cuid2,r.message,t);break;case`startsWith`:rv(n,RegExp(`^${$_(r.value,t)}`),r.message,t);break;case`endsWith`:rv(n,RegExp(`${$_(r.value,t)}$`),r.message,t);break;case`datetime`:nv(n,`date-time`,r.message,t);break;case`date`:nv(n,`date`,r.message,t);break;case`time`:nv(n,`time`,r.message,t);break;case`duration`:nv(n,`duration`,r.message,t);break;case`length`:Z(n,`minLength`,typeof n.minLength==`number`?Math.max(n.minLength,r.value):r.value,r.message,t),Z(n,`maxLength`,typeof n.maxLength==`number`?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case`includes`:rv(n,RegExp($_(r.value,t)),r.message,t);break;case`ip`:r.version!==`v6`&&nv(n,`ipv4`,r.message,t),r.version!==`v4`&&nv(n,`ipv6`,r.message,t);break;case`base64url`:rv(n,Z_.base64url,r.message,t);break;case`jwt`:rv(n,Z_.jwt,r.message,t);break;case`cidr`:r.version!==`v6`&&rv(n,Z_.ipv4Cidr,r.message,t),r.version!==`v4`&&rv(n,Z_.ipv6Cidr,r.message,t);break;case`emoji`:rv(n,Z_.emoji(),r.message,t);break;case`ulid`:rv(n,Z_.ulid,r.message,t);break;case`base64`:switch(t.base64Strategy){case`format:binary`:nv(n,`binary`,r.message,t);break;case`contentEncoding:base64`:Z(n,`contentEncoding`,`base64`,r.message,t);break;case`pattern:zod`:rv(n,Z_.base64,r.message,t);break}break;case`nanoid`:rv(n,Z_.nanoid,r.message,t);case`toLowerCase`:case`toUpperCase`:case`trim`:break;default:(e=>{})(r)}return n}function $_(e,t){return t.patternStrategy===`escape`?tv(e):e}const ev=new Set(`ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789`);function tv(e){let t=``;for(let n=0;n<e.length;n++)ev.has(e[n])||(t+=`\\`),t+=e[n];return t}function nv(e,t,n,r){var i;e.format||(i=e.anyOf)?.some(e=>e.format)?(e.anyOf||=[],e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Z(e,`format`,t,n,r)}function rv(e,t,n,r){var i;e.pattern||(i=e.allOf)?.some(e=>e.pattern)?(e.allOf||=[],e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:iv(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Z(e,`pattern`,iv(t,r),n,r)}function iv(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes(`i`),m:e.flags.includes(`m`),s:e.flags.includes(`s`)},r=n.i?e.source.toLowerCase():e.source,i=``,a=!1,o=!1,s=!1;for(let e=0;e<r.length;e++){if(a){i+=r[e],a=!1;continue}if(n.i){if(o){if(r[e].match(/[a-z]/)){var c;s?(i+=r[e],i+=`${r[e-2]}-${r[e]}`.toUpperCase(),s=!1):r[e+1]===`-`&&(c=r[e+2])?.match(/[a-z]/)?(i+=r[e],s=!0):i+=`${r[e]}${r[e].toUpperCase()}`;continue}}else if(r[e].match(/[a-z]/)){i+=`[${r[e]}${r[e].toUpperCase()}]`;continue}}if(n.m){if(r[e]===`^`){i+=`(^|(?<=[\r
]))`;continue}else if(r[e]===`$`){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[e]===`.`){i+=o?`${r[e]}\r\n`:`[${r[e]}\r\n]`;continue}i+=r[e],r[e]===`\\`?a=!0:o&&r[e]===`]`?o=!1:!o&&r[e]===`[`&&(o=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join(`/`)} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function av(e,t){var n,r,i,a,o,s;if(t.target===`openAi`&&console.warn(`Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.`),t.target===`openApi3`&&(n=e.keyType)?._def.typeName===X.ZodEnum)return{type:`object`,required:e.keyType._def.values,properties:e.keyType._def.values.reduce((n,r)=>({...n,[r]:Q(e.valueType._def,{...t,currentPath:[...t.currentPath,`properties`,r]})??I_(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let c={type:`object`,additionalProperties:Q(e.valueType._def,{...t,currentPath:[...t.currentPath,`additionalProperties`]})??t.allowedAdditionalProperties};if(t.target===`openApi3`)return c;if((r=e.keyType)?._def.typeName===X.ZodString&&(i=e.keyType._def.checks)?.length){let{type:n,...r}=Q_(e.keyType._def,t);return{...c,propertyNames:r}}else if((a=e.keyType)?._def.typeName===X.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};else if((o=e.keyType)?._def.typeName===X.ZodBranded&&e.keyType._def.type._def.typeName===X.ZodString&&(s=e.keyType._def.type._def.checks)?.length){let{type:n,...r}=B_(e.keyType._def,t);return{...c,propertyNames:r}}return c}function ov(e,t){if(t.mapStrategy===`record`)return av(e,t);let n=Q(e.keyType._def,{...t,currentPath:[...t.currentPath,`items`,`items`,`0`]})||I_(t),r=Q(e.valueType._def,{...t,currentPath:[...t.currentPath,`items`,`items`,`1`]})||I_(t);return{type:`array`,maxItems:125,items:{type:`array`,items:[n,r],minItems:2,maxItems:2}}}function sv(e){let t=e.values,n=Object.keys(e.values).filter(e=>typeof t[t[e]]!=`number`),r=n.map(e=>t[e]),i=Array.from(new Set(r.map(e=>typeof e)));return{type:i.length===1?i[0]===`string`?`string`:`number`:[`string`,`number`],enum:r}}function cv(e){return e.target===`openAi`?void 0:{not:I_({...e,currentPath:[...e.currentPath,`not`]})}}function lv(e){return e.target===`openApi3`?{enum:[`null`],nullable:!0}:{type:`null`}}const uv={ZodString:`string`,ZodNumber:`number`,ZodBigInt:`integer`,ZodBoolean:`boolean`,ZodNull:`null`};function dv(e,t){if(t.target===`openApi3`)return fv(e,t);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in uv&&(!e._def.checks||!e._def.checks.length))){let e=n.reduce((e,t)=>{let n=uv[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}else if(n.every(e=>e._def.typeName===`ZodLiteral`&&!e.description)){let e=n.reduce((e,t)=>{let n=typeof t._def.value;switch(n){case`string`:case`number`:case`boolean`:return[...e,n];case`bigint`:return[...e,`integer`];case`object`:if(t._def.value===null)return[...e,`null`];case`symbol`:case`undefined`:case`function`:default:return e}},[]);if(e.length===n.length){let t=e.filter((e,t,n)=>n.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>e._def.typeName===`ZodEnum`))return{type:`string`,enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return fv(e,t)}const fv=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,n)=>Q(e._def,{...t,currentPath:[...t.currentPath,`anyOf`,`${n}`]})).filter(e=>!!e&&(!t.strictUnions||typeof e==`object`&&Object.keys(e).length>0));return n.length?{anyOf:n}:void 0};function pv(e,t){if([`ZodString`,`ZodNumber`,`ZodBigInt`,`ZodBoolean`,`ZodNull`].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target===`openApi3`?{type:uv[e.innerType._def.typeName],nullable:!0}:{type:[uv[e.innerType._def.typeName],`null`]};if(t.target===`openApi3`){let n=Q(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&`$ref`in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let n=Q(e.innerType._def,{...t,currentPath:[...t.currentPath,`anyOf`,`0`]});return n&&{anyOf:[n,{type:`null`}]}}function mv(e,t){let n={type:`number`};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case`int`:n.type=`integer`,P_(n,`type`,r.message,t);break;case`min`:t.target===`jsonSchema7`?r.inclusive?Z(n,`minimum`,r.value,r.message,t):Z(n,`exclusiveMinimum`,r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Z(n,`minimum`,r.value,r.message,t));break;case`max`:t.target===`jsonSchema7`?r.inclusive?Z(n,`maximum`,r.value,r.message,t):Z(n,`exclusiveMaximum`,r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Z(n,`maximum`,r.value,r.message,t));break;case`multipleOf`:Z(n,`multipleOf`,r.value,r.message,t);break}return n}function hv(e,t){let n=t.target===`openAi`,r={type:`object`,properties:{}},i=[],a=e.shape();for(let e in a){let o=a[e];if(o===void 0||o._def===void 0)continue;let s=_v(o);s&&n&&(o._def.typeName===`ZodOptional`&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),s=!1);let c=Q(o._def,{...t,currentPath:[...t.currentPath,`properties`,e],propertyPath:[...t.currentPath,`properties`,e]});if(c===void 0)continue;r.properties[e]=c,s||i.push(e)}i.length&&(r.required=i);let o=gv(e,t);return o!==void 0&&(r.additionalProperties=o),r}function gv(e,t){if(e.catchall._def.typeName!==`ZodNever`)return Q(e.catchall._def,{...t,currentPath:[...t.currentPath,`additionalProperties`]});switch(e.unknownKeys){case`passthrough`:return t.allowedAdditionalProperties;case`strict`:return t.rejectedAdditionalProperties;case`strip`:return t.removeAdditionalStrategy===`strict`?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function _v(e){try{return e.isOptional()}catch{return!0}}const vv=(e,t)=>{var n;if(t.currentPath.toString()===(n=t.propertyPath)?.toString())return Q(e.innerType._def,t);let r=Q(e.innerType._def,{...t,currentPath:[...t.currentPath,`anyOf`,`1`]});return r?{anyOf:[{not:I_(t)},r]}:I_(t)},yv=(e,t)=>{if(t.pipeStrategy===`input`)return Q(e.in._def,t);if(t.pipeStrategy===`output`)return Q(e.out._def,t);let n=Q(e.in._def,{...t,currentPath:[...t.currentPath,`allOf`,`0`]}),r=Q(e.out._def,{...t,currentPath:[...t.currentPath,`allOf`,n?`1`:`0`]});return{allOf:[n,r].filter(e=>e!==void 0)}};function bv(e,t){return Q(e.type._def,t)}function xv(e,t){let n=Q(e.valueType._def,{...t,currentPath:[...t.currentPath,`items`]}),r={type:`array`,uniqueItems:!0,items:n};return e.minSize&&Z(r,`minItems`,e.minSize.value,e.minSize.message,t),e.maxSize&&Z(r,`maxItems`,e.maxSize.value,e.maxSize.message,t),r}function Sv(e,t){return e.rest?{type:`array`,minItems:e.items.length,items:e.items.map((e,n)=>Q(e._def,{...t,currentPath:[...t.currentPath,`items`,`${n}`]})).reduce((e,t)=>t===void 0?e:[...e,t],[]),additionalItems:Q(e.rest._def,{...t,currentPath:[...t.currentPath,`additionalItems`]})}:{type:`array`,minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,n)=>Q(e._def,{...t,currentPath:[...t.currentPath,`items`,`${n}`]})).reduce((e,t)=>t===void 0?e:[...e,t],[])}}function Cv(e){return{not:I_(e)}}function wv(e){return I_(e)}const Tv=(e,t)=>Q(e.innerType._def,t),Ev=(e,t,n)=>{switch(t){case X.ZodString:return Q_(e,n);case X.ZodNumber:return mv(e,n);case X.ZodObject:return hv(e,n);case X.ZodBigInt:return R_(e,n);case X.ZodBoolean:return z_();case X.ZodDate:return H_(e,n);case X.ZodUndefined:return Cv(n);case X.ZodNull:return lv(n);case X.ZodArray:return L_(e,n);case X.ZodUnion:case X.ZodDiscriminatedUnion:return dv(e,n);case X.ZodIntersection:return J_(e,n);case X.ZodTuple:return Sv(e,n);case X.ZodRecord:return av(e,n);case X.ZodLiteral:return Y_(e,n);case X.ZodEnum:return K_(e);case X.ZodNativeEnum:return sv(e);case X.ZodNullable:return pv(e,n);case X.ZodOptional:return vv(e,n);case X.ZodMap:return ov(e,n);case X.ZodSet:return xv(e,n);case X.ZodLazy:return()=>e.getter()._def;case X.ZodPromise:return bv(e,n);case X.ZodNaN:case X.ZodNever:return cv(n);case X.ZodEffects:return G_(e,n);case X.ZodAny:return I_(n);case X.ZodUnknown:return wv(n);case X.ZodDefault:return W_(e,n);case X.ZodBranded:return B_(e,n);case X.ZodReadonly:return Tv(e,n);case X.ZodCatch:return V_(e,n);case X.ZodPipeline:return yv(e,n);case X.ZodFunction:case X.ZodVoid:case X.ZodSymbol:return;default:return(e=>void 0)(t)}};function Q(e,t,n=!1){let r=t.seen.get(e);if(t.override){var i;let a=(i=t.override)?.call(t,e,t,r,n);if(a!==A_)return a}if(r&&!n){let e=Dv(r,t);if(e!==void 0)return e}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let o=Ev(e,e.typeName,t),s=typeof o==`function`?Q(o(),t):o;if(s&&Ov(e,t,s),t.postProcess){let n=t.postProcess(s,e,t);return a.jsonSchema=s,n}return a.jsonSchema=s,s}const Dv=(e,t)=>{switch(t.$refStrategy){case`root`:return{$ref:e.path.join(`/`)};case`relative`:return{$ref:F_(t.currentPath,e.path)};case`none`:case`seen`:return e.path.length<t.currentPath.length&&e.path.every((e,n)=>t.currentPath[n]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join(`/`)}! Defaulting to any`),I_(t)):t.$refStrategy===`seen`?I_(t):void 0}},Ov=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),kv=(e,t)=>{let n=N_(t),r=typeof t==`object`&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>({...e,[t]:Q(r._def,{...n,currentPath:[...n.basePath,n.definitionPath,t]},!0)??I_(n)}),{}):void 0,i=typeof t==`string`?t:t?.nameStrategy===`title`?void 0:t?.name,a=Q(e._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??I_(n),o=typeof t==`object`&&t.name!==void 0&&t.nameStrategy===`title`?t.name:void 0;o!==void 0&&(a.title=o),n.flags.hasReferencedOpenAiAnyType&&(r||={},r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:[`string`,`number`,`integer`,`boolean`,`array`,`null`],items:{$ref:n.$refStrategy===`relative`?`1`:[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join(`/`)}}));let s=i===void 0?r?{...a,[n.definitionPath]:r}:a:{$ref:[...n.$refStrategy===`relative`?[]:n.basePath,n.definitionPath,i].join(`/`),[n.definitionPath]:{...r,[i]:a}};return n.target===`jsonSchema7`?s.$schema=`http://json-schema.org/draft-07/schema#`:(n.target===`jsonSchema2019-09`||n.target===`openAi`)&&(s.$schema=`https://json-schema.org/draft/2019-09/schema#`),n.target===`openAi`&&(`anyOf`in s||`oneOf`in s||`allOf`in s||`type`in s&&Array.isArray(s.type))&&console.warn(`Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.`),s};var Av=kv;function jv(...e){return e.reduce((e,t)=>({...e,...t??{}}),{})}async function Mv(e,t){if(e==null)return Promise.resolve();let n=t?.abortSignal;return new Promise((t,r)=>{if(n?.aborted){r(Nv());return}let i=setTimeout(()=>{a(),t()},e),a=()=>{clearTimeout(i),n?.removeEventListener(`abort`,o)},o=()=>{a(),r(Nv())};n?.addEventListener(`abort`,o)})}function Nv(){return new DOMException(`Delay was aborted`,`AbortError`)}function Pv(e){return Object.fromEntries([...e.headers])}var Fv=({prefix:e,size:t=16,alphabet:n=`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`,separator:r=`-`}={})=>{let i=()=>{let e=n.length,r=Array(t);for(let i=0;i<t;i++)r[i]=n[Math.random()*e|0];return r.join(``)};if(e==null)return i;if(n.includes(r))throw new iu({argument:`separator`,message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${i()}`},Iv=Fv();function Lv(e){return e==null?`unknown error`:typeof e==`string`?e:e instanceof Error?e.message:JSON.stringify(e)}function Rv(e){return(e instanceof Error||e instanceof DOMException)&&(e.name===`AbortError`||e.name===`ResponseAborted`||e.name===`TimeoutError`)}var zv=[`fetch failed`,`failed to fetch`];function Bv({error:e,url:t,requestBodyValues:n}){if(Rv(e))return e;if(e instanceof TypeError&&zv.includes(e.message.toLowerCase())){let r=e.cause;if(r!=null)return new ql({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function Vv(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>t!=null))}var Hv=()=>globalThis.fetch,Uv=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:i,fetch:a=Hv()})=>{try{let o=await a(e,{method:`GET`,headers:Vv(t),signal:i}),s=Pv(o);if(!o.ok){let t;try{t=await r({response:o,url:e,requestBodyValues:{}})}catch(t){throw Rv(t)||ql.isInstance(t)?t:new ql({message:`Failed to process error response`,cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}throw t.value}try{return await n({response:o,url:e,requestBodyValues:{}})}catch(t){throw t instanceof Error&&(Rv(t)||ql.isInstance(t))?t:new ql({message:`Failed to process successful response`,cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}}catch(t){throw Bv({error:t,url:e,requestBodyValues:{}})}};function Wv({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([e,t])=>{let n=e.toLowerCase();return n===`*`||n===`*/*`?{mediaTypePrefix:``,regexes:t}:{mediaTypePrefix:n.replace(/\*/,``),regexes:t}}).filter(({mediaTypePrefix:t})=>e.startsWith(t)).flatMap(({regexes:e})=>e).some(e=>e.test(t))}function Gv({apiKey:e,environmentVariableName:t,apiKeyParameterName:n=`apiKey`,description:r}){if(typeof e==`string`)return e;if(e!=null)throw new wu({message:`${r} API key must be a string.`});if(typeof process>`u`)throw new wu({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e={}[t],e==null)throw new wu({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!=`string`)throw new wu({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function Kv({settingValue:e,environmentVariableName:t}){if(typeof e==`string`||!(e!=null||typeof process>`u`)&&(e={}[t],!(e==null||typeof e!=`string`)))return e}var qv=/"__proto__"\s*:/,Jv=/"constructor"\s*:/;function Yv(e){let t=JSON.parse(e);return typeof t!=`object`||!t||qv.test(e)===!1&&Jv.test(e)===!1?t:Xv(t)}function Xv(e){let t=[e];for(;t.length;){let e=t;t=[];for(let n of e){if(Object.prototype.hasOwnProperty.call(n,`__proto__`)||Object.prototype.hasOwnProperty.call(n,`constructor`)&&Object.prototype.hasOwnProperty.call(n.constructor,`prototype`))throw SyntaxError(`Object contains forbidden prototype property`);for(let e in n){let r=n[e];r&&typeof r==`object`&&t.push(r)}}}return e}function Zv(e){let{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return Yv(e)}finally{Error.stackTraceLimit=t}}var Qv=Symbol.for(`vercel.ai.validator`);function $v(e){return{[Qv]:!0,validate:e}}function ey(e){return typeof e==`object`&&!!e&&Qv in e&&e[Qv]===!0&&`validate`in e}function ty(e){return ey(e)?e:ny(e)}function ny(e){return $v(async t=>{let n=await e[`~standard`].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new Ju({value:t,cause:n.issues})}})}async function ry({value:e,schema:t}){let n=await iy({value:e,schema:t});if(!n.success)throw Ju.wrap({value:e,cause:n.error});return n.value}async function iy({value:e,schema:t}){let n=ty(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};let t=await n.validate(e);return t.success?{success:!0,value:t.value,rawValue:e}:{success:!1,error:Ju.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:Ju.wrap({value:e,cause:t}),rawValue:e}}}async function ay({text:e,schema:t}){try{let n=Zv(e);return t==null?n:ry({value:n,schema:t})}catch(t){throw yu.isInstance(t)||Ju.isInstance(t)?t:new yu({text:e,cause:t})}}async function oy({text:e,schema:t}){try{let n=Zv(e);return t==null?{success:!0,value:n,rawValue:n}:await iy({value:n,schema:t})}catch(t){return{success:!1,error:yu.isInstance(t)?t:new yu({text:e,cause:t}),rawValue:void 0}}}function sy(e){try{return Zv(e),!0}catch{return!1}}function cy({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new id).pipeThrough(new TransformStream({async transform({data:e},n){e!==`[DONE]`&&n.enqueue(await oy({text:e,schema:t}))}}))}async function ly({provider:e,providerOptions:t,schema:n}){if(t?.[e]==null)return;let r=await iy({value:t[e],schema:n});if(!r.success)throw new iu({argument:`providerOptions`,message:`invalid ${e} provider options`,cause:r.error});return r.value}var uy=()=>globalThis.fetch,dy=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:a,fetch:o})=>fy({url:e,headers:{"Content-Type":`application/json`,...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:a,fetch:o}),fy=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:a,fetch:o=uy()})=>{try{let s=await o(e,{method:`POST`,headers:Vv(t),body:n.content,signal:a}),c=Pv(s);if(!s.ok){let t;try{t=await i({response:s,url:e,requestBodyValues:n.values})}catch(t){throw Rv(t)||ql.isInstance(t)?t:new ql({message:`Failed to process error response`,cause:t,statusCode:s.status,url:e,responseHeaders:c,requestBodyValues:n.values})}throw t.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(t){throw t instanceof Error&&(Rv(t)||ql.isInstance(t))?t:new ql({message:`Failed to process successful response`,cause:t,statusCode:s.status,url:e,responseHeaders:c,requestBodyValues:n.values})}}catch(t){throw Bv({error:t,url:e,requestBodyValues:n.values})}};function py(e){return e}async function my(e){return typeof e==`function`&&(e=e()),Promise.resolve(e)}var hy=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:a})=>{let o=await r.text(),s=Pv(r);if(o.trim()===``)return{responseHeaders:s,value:new ql({message:r.statusText,url:i,requestBodyValues:a,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n?.(r)})};try{let c=await ay({text:o,schema:e});return{responseHeaders:s,value:new ql({message:t(c),url:i,requestBodyValues:a,statusCode:r.status,responseHeaders:s,responseBody:o,data:c,isRetryable:n?.(r,c)})}}catch{return{responseHeaders:s,value:new ql({message:r.statusText,url:i,requestBodyValues:a,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n?.(r)})}}},gy=e=>async({response:t})=>{let n=Pv(t);if(t.body==null)throw new Ql({});return{responseHeaders:n,value:cy({stream:t.body,schema:e})}},_y=e=>async({response:t,url:n,requestBodyValues:r})=>{let i=await t.text(),a=await oy({text:i,schema:e}),o=Pv(t);if(!a.success)throw new ql({message:`Invalid JSON response`,cause:a.error,statusCode:t.status,responseHeaders:o,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:o,value:a.value,rawValue:a.rawValue}},vy=()=>async({response:e,url:t,requestBodyValues:n})=>{let r=Pv(e);if(!e.body)throw new ql({message:`Response body is empty`,url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{let t=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(t)}}catch(i){throw new ql({message:`Failed to read response as array buffer`,url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:i})}},yy=()=>async({response:e,url:t,requestBodyValues:n})=>{let r=Pv(e),i=await e.text();return{responseHeaders:r,value:new ql({message:e.statusText,url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:i})}};function by(e,t){var n;let r=(n=t?.useReferences)??!1;return Ty(Av(e,{$refStrategy:r?`root`:`none`,target:`jsonSchema7`}),{validate:async t=>{let n=await e.safeParseAsync(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}function xy(e,t){var n;let r=(n=t?.useReferences)??!1,i=Hh(e,{target:`draft-7`,io:`output`,reused:r?`ref`:`inline`});return Ty(i,{validate:async t=>{let n=await ig(e,t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}function Sy(e){return`_zod`in e}function Cy(e,t){return Sy(e)?xy(e,t):by(e,t)}var wy=Symbol.for(`vercel.ai.schema`);function Ty(e,{validate:t}={}){return{[wy]:!0,_type:void 0,[Qv]:!0,jsonSchema:e,validate:t}}function Ey(e){return typeof e==`object`&&!!e&&wy in e&&e[wy]===!0&&`jsonSchema`in e&&`validate`in e}function Dy(e){return e==null?Ty({properties:{},additionalProperties:!1}):Ey(e)?e:Cy(e)}var{btoa:Oy,atob:ky}=globalThis;function Ay(e){let t=e.replace(/-/g,`+`).replace(/_/g,`/`),n=ky(t);return Uint8Array.from(n,e=>e.codePointAt(0))}function jy(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Oy(t)}function My(e){return e instanceof Uint8Array?jy(e):e}function Ny(e){return e?.replace(/\/$/,``)}function Py(e){return e!=null&&typeof e[Symbol.asyncIterator]==`function`}async function*Fy({execute:e,input:t,options:n}){let r=e(t,n);if(Py(r)){let e;for await(let t of r)e=t,yield{type:`preliminary`,output:t};yield{type:`final`,output:e}}else yield{type:`final`,output:await r}}var Iy=`vercel.ai.gateway.error`,Ly=Symbol.for(Iy),Ry,zy,By=class e extends (zy=Error,Ry=Ly,zy){constructor({message:e,statusCode:t=500,cause:n}){super(e),this[Ry]=!0,this.statusCode=t,this.cause=n}static isInstance(t){return e.hasMarker(t)}static hasMarker(e){return typeof e==`object`&&!!e&&Ly in e&&e[Ly]===!0}},Vy=`GatewayAuthenticationError`,Hy=`vercel.ai.gateway.error.${Vy}`,Uy=Symbol.for(Hy),Wy,Gy,Ky=class e extends (Gy=By,Wy=Uy,Gy){constructor({message:e=`Authentication failed`,statusCode:t=401,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[Wy]=!0,this.name=Vy,this.type=`authentication_error`}static isInstance(e){return By.hasMarker(e)&&Uy in e}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r=`Authentication failed`,statusCode:i=401,cause:a}){let o;return o=t?`AI Gateway authentication failed: Invalid API key provided.

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?`AI Gateway authentication failed: Invalid OIDC token provided.

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed

Alternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:`AI Gateway authentication failed: No authentication provided.

Provide either an API key or OIDC token.

API key instructions:

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

OIDC token instructions:

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed`,new e({message:o,statusCode:i,cause:a})}},qy=`GatewayInvalidRequestError`,Jy=`vercel.ai.gateway.error.${qy}`,Yy=Symbol.for(Jy),Xy,Zy,Qy=class extends (Zy=By,Xy=Yy,Zy){constructor({message:e=`Invalid request`,statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[Xy]=!0,this.name=qy,this.type=`invalid_request_error`}static isInstance(e){return By.hasMarker(e)&&Yy in e}},$y=`GatewayRateLimitError`,eb=`vercel.ai.gateway.error.${$y}`,tb=Symbol.for(eb),nb,rb,ib=class extends (rb=By,nb=tb,rb){constructor({message:e=`Rate limit exceeded`,statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[nb]=!0,this.name=$y,this.type=`rate_limit_exceeded`}static isInstance(e){return By.hasMarker(e)&&tb in e}},ab=`GatewayModelNotFoundError`,ob=`vercel.ai.gateway.error.${ab}`,sb=Symbol.for(ob),cb=K({modelId:B()}),lb,ub,db=class extends (ub=By,lb=sb,ub){constructor({message:e=`Model not found`,statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[lb]=!0,this.name=ab,this.type=`model_not_found`,this.modelId=n}static isInstance(e){return By.hasMarker(e)&&sb in e}},fb=`GatewayInternalServerError`,pb=`vercel.ai.gateway.error.${fb}`,mb=Symbol.for(pb),hb,gb,_b=class extends (gb=By,hb=mb,gb){constructor({message:e=`Internal server error`,statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[hb]=!0,this.name=fb,this.type=`internal_server_error`}static isInstance(e){return By.hasMarker(e)&&mb in e}},vb=`GatewayResponseError`,yb=`vercel.ai.gateway.error.${vb}`,bb=Symbol.for(yb),xb,Sb,Cb=class extends (Sb=By,xb=bb,Sb){constructor({message:e=`Invalid response from Gateway`,statusCode:t=502,response:n,validationError:r,cause:i}={}){super({message:e,statusCode:t,cause:i}),this[xb]=!0,this.name=vb,this.type=`response_error`,this.response=n,this.validationError=r}static isInstance(e){return By.hasMarker(e)&&bb in e}};function wb({response:e,statusCode:t,defaultMessage:n=`Gateway request failed`,cause:r,authMethod:i}){let a=Tb.safeParse(e);if(!a.success)return new Cb({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:a.error,cause:r});let o=a.data,s=o.error.type,c=o.error.message;switch(s){case`authentication_error`:return Ky.createContextualError({apiKeyProvided:i===`api-key`,oidcTokenProvided:i===`oidc`,statusCode:t,cause:r});case`invalid_request_error`:return new Qy({message:c,statusCode:t,cause:r});case`rate_limit_exceeded`:return new ib({message:c,statusCode:t,cause:r});case`model_not_found`:{let e=cb.safeParse(o.error.param);return new db({message:c,statusCode:t,modelId:e.success?e.data.modelId:void 0,cause:r})}case`internal_server_error`:return new _b({message:c,statusCode:t,cause:r});default:return new _b({message:c,statusCode:t,cause:r})}}var Tb=K({error:K({message:B(),type:B().nullish(),param:W().nullish(),code:J([B(),H()]).nullish()})});function Eb(e,t){var n;return By.isInstance(e)?e:ql.isInstance(e)?wb({response:Db(e),statusCode:(n=e.statusCode)??500,defaultMessage:`Gateway request failed`,cause:e,authMethod:t}):wb({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:`Unknown Gateway error`,cause:e,authMethod:t})}function Db(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var Ob=`ai-gateway-auth-method`;function kb(e){let t=Ab.safeParse(e[Ob]);return t.success?t.data:void 0}var Ab=J([Y(`api-key`),Y(`oidc`)]),jb=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await Uv({url:`${this.config.baseURL}/config`,headers:await my(this.config.headers()),successfulResponseHandler:_y(Fb),failedResponseHandler:hy({errorSchema:Hg(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw Eb(e)}}},Mb=K({specificationVersion:Y(`v2`),provider:B(),modelId:B()}),Nb=K({input:B(),output:B()}),Pb=K({id:B(),name:B(),description:B().nullish(),pricing:Nb.nullish(),specification:Mb,modelType:r_([`language`,`embedding`,`image`]).nullish()}),Fb=K({models:G(Pb)}),Ib=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion=`v2`,this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await my(this.config.headers());try{let{responseHeaders:a,value:o,rawValue:s}=await dy({url:this.getUrl(),headers:jv(i,e.headers,this.getModelConfigHeaders(this.modelId,!1),await my(this.config.o11yHeaders)),body:t,successfulResponseHandler:_y(Hg()),failedResponseHandler:hy({errorSchema:Hg(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...o,request:{body:t},response:{headers:a,body:s},warnings:n}}catch(e){throw Eb(e,kb(i))}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await my(this.config.headers());try{let{value:a,responseHeaders:o}=await dy({url:this.getUrl(),headers:jv(i,e.headers,this.getModelConfigHeaders(this.modelId,!0),await my(this.config.o11yHeaders)),body:t,successfulResponseHandler:gy(Hg()),failedResponseHandler:hy({errorSchema:Hg(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:a.pipeThrough(new TransformStream({start(e){n.length>0&&e.enqueue({type:`stream-start`,warnings:n})},transform(t,n){if(t.success){let r=t.value;if(r.type===`raw`&&!e.includeRawChunks)return;r.type===`response-metadata`&&r.timestamp&&typeof r.timestamp==`string`&&(r.timestamp=new Date(r.timestamp)),n.enqueue(r)}else n.error(t.error)}})),request:{body:t},response:{headers:o}}}catch(e){throw Eb(e,kb(i))}}isFilePart(e){return e&&typeof e==`object`&&`type`in e&&e.type===`file`}maybeEncodeFileParts(e){for(let t of e.prompt)for(let e of t.content)if(this.isFilePart(e)){let t=e;if(t.data instanceof Uint8Array){let e=Uint8Array.from(t.data),n=Buffer.from(e).toString(`base64`);t.data=new URL(`data:${t.mediaType||`application/octet-stream`};base64,${n}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":`2`,"ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},Lb=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion=`v2`,this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var i;let a=await my(this.config.headers());try{let{responseHeaders:o,value:s,rawValue:c}=await dy({url:this.getUrl(),headers:jv(a,t??{},this.getModelConfigHeaders(),await my(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...r??{}},successfulResponseHandler:_y(Rb),failedResponseHandler:hy({errorSchema:Hg(),errorToMessage:e=>e}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:s.embeddings,usage:(i=s.usage)??void 0,providerMetadata:s.providerMetadata,response:{headers:o,body:c}}}catch(e){throw Eb(e,kb(a))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":`2`,"ai-model-id":this.modelId}}},Rb=K({embeddings:G(G(H())),usage:K({tokens:H()}).nullish(),providerMetadata:t_(B(),t_(B(),W())).optional()});async function zb(){var e,t;let n=(t=(e=Hb().headers)?.[`x-vercel-oidc-token`])??{}.VERCEL_OIDC_TOKEN;if(!n)throw new Ky({message:`OIDC token not available`,statusCode:401});return n}async function Bb(){var e;return(e=Hb().headers)?.[`x-vercel-id`]}var Vb=Symbol.for(`@vercel/request-context`);function Hb(){var e,t,n;let r=globalThis;return(n=(t=(e=r[Vb])?.get)?.call(e))??{}}var Ub=`0.0.1`;function Wb(e={}){var t,n;let r=null,i=null,a=(t=e.metadataCacheRefreshMillis)??1e3*60*5,o=0,s=(n=Ny(e.baseURL))??`https://ai-gateway.vercel.sh/v1/ai`,c=async()=>{let t=await Kb(e);if(t)return{Authorization:`Bearer ${t.token}`,"ai-gateway-protocol-version":Ub,[Ob]:t.authMethod,...e.headers};throw Ky.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},l=()=>{let e=Kv({settingValue:void 0,environmentVariableName:`VERCEL_DEPLOYMENT_ID`}),t=Kv({settingValue:void 0,environmentVariableName:`VERCEL_ENV`}),n=Kv({settingValue:void 0,environmentVariableName:`VERCEL_REGION`});return async()=>{let r=await Bb();return{...e&&{"ai-o11y-deployment-id":e},...t&&{"ai-o11y-environment":t},...n&&{"ai-o11y-region":n},...r&&{"ai-o11y-request-id":r}}}},u=t=>new Ib(t,{provider:`gateway`,baseURL:s,headers:c,fetch:e.fetch,o11yHeaders:l()}),d=async()=>{var t,n,l;let u=(l=(n=(t=e._internal)?.currentDate)?.call(t).getTime())??Date.now();return(!r||u-o>a)&&(o=u,r=new jb({baseURL:s,headers:c,fetch:e.fetch}).getAvailableModels().then(e=>(i=e,e)).catch(async e=>{throw Eb(e,kb(await c()))})),i?Promise.resolve(i):r},f=function(e){if(new.target)throw Error(`The Gateway Provider model function cannot be called with the new keyword.`);return u(e)};return f.getAvailableModels=d,f.imageModel=e=>{throw new Lu({modelId:e,modelType:`imageModel`})},f.languageModel=u,f.textEmbeddingModel=t=>new Lb(t,{provider:`gateway`,baseURL:s,headers:c,fetch:e.fetch,o11yHeaders:l()}),f}var Gb=Wb();async function Kb(e){let t=Kv({settingValue:e.apiKey,environmentVariableName:`AI_GATEWAY_API_KEY`});if(t)return{token:t,authMethod:`api-key`};try{let e=await zb();return{token:e,authMethod:`oidc`}}catch{return null}}var qb=typeof globalThis==`object`?globalThis:typeof self==`object`?self:typeof window==`object`?window:typeof global==`object`?global:{},Jb=`1.9.0`,Yb=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Xb(e){var t=new Set([e]),n=new Set,r=e.match(Yb);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(i.prerelease!=null)return function(t){return t===e};function a(e){return n.add(e),!1}function o(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(Yb);if(!r)return a(e);var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};return s.prerelease!=null||i.major!==s.major?a(e):i.major===0?i.minor===s.minor&&i.patch<=s.patch?o(e):a(e):i.minor<=s.minor?o(e):a(e)}}var Zb=Xb(Jb),Qb=Jb.split(`.`)[0],$b=Symbol.for(`opentelemetry.js.api.`+Qb),ex=qb;function tx(e,t,n,r){var i;r===void 0&&(r=!1);var a=ex[$b]=(i=ex[$b])??{version:Jb};if(!r&&a[e]){var o=Error(`@opentelemetry/api: Attempted duplicate registration of API: `+e);return n.error(o.stack||o.message),!1}if(a.version!==Jb){var o=Error(`@opentelemetry/api: Registration of version v`+a.version+` for `+e+` does not match previously registered API v`+Jb);return n.error(o.stack||o.message),!1}return a[e]=t,n.debug(`@opentelemetry/api: Registered a global for `+e+` v`+Jb+`.`),!0}function nx(e){var t,n,r=(t=ex[$b])?.version;if(!(!r||!Zb(r)))return(n=ex[$b])?.[e]}function rx(e,t){t.debug(`@opentelemetry/api: Unregistering a global for `+e+` v`+Jb+`.`);var n=ex[$b];n&&delete n[e]}var ix=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},ax=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},ox=function(){function e(e){this._namespace=e.namespace||`DiagComponentLogger`}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sx(`debug`,this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sx(`error`,this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sx(`info`,this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sx(`warn`,this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sx(`verbose`,this._namespace,e)},e}();function sx(e,t,n){var r=nx(`diag`);if(r)return n.unshift(t),r[e].apply(r,ax([],ix(n),!1))}var cx;(function(e){e[e.NONE=0]=`NONE`,e[e.ERROR=30]=`ERROR`,e[e.WARN=50]=`WARN`,e[e.INFO=60]=`INFO`,e[e.DEBUG=70]=`DEBUG`,e[e.VERBOSE=80]=`VERBOSE`,e[e.ALL=9999]=`ALL`})(cx||={});function lx(e,t){e<cx.NONE?e=cx.NONE:e>cx.ALL&&(e=cx.ALL),t||={};function n(n,r){var i=t[n];return typeof i==`function`&&e>=r?i.bind(t):function(){}}return{error:n(`error`,cx.ERROR),warn:n(`warn`,cx.WARN),info:n(`info`,cx.INFO),debug:n(`debug`,cx.DEBUG),verbose:n(`verbose`,cx.VERBOSE)}}var ux=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},dx=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},fx=`diag`,px=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=nx(`diag`);if(r)return r[e].apply(r,dx([],ux(t),!1))}}var t=this,n=function(e,n){var r,i,a;if(n===void 0&&(n={logLevel:cx.INFO}),e===t){var o=Error(`Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation`);return t.error((r=o.stack)??o.message),!1}typeof n==`number`&&(n={logLevel:n});var s=nx(`diag`),c=lx((i=n.logLevel)??cx.INFO,e);if(s&&!n.suppressOverrideMessage){var l=(a=Error().stack)??`<failed to generate stacktrace>`;s.warn(`Current logger will be overwritten from `+l),c.warn(`Current logger will overwrite one already registered from `+l)}return tx(`diag`,c,t,!0)};t.setLogger=n,t.disable=function(){rx(fx,t)},t.createComponentLogger=function(e){return new ox(e)},t.verbose=e(`verbose`),t.debug=e(`debug`),t.info=e(`info`),t.warn=e(`warn`),t.error=e(`error`)}return e.instance=function(){return this._instance||=new e,this._instance},e}();function mx(e){return Symbol.for(e)}var hx=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}return e}(),gx=new hx,_x=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},vx=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},yx=function(){function e(){}return e.prototype.active=function(){return gx},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t.call.apply(t,vx([n],_x(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),bx=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},xx=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Sx=`context`,Cx=new yx,wx=function(){function e(){}return e.getInstance=function(){return this._instance||=new e,this._instance},e.prototype.setGlobalContextManager=function(e){return tx(Sx,e,px.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(r=this._getContextManager()).with.apply(r,xx([e,t,n],bx(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return nx(Sx)||Cx},e.prototype.disable=function(){this._getContextManager().disable(),rx(Sx,px.instance())},e}(),Tx;(function(e){e[e.NONE=0]=`NONE`,e[e.SAMPLED=1]=`SAMPLED`})(Tx||={});var Ex=`0000000000000000`,Dx=`00000000000000000000000000000000`,Ox={traceId:Dx,spanId:Ex,traceFlags:Tx.NONE},kx=function(){function e(e){e===void 0&&(e=Ox),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),Ax=mx(`OpenTelemetry Context Key SPAN`);function jx(e){return e.getValue(Ax)||void 0}function Mx(){return jx(wx.getInstance().active())}function Nx(e,t){return e.setValue(Ax,t)}function Px(e){return e.deleteValue(Ax)}function Fx(e,t){return Nx(e,new kx(t))}function Ix(e){var t;return(t=jx(e))?.spanContext()}var Lx=/^([0-9a-f]{32})$/i,Rx=/^[0-9a-f]{16}$/i;function zx(e){return Lx.test(e)&&e!==Dx}function Bx(e){return Rx.test(e)&&e!==Ex}function Vx(e){return zx(e.traceId)&&Bx(e.spanId)}function Hx(e){return new kx(e)}var Ux=wx.getInstance(),Wx=function(){function e(){}return e.prototype.startSpan=function(e,t,n){n===void 0&&(n=Ux.active());var r=!!t?.root;if(r)return new kx;var i=n&&Ix(n);return Gx(i)&&Vx(i)?new kx(i):new kx},e.prototype.startActiveSpan=function(e,t,n,r){var i,a,o;if(!(arguments.length<2)){arguments.length===2?o=t:arguments.length===3?(i=t,o=n):(i=t,a=n,o=r);var s=a??Ux.active(),c=this.startSpan(e,i,s),l=Nx(s,c);return Ux.with(l,o,void 0,c)}},e}();function Gx(e){return typeof e==`object`&&typeof e.spanId==`string`&&typeof e.traceId==`string`&&typeof e.traceFlags==`number`}var Kx=new Wx,qx=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Kx},e}(),Jx=function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new Wx},e}(),Yx=new Jx,Xx=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return(r=this.getDelegateTracer(e,t,n))??new qx(this,e,t,n)},e.prototype.getDelegate=function(){var e;return(e=this._delegate)??Yx},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return(r=this._delegate)?.getTracer(e,t,n)},e}(),Zx;(function(e){e[e.UNSET=0]=`UNSET`,e[e.OK=1]=`OK`,e[e.ERROR=2]=`ERROR`})(Zx||={});var Qx=`trace`,$x=function(){function e(){this._proxyTracerProvider=new Xx,this.wrapSpanContext=Hx,this.isSpanContextValid=Vx,this.deleteSpan=Px,this.getSpan=jx,this.getActiveSpan=Mx,this.getSpanContext=Ix,this.setSpan=Nx,this.setSpanContext=Fx}return e.getInstance=function(){return this._instance||=new e,this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=tx(Qx,this._proxyTracerProvider,px.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return nx(Qx)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){rx(Qx,px.instance()),this._proxyTracerProvider=new Xx},e}(),eS=$x.getInstance(),tS=Object.defineProperty,nS=(e,t)=>{for(var n in t)tS(e,n,{get:t[n],enumerable:!0})},rS=`AI_NoOutputSpecifiedError`,iS=`vercel.ai.error.${rS}`,aS=Symbol.for(iS),oS,sS=class extends N{constructor({message:e=`No output specified.`}={}){super({name:rS,message:e}),this[oS]=!0}static isInstance(e){return N.hasMarker(e,iS)}};oS=aS;var cS=`AI_InvalidArgumentError`,lS=`vercel.ai.error.${cS}`,uS=Symbol.for(lS),dS,fS=class extends N{constructor({parameter:e,value:t,message:n}){super({name:cS,message:`Invalid argument for parameter ${e}: ${n}`}),this[dS]=!0,this.parameter=e,this.value=t}static isInstance(e){return N.hasMarker(e,lS)}};dS=uS;var pS=`AI_InvalidStreamPartError`,mS=`vercel.ai.error.${pS}`,hS=Symbol.for(mS),gS;gS=hS;var _S=`AI_InvalidToolInputError`,vS=`vercel.ai.error.${_S}`,yS=Symbol.for(vS),bS,xS=class extends N{constructor({toolInput:e,toolName:t,cause:n,message:r=`Invalid input for tool ${t}: ${$l(n)}`}){super({name:_S,message:r,cause:n}),this[bS]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return N.hasMarker(e,vS)}};bS=yS;var SS=`AI_MCPClientError`,CS=`vercel.ai.error.${SS}`,wS=Symbol.for(CS),TS;TS=wS;var ES=`AI_NoImageGeneratedError`,DS=`vercel.ai.error.${ES}`,OS=Symbol.for(DS),kS;kS=OS;var AS=`AI_NoObjectGeneratedError`,jS=`vercel.ai.error.${AS}`,MS=Symbol.for(jS),NS,PS=class extends N{constructor({message:e=`No object generated.`,cause:t,text:n,response:r,usage:i,finishReason:a}){super({name:AS,message:e,cause:t}),this[NS]=!0,this.text=n,this.response=r,this.usage=i,this.finishReason=a}static isInstance(e){return N.hasMarker(e,jS)}};NS=MS;var FS=`AI_NoOutputGeneratedError`,IS=`vercel.ai.error.${FS}`,LS=Symbol.for(IS),RS,zS=class extends N{constructor({message:e=`No output generated.`,cause:t}={}){super({name:FS,message:e,cause:t}),this[RS]=!0}static isInstance(e){return N.hasMarker(e,IS)}};RS=LS;var BS=`AI_NoSuchToolError`,VS=`vercel.ai.error.${BS}`,HS=Symbol.for(VS),US,WS=class extends N{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?`No tools are available.`:`Available tools: ${t.join(`, `)}.`}`}){super({name:BS,message:n}),this[US]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return N.hasMarker(e,VS)}};US=HS;var GS=`AI_ToolCallRepairError`,KS=`vercel.ai.error.${GS}`,qS=Symbol.for(KS),JS,YS=class extends N{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${$l(e)}`}){super({name:GS,message:n,cause:e}),this[JS]=!0,this.originalError=t}static isInstance(e){return N.hasMarker(e,KS)}};JS=qS;var XS=class extends N{constructor(e){super({name:`AI_UnsupportedModelVersionError`,message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},ZS=`AI_InvalidDataContentError`,QS=`vercel.ai.error.${ZS}`,$S=Symbol.for(QS),eC;eC=$S;var tC=`AI_InvalidMessageRoleError`,nC=`vercel.ai.error.${tC}`,rC=Symbol.for(nC),iC,aC=class extends N{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:tC,message:t}),this[iC]=!0,this.role=e}static isInstance(e){return N.hasMarker(e,nC)}};iC=rC;var oC=`AI_MessageConversionError`,sC=`vercel.ai.error.${oC}`,cC=Symbol.for(sC),lC;lC=cC;var uC=`AI_DownloadError`,dC=`vercel.ai.error.${uC}`,fC=Symbol.for(dC),pC,mC=class extends N{constructor({url:e,statusCode:t,statusText:n,cause:r,message:i=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:uC,message:i,cause:r}),this[pC]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return N.hasMarker(e,dC)}};pC=fC;var hC=`AI_RetryError`,gC=`vercel.ai.error.${hC}`,_C=Symbol.for(gC),vC,yC=class extends N{constructor({message:e,reason:t,errors:n}){super({name:hC,message:e}),this[vC]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return N.hasMarker(e,gC)}};vC=_C;function bC(e){if(typeof e!=`string`){if(e.specificationVersion!==`v2`)throw new XS({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return xC().languageModel(e)}function xC(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)??Gb}var SC=[{mediaType:`image/gif`,bytesPrefix:[71,73,70],base64Prefix:`R0lG`},{mediaType:`image/png`,bytesPrefix:[137,80,78,71],base64Prefix:`iVBORw`},{mediaType:`image/jpeg`,bytesPrefix:[255,216],base64Prefix:`/9j/`},{mediaType:`image/webp`,bytesPrefix:[82,73,70,70],base64Prefix:`UklGRg`},{mediaType:`image/bmp`,bytesPrefix:[66,77],base64Prefix:`Qk`},{mediaType:`image/tiff`,bytesPrefix:[73,73,42,0],base64Prefix:`SUkqAA`},{mediaType:`image/tiff`,bytesPrefix:[77,77,0,42],base64Prefix:`TU0AKg`},{mediaType:`image/avif`,bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:`AAAAIGZ0eXBhdmlm`},{mediaType:`image/heic`,bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:`AAAAIGZ0eXBoZWlj`}],CC=e=>{let t=typeof e==`string`?Ay(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function wC(e){let t=typeof e==`string`&&e.startsWith(`SUQz`)||typeof e!=`string`&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51;return t?CC(e):e}function TC({data:e,signatures:t}){let n=wC(e);for(let e of t)if(typeof n==`string`?n.startsWith(e.base64Prefix):n.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>n[t]===e))return e.mediaType}async function EC({url:e}){var t;let n=e.toString();try{let e=await fetch(n);if(!e.ok)throw new mC({url:n,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mediaType:(t=e.headers.get(`content-type`))??void 0}}catch(e){throw mC.isInstance(e)?e:new mC({url:n,cause:e})}}function DC(e){try{let[t,n]=e.split(`,`);return{mediaType:t.split(`;`)[0].split(`:`)[1],base64Content:n}}catch{return{mediaType:void 0,base64Content:void 0}}}var OC=J([B(),k_(Uint8Array),k_(ArrayBuffer),E_(e=>{var t,n;return(n=(t=globalThis.Buffer)?.isBuffer(e))??!1},{message:`Must be a Buffer`})]);function kC(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e==`string`)try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol===`data:`){let{mediaType:t,base64Content:n}=DC(e.toString());if(t==null||n==null)throw new N({name:`InvalidDataContentError`,message:`Invalid data URL format in content ${e.toString()}`});return{data:n,mediaType:t}}return{data:e,mediaType:void 0}}function AC(e){return typeof e==`string`?e:e instanceof ArrayBuffer?jy(new Uint8Array(e)):jy(e)}async function jC({prompt:e,supportedUrls:t,downloadImplementation:n=EC}){let r=await NC(e.messages,n,t);return[...e.system==null?[]:[{role:`system`,content:e.system}],...e.messages.map(e=>MC({message:e,downloadedAssets:r}))]}function MC({message:e,downloadedAssets:t}){let n=e.role;switch(n){case`system`:return{role:`system`,content:e.content,providerOptions:e.providerOptions};case`user`:return typeof e.content==`string`?{role:`user`,content:[{type:`text`,text:e.content}],providerOptions:e.providerOptions}:{role:`user`,content:e.content.map(e=>PC(e,t)).filter(e=>e.type!==`text`||e.text!==``),providerOptions:e.providerOptions};case`assistant`:return typeof e.content==`string`?{role:`assistant`,content:[{type:`text`,text:e.content}],providerOptions:e.providerOptions}:{role:`assistant`,content:e.content.filter(e=>e.type!==`text`||e.text!==``).map(e=>{let t=e.providerOptions;switch(e.type){case`file`:{let{data:n,mediaType:r}=kC(e.data);return{type:`file`,data:n,filename:e.filename,mediaType:r??e.mediaType,providerOptions:t}}case`reasoning`:return{type:`reasoning`,text:e.text,providerOptions:t};case`text`:return{type:`text`,text:e.text,providerOptions:t};case`tool-call`:return{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:t};case`tool-result`:return{type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:t}}}),providerOptions:e.providerOptions};case`tool`:return{role:`tool`,content:e.content.map(e=>({type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:e.providerOptions})),providerOptions:e.providerOptions};default:{let e=n;throw new aC({role:e})}}}async function NC(e,t,n){let r=e.filter(e=>e.role===`user`).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>e.type===`image`||e.type===`file`).map(e=>{var t;let n=(t=e.mediaType)??(e.type===`image`?`image/*`:void 0),r=e.type===`image`?e.image:e.data;if(typeof r==`string`)try{r=new URL(r)}catch{}return{mediaType:n,data:r}}).filter(e=>e.data instanceof URL&&e.mediaType!=null&&!Wv({url:e.data.toString(),mediaType:e.mediaType,supportedUrls:n})).map(e=>e.data),i=await Promise.all(r.map(async e=>({url:e,data:await t({url:e})})));return Object.fromEntries(i.map(({url:e,data:t})=>[e.toString(),t]))}function PC(e,t){var n;if(e.type===`text`)return{type:`text`,text:e.text,providerOptions:e.providerOptions};let r,i=e.type;switch(i){case`image`:r=e.image;break;case`file`:r=e.data;break;default:throw Error(`Unsupported part type: ${i}`)}let{data:a,mediaType:o}=kC(r),s=o??e.mediaType,c=a;if(c instanceof URL){let e=t[c.toString()];e&&(c=e.data,s??=e.mediaType)}switch(i){case`image`:return(c instanceof Uint8Array||typeof c==`string`)&&(s=(n=TC({data:c,signatures:SC}))??s),{type:`file`,mediaType:s??`image/*`,filename:void 0,data:c,providerOptions:e.providerOptions};case`file`:if(s==null)throw Error(`Media type is missing for file part`);return{type:`file`,mediaType:s,filename:e.filename,data:c,providerOptions:e.providerOptions}}}function FC({maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:i,frequencyPenalty:a,seed:o,stopSequences:s}){if(e!=null){if(!Number.isInteger(e))throw new fS({parameter:`maxOutputTokens`,value:e,message:`maxOutputTokens must be an integer`});if(e<1)throw new fS({parameter:`maxOutputTokens`,value:e,message:`maxOutputTokens must be >= 1`})}if(t!=null&&typeof t!=`number`)throw new fS({parameter:`temperature`,value:t,message:`temperature must be a number`});if(n!=null&&typeof n!=`number`)throw new fS({parameter:`topP`,value:n,message:`topP must be a number`});if(r!=null&&typeof r!=`number`)throw new fS({parameter:`topK`,value:r,message:`topK must be a number`});if(i!=null&&typeof i!=`number`)throw new fS({parameter:`presencePenalty`,value:i,message:`presencePenalty must be a number`});if(a!=null&&typeof a!=`number`)throw new fS({parameter:`frequencyPenalty`,value:a,message:`frequencyPenalty must be a number`});if(o!=null&&!Number.isInteger(o))throw new fS({parameter:`seed`,value:o,message:`seed must be an integer`});return{maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:i,frequencyPenalty:a,stopSequences:s,seed:o}}function IC(e){return e!=null&&Object.keys(e).length>0}function LC({tools:e,toolChoice:t,activeTools:n}){if(!IC(e))return{tools:void 0,toolChoice:void 0};let r=n==null?Object.entries(e):Object.entries(e).filter(([e])=>n.includes(e));return{tools:r.map(([e,t])=>{let n=t.type;switch(n){case void 0:case`dynamic`:case`function`:return{type:`function`,name:e,description:t.description,inputSchema:Dy(t.inputSchema).jsonSchema,providerOptions:t.providerOptions};case`provider-defined`:return{type:`provider-defined`,name:e,id:t.id,args:t.args};default:{let e=n;throw Error(`Unsupported tool type: ${e}`)}}}),toolChoice:t==null?{type:`auto`}:typeof t==`string`?{type:t}:{type:`tool`,toolName:t.toolName}}}var RC=w_(()=>J([Bg(),B(),H(),U(),t_(B(),RC),G(RC)])),$=t_(B(),t_(B(),RC)),zC=K({type:Y(`text`),text:B(),providerOptions:$.optional()}),BC=K({type:Y(`image`),image:J([OC,k_(URL)]),mediaType:B().optional(),providerOptions:$.optional()}),VC=K({type:Y(`file`),data:J([OC,k_(URL)]),filename:B().optional(),mediaType:B(),providerOptions:$.optional()}),HC=K({type:Y(`reasoning`),text:B(),providerOptions:$.optional()}),UC=K({type:Y(`tool-call`),toolCallId:B(),toolName:B(),input:W(),providerOptions:$.optional(),providerExecuted:U().optional()}),WC=Zg(`type`,[K({type:Y(`text`),value:B()}),K({type:Y(`json`),value:RC}),K({type:Y(`error-text`),value:B()}),K({type:Y(`error-json`),value:RC}),K({type:Y(`content`),value:G(J([K({type:Y(`text`),text:B()}),K({type:Y(`media`),data:B(),mediaType:B()})]))})]),GC=K({type:Y(`tool-result`),toolCallId:B(),toolName:B(),output:WC,providerOptions:$.optional()}),KC=K({role:Y(`system`),content:B(),providerOptions:$.optional()}),qC=K({role:Y(`user`),content:J([B(),G(J([zC,BC,VC]))]),providerOptions:$.optional()}),JC=K({role:Y(`assistant`),content:J([B(),G(J([zC,VC,HC,UC,GC]))]),providerOptions:$.optional()}),YC=K({role:Y(`tool`),content:G(GC),providerOptions:$.optional()}),XC=J([KC,qC,JC,YC]);async function ZC(e){if(e.prompt==null&&e.messages==null)throw new lu({prompt:e,message:`prompt or messages must be defined`});if(e.prompt!=null&&e.messages!=null)throw new lu({prompt:e,message:`prompt and messages cannot be defined at the same time`});if(e.system!=null&&typeof e.system!=`string`)throw new lu({prompt:e,message:`system must be a string`});let t;if(e.prompt!=null&&typeof e.prompt==`string`)t=[{role:`user`,content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new lu({prompt:e,message:`prompt or messages must be defined`});if(t.length===0)throw new lu({prompt:e,message:`messages must not be empty`});let n=await iy({value:t,schema:G(XC)});if(!n.success)throw new lu({prompt:e,message:`The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.`,cause:n.error});return{messages:t,system:e.system}}function QC(e){return Ky.isInstance(e)||db.isInstance(e)?new N({name:`GatewayError`,message:`Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.`,cause:e}):e}function $C({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId==null?``:` ${t.functionId}`}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}function ew({model:e,settings:t,telemetry:n,headers:r}){var i;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,n])=>(e[`ai.settings.${t}`]=n,e),{}),...Object.entries((i=n?.metadata)??{}).reduce((e,[t,n])=>(e[`ai.telemetry.metadata.${t}`]=n,e),{}),...Object.entries(r??{}).reduce((e,[t,n])=>(n!==void 0&&(e[`ai.request.headers.${t}`]=n),e),{})}}var tw={startSpan(){return nw},startActiveSpan(e,t,n,r){if(typeof t==`function`)return t(nw);if(typeof n==`function`)return n(nw);if(typeof r==`function`)return r(nw)}},nw={spanContext(){return rw},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},rw={traceId:``,spanId:``,traceFlags:0};function iw({isEnabled:e=!1,tracer:t}={}){return e?t||eS.getTracer(`ai`):tw}function aw({name:e,tracer:t,attributes:n,fn:r,endWhenDone:i=!0}){return t.startActiveSpan(e,{attributes:n},async e=>{try{let t=await r(e);return i&&e.end(),t}catch(t){try{ow(e,t)}finally{e.end()}throw t}})}function ow(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Zx.ERROR,message:t.message})):e.setStatus({code:Zx.ERROR})}function sw({telemetry:e,attributes:t}){return e?.isEnabled===!0?Object.entries(t).reduce((t,[n,r])=>{if(r==null)return t;if(typeof r==`object`&&`input`in r&&typeof r.input==`function`){if(e?.recordInputs===!1)return t;let i=r.input();return i==null?t:{...t,[n]:i}}if(typeof r==`object`&&`output`in r&&typeof r.output==`function`){if(e?.recordOutputs===!1)return t;let i=r.output();return i==null?t:{...t,[n]:i}}return{...t,[n]:r}},{}):{}}function cw(e){return JSON.stringify(e.map(e=>({...e,content:typeof e.content==`string`?e.content:e.content.map(e=>e.type===`file`?{...e,data:e.data instanceof Uint8Array?AC(e.data):e.data}:e)})))}function lw(e,t){return{inputTokens:uw(e.inputTokens,t.inputTokens),outputTokens:uw(e.outputTokens,t.outputTokens),totalTokens:uw(e.totalTokens,t.totalTokens),reasoningTokens:uw(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:uw(e.cachedInputTokens,t.cachedInputTokens)}}function uw(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function dw(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function fw({error:e,exponentialBackoffDelay:t}){let n=e.responseHeaders;if(!n)return t;let r,i=n[`retry-after-ms`];if(i){let e=parseFloat(i);Number.isNaN(e)||(r=e)}let a=n[`retry-after`];if(a&&r===void 0){let e=parseFloat(a);r=Number.isNaN(e)?Date.parse(a)-Date.now():e*1e3}return r!=null&&!Number.isNaN(r)&&0<=r&&(r<60*1e3||r<t)?r:t}var pw=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2,abortSignal:r}={})=>async i=>mw(i,{maxRetries:e,delayInMs:t,backoffFactor:n,abortSignal:r});async function mw(e,{maxRetries:t,delayInMs:n,backoffFactor:r,abortSignal:i},a=[]){try{return await e()}catch(o){if(Rv(o)||t===0)throw o;let s=Lv(o),c=[...a,o],l=c.length;if(l>t)throw new yC({message:`Failed after ${l} attempts. Last error: ${s}`,reason:`maxRetriesExceeded`,errors:c});if(o instanceof Error&&ql.isInstance(o)&&o.isRetryable===!0&&l<=t)return await Mv(fw({error:o,exponentialBackoffDelay:n}),{abortSignal:i}),mw(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r,abortSignal:i},c);throw l===1?o:new yC({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:`errorNotRetryable`,errors:c})}}function hw({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new fS({parameter:`maxRetries`,value:e,message:`maxRetries must be an integer`});if(e<0)throw new fS({parameter:`maxRetries`,value:e,message:`maxRetries must be >= 0`})}let n=e??2;return{maxRetries:n,retry:pw({maxRetries:n,abortSignal:t})}}var gw=class{constructor({data:e,mediaType:t}){let n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mediaType=t}get base64(){return this.base64Data??=jy(this.uint8ArrayData),this.base64Data}get uint8Array(){return this.uint8ArrayData??=Ay(this.base64Data),this.uint8ArrayData}},_w=class extends gw{constructor(e){super(e),this.type=`file`}};async function vw({toolCall:e,tools:t,repairToolCall:n,system:r,messages:i}){try{if(t==null)throw new WS({toolName:e.toolName});try{return await yw({toolCall:e,tools:t})}catch(a){if(n==null||!(WS.isInstance(a)||xS.isInstance(a)))throw a;let o=null;try{o=await n({toolCall:e,tools:t,inputSchema:({toolName:e})=>{let{inputSchema:n}=t[e];return Dy(n).jsonSchema},system:r,messages:i,error:a})}catch(e){throw new YS({cause:e,originalError:a})}if(o==null)throw a;return await yw({toolCall:o,tools:t})}}catch(t){let n=await oy({text:e.input}),r=n.success?n.value:e.input;return{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:r,dynamic:!0,invalid:!0,error:t}}}async function yw({toolCall:e,tools:t}){let n=e.toolName,r=t[n];if(r==null)throw new WS({toolName:e.toolName,availableTools:Object.keys(t)});let i=Dy(r.inputSchema),a=e.input.trim()===``?await iy({value:{},schema:i}):await oy({text:e.input,schema:i});if(a.success===!1)throw new xS({toolName:n,toolInput:e.input,cause:a.error});return r.type===`dynamic`?{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:a.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:`tool-call`,toolCallId:e.toolCallId,toolName:n,input:a.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var bw=class{constructor({content:e,finishReason:t,usage:n,warnings:r,request:i,response:a,providerMetadata:o}){this.content=e,this.finishReason=t,this.usage=n,this.warnings=r,this.request=i,this.response=a,this.providerMetadata=o}get text(){return this.content.filter(e=>e.type===`text`).map(e=>e.text).join(``)}get reasoning(){return this.content.filter(e=>e.type===`reasoning`)}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join(``)}get files(){return this.content.filter(e=>e.type===`file`).map(e=>e.file)}get sources(){return this.content.filter(e=>e.type===`source`)}get toolCalls(){return this.content.filter(e=>e.type===`tool-call`)}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!1)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type===`tool-result`)}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic===!1)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function xw(e){return({steps:t})=>t.length===e}async function Sw({stopConditions:e,steps:t}){return(await Promise.all(e.map(e=>e({steps:t})))).some(e=>e)}function Cw({output:e,tool:t,errorMode:n}){return n===`text`?{type:`error-text`,value:$l(e)}:n===`json`?{type:`error-json`,value:ww(e)}:t?.toModelOutput?t.toModelOutput(e):typeof e==`string`?{type:`text`,value:e}:{type:`json`,value:ww(e)}}function ww(e){return e===void 0?null:e}function Tw({content:e,tools:t}){let n=[],r=e.filter(e=>e.type!==`source`).filter(e=>(e.type!==`tool-result`||e.providerExecuted)&&(e.type!==`tool-error`||e.providerExecuted)).filter(e=>e.type!==`text`||e.text.length>0).map(e=>{switch(e.type){case`text`:return{type:`text`,text:e.text,providerOptions:e.providerMetadata};case`reasoning`:return{type:`reasoning`,text:e.text,providerOptions:e.providerMetadata};case`file`:return{type:`file`,data:e.file.base64,mediaType:e.file.mediaType,providerOptions:e.providerMetadata};case`tool-call`:return{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:e.providerMetadata};case`tool-result`:return{type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:Cw({tool:t?.[e.toolName],output:e.output,errorMode:`none`}),providerExecuted:!0,providerOptions:e.providerMetadata};case`tool-error`:return{type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:Cw({tool:t?.[e.toolName],output:e.error,errorMode:`json`}),providerOptions:e.providerMetadata}}});r.length>0&&n.push({role:`assistant`,content:r});let i=e.filter(e=>e.type===`tool-result`||e.type===`tool-error`).filter(e=>!e.providerExecuted).map(e=>({type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:Cw({tool:t?.[e.toolName],output:e.type===`tool-result`?e.output:e.error,errorMode:e.type===`tool-error`?`text`:`none`})}));return i.length>0&&n.push({role:`tool`,content:i}),n}var Ew=Fv({prefix:`aitxt`,size:24});function Dw(e,t){let n=new Headers(e??{});for(let[e,r]of Object.entries(t))n.has(e)||n.set(e,r);return n}function Ow({status:e,statusText:t,headers:n,textStream:r}){return new Response(r.pipeThrough(new TextEncoderStream),{status:e??200,statusText:t,headers:Dw(n,{"content-type":`text/plain; charset=utf-8`})})}function kw({response:e,status:t,statusText:n,headers:r,stream:i}){e.writeHead(t??200,n,r);let a=i.getReader(),o=async()=>{try{for(;;){let{done:t,value:n}=await a.read();if(t)break;e.write(n)}}catch(e){throw e}finally{e.end()}};o()}function Aw({response:e,status:t,statusText:n,headers:r,textStream:i}){kw({response:e,status:t,statusText:n,headers:Object.fromEntries(Dw(r,{"content-type":`text/plain; charset=utf-8`}).entries()),stream:i.pipeThrough(new TextEncoderStream)})}var jw=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}},Mw={"content-type":`text/event-stream`,"cache-control":`no-cache`,connection:`keep-alive`,"x-vercel-ai-ui-message-stream":`v1`,"x-accel-buffering":`no`};function Nw({status:e,statusText:t,headers:n,stream:r,consumeSseStream:i}){let a=r.pipeThrough(new jw);if(i){let[e,t]=a.tee();a=e,i({stream:t})}return new Response(a.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:Dw(n,Mw)})}function Pw({originalMessages:e,responseMessageId:t}){if(e==null)return;let n=e[e.length-1];return n?.role===`assistant`?n.id:typeof t==`function`?t():t}var Fw=J([q({type:Y(`text-start`),id:B(),providerMetadata:$.optional()}),q({type:Y(`text-delta`),id:B(),delta:B(),providerMetadata:$.optional()}),q({type:Y(`text-end`),id:B(),providerMetadata:$.optional()}),q({type:Y(`error`),errorText:B()}),q({type:Y(`tool-input-start`),toolCallId:B(),toolName:B(),providerExecuted:U().optional(),dynamic:U().optional()}),q({type:Y(`tool-input-delta`),toolCallId:B(),inputTextDelta:B()}),q({type:Y(`tool-input-available`),toolCallId:B(),toolName:B(),input:W(),providerExecuted:U().optional(),providerMetadata:$.optional(),dynamic:U().optional()}),q({type:Y(`tool-input-error`),toolCallId:B(),toolName:B(),input:W(),providerExecuted:U().optional(),providerMetadata:$.optional(),dynamic:U().optional(),errorText:B()}),q({type:Y(`tool-output-available`),toolCallId:B(),output:W(),providerExecuted:U().optional(),dynamic:U().optional(),preliminary:U().optional()}),q({type:Y(`tool-output-error`),toolCallId:B(),errorText:B(),providerExecuted:U().optional(),dynamic:U().optional()}),q({type:Y(`reasoning`),text:B(),providerMetadata:$.optional()}),q({type:Y(`reasoning-start`),id:B(),providerMetadata:$.optional()}),q({type:Y(`reasoning-delta`),id:B(),delta:B(),providerMetadata:$.optional()}),q({type:Y(`reasoning-end`),id:B(),providerMetadata:$.optional()}),q({type:Y(`reasoning-part-finish`)}),q({type:Y(`source-url`),sourceId:B(),url:B(),title:B().optional(),providerMetadata:$.optional()}),q({type:Y(`source-document`),sourceId:B(),mediaType:B(),title:B(),filename:B().optional(),providerMetadata:$.optional()}),q({type:Y(`file`),url:B(),mediaType:B(),providerMetadata:$.optional()}),q({type:B().startsWith(`data-`),id:B().optional(),data:W(),transient:U().optional()}),q({type:Y(`start-step`)}),q({type:Y(`finish-step`)}),q({type:Y(`start`),messageId:B().optional(),messageMetadata:W().optional()}),q({type:Y(`finish`),messageMetadata:W().optional()}),q({type:Y(`abort`)}),q({type:Y(`message-metadata`),messageMetadata:W()})]);function Iw(e){return e.type.startsWith(`data-`)}function Lw(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;let n={...e};for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let i=t[r];if(i===void 0)continue;let a=r in e?e[r]:void 0,o=typeof i==`object`&&!!i&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp),s=typeof a==`object`&&!!a&&!Array.isArray(a)&&!(a instanceof Date)&&!(a instanceof RegExp);o&&s?n[r]=Lw(a,i):n[r]=i}return n}function Rw(e){let t=[`ROOT`],n=-1,r=null;function i(e,i,a){switch(e){case`"`:n=i,t.pop(),t.push(a),t.push(`INSIDE_STRING`);break;case`f`:case`t`:case`n`:n=i,r=i,t.pop(),t.push(a),t.push(`INSIDE_LITERAL`);break;case`-`:t.pop(),t.push(a),t.push(`INSIDE_NUMBER`);break;case`0`:case`1`:case`2`:case`3`:case`4`:case`5`:case`6`:case`7`:case`8`:case`9`:n=i,t.pop(),t.push(a),t.push(`INSIDE_NUMBER`);break;case`{`:n=i,t.pop(),t.push(a),t.push(`INSIDE_OBJECT_START`);break;case`[`:n=i,t.pop(),t.push(a),t.push(`INSIDE_ARRAY_START`);break}}function a(e,r){switch(e){case`,`:t.pop(),t.push(`INSIDE_OBJECT_AFTER_COMMA`);break;case`}`:n=r,t.pop();break}}function o(e,r){switch(e){case`,`:t.pop(),t.push(`INSIDE_ARRAY_AFTER_COMMA`);break;case`]`:n=r,t.pop();break}}for(let s=0;s<e.length;s++){let c=e[s],l=t[t.length-1];switch(l){case`ROOT`:i(c,s,`FINISH`);break;case`INSIDE_OBJECT_START`:switch(c){case`"`:t.pop(),t.push(`INSIDE_OBJECT_KEY`);break;case`}`:n=s,t.pop();break}break;case`INSIDE_OBJECT_AFTER_COMMA`:switch(c){case`"`:t.pop(),t.push(`INSIDE_OBJECT_KEY`);break}break;case`INSIDE_OBJECT_KEY`:switch(c){case`"`:t.pop(),t.push(`INSIDE_OBJECT_AFTER_KEY`);break}break;case`INSIDE_OBJECT_AFTER_KEY`:switch(c){case`:`:t.pop(),t.push(`INSIDE_OBJECT_BEFORE_VALUE`);break}break;case`INSIDE_OBJECT_BEFORE_VALUE`:i(c,s,`INSIDE_OBJECT_AFTER_VALUE`);break;case`INSIDE_OBJECT_AFTER_VALUE`:a(c,s);break;case`INSIDE_STRING`:switch(c){case`"`:t.pop(),n=s;break;case`\\`:t.push(`INSIDE_STRING_ESCAPE`);break;default:n=s}break;case`INSIDE_ARRAY_START`:switch(c){case`]`:n=s,t.pop();break;default:n=s,i(c,s,`INSIDE_ARRAY_AFTER_VALUE`);break}break;case`INSIDE_ARRAY_AFTER_VALUE`:switch(c){case`,`:t.pop(),t.push(`INSIDE_ARRAY_AFTER_COMMA`);break;case`]`:n=s,t.pop();break;default:n=s;break}break;case`INSIDE_ARRAY_AFTER_COMMA`:i(c,s,`INSIDE_ARRAY_AFTER_VALUE`);break;case`INSIDE_STRING_ESCAPE`:t.pop(),n=s;break;case`INSIDE_NUMBER`:switch(c){case`0`:case`1`:case`2`:case`3`:case`4`:case`5`:case`6`:case`7`:case`8`:case`9`:n=s;break;case`e`:case`E`:case`-`:case`.`:break;case`,`:t.pop(),t[t.length-1]===`INSIDE_ARRAY_AFTER_VALUE`&&o(c,s),t[t.length-1]===`INSIDE_OBJECT_AFTER_VALUE`&&a(c,s);break;case`}`:t.pop(),t[t.length-1]===`INSIDE_OBJECT_AFTER_VALUE`&&a(c,s);break;case`]`:t.pop(),t[t.length-1]===`INSIDE_ARRAY_AFTER_VALUE`&&o(c,s);break;default:t.pop();break}break;case`INSIDE_LITERAL`:{let i=e.substring(r,s+1);!`false`.startsWith(i)&&!`true`.startsWith(i)&&!`null`.startsWith(i)?(t.pop(),t[t.length-1]===`INSIDE_OBJECT_AFTER_VALUE`?a(c,s):t[t.length-1]===`INSIDE_ARRAY_AFTER_VALUE`&&o(c,s)):n=s;break}}}let s=e.slice(0,n+1);for(let n=t.length-1;n>=0;n--){let i=t[n];switch(i){case`INSIDE_STRING`:s+=`"`;break;case`INSIDE_OBJECT_KEY`:case`INSIDE_OBJECT_AFTER_KEY`:case`INSIDE_OBJECT_AFTER_COMMA`:case`INSIDE_OBJECT_START`:case`INSIDE_OBJECT_BEFORE_VALUE`:case`INSIDE_OBJECT_AFTER_VALUE`:s+=`}`;break;case`INSIDE_ARRAY_START`:case`INSIDE_ARRAY_AFTER_COMMA`:case`INSIDE_ARRAY_AFTER_VALUE`:s+=`]`;break;case`INSIDE_LITERAL`:{let t=e.substring(r,e.length);`true`.startsWith(t)?s+=`true`.slice(t.length):`false`.startsWith(t)?s+=`false`.slice(t.length):`null`.startsWith(t)&&(s+=`null`.slice(t.length))}}}return s}async function zw(e){if(e===void 0)return{value:void 0,state:`undefined-input`};let t=await oy({text:e});return t.success?{value:t.value,state:`successful-parse`}:(t=await oy({text:Rw(e)}),t.success?{value:t.value,state:`repaired-parse`}:{value:void 0,state:`failed-parse`})}function Bw(e){return e.type.startsWith(`tool-`)}function Vw(e){return e.type.split(`-`).slice(1).join(`-`)}function Hw({lastMessage:e,messageId:t}){return{message:e?.role===`assistant`?e:{id:t,metadata:void 0,role:`assistant`,parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Uw({stream:e,messageMetadataSchema:t,dataPartSchemas:n,runUpdateMessageJob:r,onError:i,onToolCall:a,onData:o}){return e.pipeThrough(new TransformStream({async transform(e,s){await r(async({state:r,write:c})=>{var l,u,d,f;function p(e){let t=r.message.parts.filter(Bw),n=t.find(t=>t.toolCallId===e);if(n==null)throw Error(`tool-output-error must be preceded by a tool-input-available`);return n}function m(e){let t=r.message.parts.filter(e=>e.type===`dynamic-tool`),n=t.find(t=>t.toolCallId===e);if(n==null)throw Error(`tool-output-error must be preceded by a tool-input-available`);return n}function h(e){var t;let n=r.message.parts.find(t=>Bw(t)&&t.toolCallId===e.toolCallId),i=e,a=n;n==null?r.message.parts.push({type:`tool-${e.toolName}`,toolCallId:e.toolCallId,state:e.state,input:i.input,output:i.output,rawInput:i.rawInput,errorText:i.errorText,providerExecuted:i.providerExecuted,preliminary:i.preliminary,...i.providerMetadata==null?{}:{callProviderMetadata:i.providerMetadata}}):(n.state=e.state,a.input=i.input,a.output=i.output,a.errorText=i.errorText,a.rawInput=i.rawInput,a.preliminary=i.preliminary,a.providerExecuted=(t=i.providerExecuted)??n.providerExecuted,i.providerMetadata!=null&&n.state===`input-available`&&(n.callProviderMetadata=i.providerMetadata))}function g(e){var t;let n=r.message.parts.find(t=>t.type===`dynamic-tool`&&t.toolCallId===e.toolCallId),i=e,a=n;n==null?r.message.parts.push({type:`dynamic-tool`,toolName:e.toolName,toolCallId:e.toolCallId,state:e.state,input:i.input,output:i.output,errorText:i.errorText,preliminary:i.preliminary,...i.providerMetadata==null?{}:{callProviderMetadata:i.providerMetadata}}):(n.state=e.state,a.toolName=e.toolName,a.input=i.input,a.output=i.output,a.errorText=i.errorText,a.rawInput=(t=i.rawInput)??a.rawInput,a.preliminary=i.preliminary,i.providerMetadata!=null&&n.state===`input-available`&&(n.callProviderMetadata=i.providerMetadata))}async function _(e){if(e!=null){let n=r.message.metadata==null?e:Lw(r.message.metadata,e);t!=null&&await ry({value:n,schema:t}),r.message.metadata=n}}switch(e.type){case`text-start`:{let t={type:`text`,text:``,providerMetadata:e.providerMetadata,state:`streaming`};r.activeTextParts[e.id]=t,r.message.parts.push(t),c();break}case`text-delta`:{let t=r.activeTextParts[e.id];t.text+=e.delta,t.providerMetadata=(l=e.providerMetadata)??t.providerMetadata,c();break}case`text-end`:{let t=r.activeTextParts[e.id];t.state=`done`,t.providerMetadata=(u=e.providerMetadata)??t.providerMetadata,delete r.activeTextParts[e.id],c();break}case`reasoning-start`:{let t={type:`reasoning`,text:``,providerMetadata:e.providerMetadata,state:`streaming`};r.activeReasoningParts[e.id]=t,r.message.parts.push(t),c();break}case`reasoning-delta`:{let t=r.activeReasoningParts[e.id];t.text+=e.delta,t.providerMetadata=(d=e.providerMetadata)??t.providerMetadata,c();break}case`reasoning-end`:{let t=r.activeReasoningParts[e.id];t.providerMetadata=(f=e.providerMetadata)??t.providerMetadata,t.state=`done`,delete r.activeReasoningParts[e.id],c();break}case`file`:r.message.parts.push({type:`file`,mediaType:e.mediaType,url:e.url}),c();break;case`source-url`:r.message.parts.push({type:`source-url`,sourceId:e.sourceId,url:e.url,title:e.title,providerMetadata:e.providerMetadata}),c();break;case`source-document`:r.message.parts.push({type:`source-document`,sourceId:e.sourceId,mediaType:e.mediaType,title:e.title,filename:e.filename,providerMetadata:e.providerMetadata}),c();break;case`tool-input-start`:{let t=r.message.parts.filter(Bw);r.partialToolCalls[e.toolCallId]={text:``,toolName:e.toolName,index:t.length,dynamic:e.dynamic},e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-streaming`,input:void 0}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-streaming`,input:void 0,providerExecuted:e.providerExecuted}),c();break}case`tool-input-delta`:{let t=r.partialToolCalls[e.toolCallId];t.text+=e.inputTextDelta;let{value:n}=await zw(t.text);t.dynamic?g({toolCallId:e.toolCallId,toolName:t.toolName,state:`input-streaming`,input:n}):h({toolCallId:e.toolCallId,toolName:t.toolName,state:`input-streaming`,input:n}),c();break}case`tool-input-available`:e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-available`,input:e.input,providerMetadata:e.providerMetadata}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-available`,input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),c(),a&&!e.providerExecuted&&await a({toolCall:e});break;case`tool-input-error`:e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:`output-error`,input:e.input,errorText:e.errorText,providerMetadata:e.providerMetadata}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:`output-error`,input:void 0,rawInput:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),c();break;case`tool-output-available`:if(e.dynamic){let t=m(e.toolCallId);g({toolCallId:e.toolCallId,toolName:t.toolName,state:`output-available`,input:t.input,output:e.output,preliminary:e.preliminary})}else{let t=p(e.toolCallId);h({toolCallId:e.toolCallId,toolName:Vw(t),state:`output-available`,input:t.input,output:e.output,providerExecuted:e.providerExecuted,preliminary:e.preliminary})}c();break;case`tool-output-error`:if(e.dynamic){let t=m(e.toolCallId);g({toolCallId:e.toolCallId,toolName:t.toolName,state:`output-error`,input:t.input,errorText:e.errorText})}else{let t=p(e.toolCallId);h({toolCallId:e.toolCallId,toolName:Vw(t),state:`output-error`,input:t.input,rawInput:t.rawInput,errorText:e.errorText})}c();break;case`start-step`:r.message.parts.push({type:`step-start`});break;case`finish-step`:r.activeTextParts={},r.activeReasoningParts={};break;case`start`:e.messageId!=null&&(r.message.id=e.messageId),await _(e.messageMetadata),(e.messageId!=null||e.messageMetadata!=null)&&c();break;case`finish`:await _(e.messageMetadata),e.messageMetadata!=null&&c();break;case`message-metadata`:await _(e.messageMetadata),e.messageMetadata!=null&&c();break;case`error`:i?.(Error(e.errorText));break;default:if(Iw(e)){n?.[e.type]!=null&&await ry({value:e.data,schema:n[e.type]});let t=e;if(t.transient){o?.(t);break}let i=t.id==null?void 0:r.message.parts.find(e=>t.type===e.type&&t.id===e.id);i==null?r.message.parts.push(t):i.data=t.data,o?.(t),c()}}s.enqueue(e)})}}))}function Ww({messageId:e,originalMessages:t=[],onFinish:n,onError:r,stream:i}){let a=t?.[t.length-1];a?.role===`assistant`?e=a.id:a=void 0;let o=!1,s=i.pipeThrough(new TransformStream({transform(t,n){if(t.type===`start`){let n=t;n.messageId==null&&e!=null&&(n.messageId=e)}t.type===`abort`&&(o=!0),n.enqueue(t)}}));if(n==null)return s;let c=Hw({lastMessage:a?structuredClone(a):void 0,messageId:e??``}),l=async e=>{await e({state:c,write:()=>{}})};return Uw({stream:s,runUpdateMessageJob:l,onError:r}).pipeThrough(new TransformStream({transform(e,t){t.enqueue(e)},async flush(){let e=c.message.id===a?.id;await n({isAborted:o,isContinuation:e,responseMessage:c.message,messages:[...e?t.slice(0,-1):t,c.message]})}}))}function Gw({response:e,status:t,statusText:n,headers:r,stream:i,consumeSseStream:a}){let o=i.pipeThrough(new jw);if(a){let[e,t]=o.tee();o=e,a({stream:t})}kw({response:e,status:t,statusText:n,headers:Object.fromEntries(Dw(r,Mw).entries()),stream:o.pipeThrough(new TextEncoderStream)})}function Kw(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let e=t.getReader();return{async next(){let{done:t,value:n}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:n}}}},t}async function qw({stream:e,onError:t}){let n=e.getReader();try{for(;;){let{done:e}=await n.read();if(e)break}}catch(e){t?.(e)}finally{n.releaseLock()}}function Jw(){let e,t,n=new Promise((n,r)=>{e=n,t=r});return{promise:n,resolve:e,reject:t}}function Yw(){let e=[],t=null,n=!1,r=Jw(),i=()=>{n=!0,r.resolve(),e.forEach(e=>e.cancel()),e=[],t?.close()},a=async()=>{if(n&&e.length===0){t?.close();return}if(e.length===0)return r=Jw(),await r.promise,a();try{let{value:r,done:i}=await e[0].read();i?(e.shift(),e.length>0?await a():n&&t?.close()):t?.enqueue(r)}catch(n){t?.error(n),e.shift(),i()}};return{stream:new ReadableStream({start(e){t=e},pull:a,async cancel(){for(let t of e)await t.cancel();e=[],n=!0}}),addStream:t=>{if(n)throw Error(`Cannot add inner stream: outer stream is closed`);e.push(t.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&t?.close()},terminate:i}}var Xw=class{constructor(){this.status={type:`pending`},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise||=new Promise((e,t)=>{this.status.type===`resolved`?e(this.status.value):this.status.type===`rejected`&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise}resolve(e){var t;this.status={type:`resolved`,value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:`rejected`,error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}};function Zw(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)?.now())??Date.now()}function Qw({tools:e,generatorStream:t,tracer:n,telemetry:r,system:i,messages:a,abortSignal:o,repairToolCall:s,experimental_context:c}){let l=null,u=new ReadableStream({start(e){l=e}}),d=new Set,f=new Map,p=!1,m;function h(){p&&d.size===0&&(m!=null&&l.enqueue(m),l.close())}let g=new TransformStream({async transform(t,u){let p=t.type;switch(p){case`stream-start`:case`text-start`:case`text-delta`:case`text-end`:case`reasoning-start`:case`reasoning-delta`:case`reasoning-end`:case`tool-input-start`:case`tool-input-delta`:case`tool-input-end`:case`source`:case`response-metadata`:case`error`:case`raw`:u.enqueue(t);break;case`file`:u.enqueue({type:`file`,file:new _w({data:t.data,mediaType:t.mediaType})});break;case`finish`:m={type:`finish`,finishReason:t.finishReason,usage:t.usage,providerMetadata:t.providerMetadata};break;case`tool-call`:try{let p=await vw({toolCall:t,tools:e,repairToolCall:s,system:i,messages:a});if(u.enqueue(p),p.invalid){l.enqueue({type:`tool-error`,toolCallId:p.toolCallId,toolName:p.toolName,input:p.input,error:Lv(p.error),dynamic:!0});break}let m=e[p.toolName];if(f.set(p.toolCallId,p.input),m.onInputAvailable!=null&&await m.onInputAvailable({input:p.input,toolCallId:p.toolCallId,messages:a,abortSignal:o,experimental_context:c}),m.execute!=null&&p.providerExecuted!==!0){let e=Iv();d.add(e),aw({name:`ai.toolCall`,attributes:sw({telemetry:r,attributes:{...$C({operationId:`ai.toolCall`,telemetry:r}),"ai.toolCall.name":p.toolName,"ai.toolCall.id":p.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(p.input)}}}),tracer:n,fn:async t=>{let n;try{let e=Fy({execute:m.execute.bind(m),input:p.input,options:{toolCallId:p.toolCallId,messages:a,abortSignal:o,experimental_context:c}});for await(let t of e)l.enqueue({...p,type:`tool-result`,output:t.output,...t.type===`preliminary`&&{preliminary:!0}}),t.type===`final`&&(n=t.output)}catch(n){ow(t,n),l.enqueue({...p,type:`tool-error`,error:n}),d.delete(e),h();return}d.delete(e),h();try{t.setAttributes(sw({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(n)}}}))}catch{}}})}}catch(e){l.enqueue({type:`error`,error:e})}break;case`tool-result`:{let e=t.toolName;t.isError?l.enqueue({type:`tool-error`,toolCallId:t.toolCallId,toolName:e,input:f.get(t.toolCallId),providerExecuted:t.providerExecuted,error:t.result}):u.enqueue({type:`tool-result`,toolCallId:t.toolCallId,toolName:e,input:f.get(t.toolCallId),output:t.result,providerExecuted:t.providerExecuted});break}default:{let e=p;throw Error(`Unhandled chunk type: ${e}`)}}},flush(){p=!0,h()}});return new ReadableStream({async start(e){return Promise.all([t.pipeThrough(g).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),u.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])}})}var $w=Fv({prefix:`aitxt`,size:24});function eT({model:e,tools:t,toolChoice:n,system:r,prompt:i,messages:a,maxRetries:o,abortSignal:s,headers:c,stopWhen:l=xw(1),experimental_output:u,experimental_telemetry:d,prepareStep:f,providerOptions:p,experimental_activeTools:m,activeTools:h=m,experimental_repairToolCall:g,experimental_transform:_,includeRawChunks:v=!1,onChunk:y,onError:b=({error:e})=>{console.error(e)},onFinish:ee,onAbort:x,onStepFinish:S,experimental_context:C,_internal:{now:w=Zw,generateId:T=$w,currentDate:te=()=>new Date}={},...E}){return new nT({model:bC(e),telemetry:d,headers:c,settings:E,maxRetries:o,abortSignal:s,system:r,prompt:i,messages:a,tools:t,toolChoice:n,transforms:dw(_),activeTools:h,repairToolCall:g,stopConditions:dw(l),output:u,providerOptions:p,prepareStep:f,includeRawChunks:v,onChunk:y,onError:b,onFinish:ee,onAbort:x,onStepFinish:S,now:w,currentDate:te,generateId:T,experimental_context:C})}function tT(e){if(!e)return new TransformStream({transform(e,t){t.enqueue({part:e,partialOutput:void 0})}});let t,n=``,r=``,i=``;function a({controller:e,partialOutput:n=void 0}){e.enqueue({part:{type:`text-delta`,id:t,text:r},partialOutput:n}),r=``}return new TransformStream({async transform(o,s){if(o.type===`finish-step`&&r.length>0&&a({controller:s}),o.type!==`text-delta`&&o.type!==`text-start`&&o.type!==`text-end`){s.enqueue({part:o,partialOutput:void 0});return}if(t==null)t=o.id;else if(o.id!==t){s.enqueue({part:o,partialOutput:void 0});return}if(o.type===`text-start`){s.enqueue({part:o,partialOutput:void 0});return}if(o.type===`text-end`){r.length>0&&a({controller:s}),s.enqueue({part:o,partialOutput:void 0});return}n+=o.text,r+=o.text;let c=await e.parsePartial({text:n});if(c!=null){let e=JSON.stringify(c.partial);e!==i&&(a({controller:s,partialOutput:c.partial}),i=e)}}})}var nT=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:i,abortSignal:a,system:o,prompt:s,messages:c,tools:l,toolChoice:u,transforms:d,activeTools:f,repairToolCall:p,stopConditions:m,output:h,providerOptions:g,prepareStep:_,includeRawChunks:v,now:y,currentDate:b,generateId:ee,onChunk:x,onError:S,onFinish:C,onAbort:w,onStepFinish:T,experimental_context:te}){this._totalUsage=new Xw,this._finishReason=new Xw,this._steps=new Xw,this.output=h,this.includeRawChunks=v,this.tools=l;let E,D=[],ne=[],re,ie,O={},ae=[],oe=[],se,ce={},le={},ue=new TransformStream({async transform(e,t){var n,r,i;t.enqueue(e);let{part:a}=e;if((a.type===`text-delta`||a.type===`reasoning-delta`||a.type===`source`||a.type===`tool-call`||a.type===`tool-result`||a.type===`tool-input-start`||a.type===`tool-input-delta`||a.type===`raw`)&&await x?.({chunk:a}),a.type===`error`&&await S({error:QC(a.error)}),a.type===`text-start`&&(ce[a.id]={type:`text`,text:``,providerMetadata:a.providerMetadata},D.push(ce[a.id])),a.type===`text-delta`){let e=ce[a.id];if(e==null){t.enqueue({part:{type:`error`,error:`text part ${a.id} not found`},partialOutput:void 0});return}e.text+=a.text,e.providerMetadata=(n=a.providerMetadata)??e.providerMetadata}if(a.type===`text-end`&&delete ce[a.id],a.type===`reasoning-start`&&(le[a.id]={type:`reasoning`,text:``,providerMetadata:a.providerMetadata},D.push(le[a.id])),a.type===`reasoning-delta`){let e=le[a.id];if(e==null){t.enqueue({part:{type:`error`,error:`reasoning part ${a.id} not found`},partialOutput:void 0});return}e.text+=a.text,e.providerMetadata=(r=a.providerMetadata)??e.providerMetadata}if(a.type===`reasoning-end`){let e=le[a.id];if(e==null){t.enqueue({part:{type:`error`,error:`reasoning part ${a.id} not found`},partialOutput:void 0});return}e.providerMetadata=(i=a.providerMetadata)??e.providerMetadata,delete le[a.id]}if(a.type===`file`&&D.push({type:`file`,file:a.file}),a.type===`source`&&D.push(a),a.type===`tool-call`&&D.push(a),a.type===`tool-result`&&!a.preliminary&&D.push(a),a.type===`tool-error`&&D.push(a),a.type===`start-step`&&(O=a.request,ae=a.warnings),a.type===`finish-step`){let e=Tw({content:D,tools:l}),t=new bw({content:D,finishReason:a.finishReason,usage:a.usage,warnings:ae,request:O,response:{...a.response,messages:[...ne,...e]},providerMetadata:a.providerMetadata});await T?.(t),oe.push(t),D=[],le={},ce={},ne.push(...e),E.resolve()}a.type===`finish`&&(ie=a.totalUsage,re=a.finishReason)},async flush(e){try{if(oe.length===0){let e=new zS({message:`No output generated. Check the stream for errors.`});ye._finishReason.reject(e),ye._totalUsage.reject(e),ye._steps.reject(e);return}let e=re??`unknown`,n=ie??{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};ye._finishReason.resolve(e),ye._totalUsage.resolve(n),ye._steps.resolve(oe);let r=oe[oe.length-1];await C?.({finishReason:e,totalUsage:n,usage:r.usage,content:r.content,text:r.text,reasoningText:r.reasoningText,reasoning:r.reasoning,files:r.files,sources:r.sources,toolCalls:r.toolCalls,staticToolCalls:r.staticToolCalls,dynamicToolCalls:r.dynamicToolCalls,toolResults:r.toolResults,staticToolResults:r.staticToolResults,dynamicToolResults:r.dynamicToolResults,request:r.request,response:r.response,warnings:r.warnings,providerMetadata:r.providerMetadata,steps:oe}),se.setAttributes(sw({telemetry:t,attributes:{"ai.response.finishReason":e,"ai.response.text":{output:()=>r.text},"ai.response.toolCalls":{output:()=>{var e;return(e=r.toolCalls)?.length?JSON.stringify(r.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(r.providerMetadata),"ai.usage.inputTokens":n.inputTokens,"ai.usage.outputTokens":n.outputTokens,"ai.usage.totalTokens":n.totalTokens,"ai.usage.reasoningTokens":n.reasoningTokens,"ai.usage.cachedInputTokens":n.cachedInputTokens}}))}catch(t){e.error(t)}finally{se.end()}}}),de=Yw();this.addStream=de.addStream,this.closeStream=de.close;let fe=de.stream.getReader(),pe=new ReadableStream({async start(e){e.enqueue({type:`start`})},async pull(e){function t(){w?.({steps:oe}),e.enqueue({type:`abort`}),e.close()}try{let{done:n,value:r}=await fe.read();if(n){e.close();return}if(a?.aborted){t();return}e.enqueue(r)}catch(n){Rv(n)&&a?.aborted?t():e.error(n)}},cancel(e){return de.stream.cancel(e)}});for(let e of d)pe=pe.pipeThrough(e({tools:l,stopStream(){de.terminate()}}));this.baseStream=pe.pipeThrough(tT(h)).pipeThrough(ue);let{maxRetries:me,retry:he}=hw({maxRetries:i,abortSignal:a}),ge=iw(t),_e=FC(r),ve=ew({model:e,telemetry:t,headers:n,settings:{..._e,maxRetries:me}}),ye=this;aw({name:`ai.streamText`,attributes:sw({telemetry:t,attributes:{...$C({operationId:`ai.streamText`,telemetry:t}),...ve,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:c})}}}),tracer:ge,endWhenDone:!1,fn:async r=>{se=r;async function i({currentStep:r,responseMessages:d,usage:v}){var x,S,C,w,T;let D=ye.includeRawChunks;E=new Xw;let ne=await ZC({system:o,prompt:s,messages:c}),re=[...ne.messages,...d],ie=await _?.({model:e,steps:oe,stepNumber:oe.length,messages:re}),O=await jC({prompt:{system:(x=ie?.system)??ne.system,messages:(S=ie?.messages)??re},supportedUrls:await e.supportedUrls}),ae=bC((C=ie?.model)??e),{toolChoice:se,tools:ce}=LC({tools:l,toolChoice:(w=ie?.toolChoice)??u,activeTools:(T=ie?.activeTools)??f}),{result:{stream:le,response:ue,request:de},doStreamSpan:fe,startTimestampMs:pe}=await he(()=>aw({name:`ai.streamText.doStream`,attributes:sw({telemetry:t,attributes:{...$C({operationId:`ai.streamText.doStream`,telemetry:t}),...ve,"ai.model.provider":ae.provider,"ai.model.id":ae.modelId,"ai.prompt.messages":{input:()=>cw(O)},"ai.prompt.tools":{input:()=>ce?.map(e=>JSON.stringify(e))},"ai.prompt.toolChoice":{input:()=>se==null?void 0:JSON.stringify(se)},"gen_ai.system":ae.provider,"gen_ai.request.model":ae.modelId,"gen_ai.request.frequency_penalty":_e.frequencyPenalty,"gen_ai.request.max_tokens":_e.maxOutputTokens,"gen_ai.request.presence_penalty":_e.presencePenalty,"gen_ai.request.stop_sequences":_e.stopSequences,"gen_ai.request.temperature":_e.temperature,"gen_ai.request.top_k":_e.topK,"gen_ai.request.top_p":_e.topP}}),tracer:ge,endWhenDone:!1,fn:async e=>({startTimestampMs:y(),doStreamSpan:e,result:await ae.doStream({..._e,tools:ce,toolChoice:se,responseFormat:h?.responseFormat,prompt:O,providerOptions:g,abortSignal:a,headers:n,includeRawChunks:D})})})),me=Qw({tools:l,generatorStream:le,tracer:ge,telemetry:t,system:o,messages:re,repairToolCall:p,abortSignal:a,experimental_context:te}),be=de??{},xe=[],Se=[],Ce,we={},Te=`unknown`,Ee={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},De,Oe=!0,ke={id:ee(),timestamp:b(),modelId:e.modelId},Ae=``;ye.addStream(me.pipeThrough(new TransformStream({async transform(e,t){var n,r,i,o;if(e.type===`stream-start`){Ce=e.warnings;return}if(Oe){let e=y()-pe;Oe=!1,fe.addEvent(`ai.stream.firstChunk`,{"ai.response.msToFirstChunk":e}),fe.setAttributes({"ai.response.msToFirstChunk":e}),t.enqueue({type:`start-step`,request:be,warnings:Ce??[]})}let s=e.type;switch(s){case`text-start`:case`text-end`:t.enqueue(e);break;case`text-delta`:e.delta.length>0&&(t.enqueue({type:`text-delta`,id:e.id,text:e.delta,providerMetadata:e.providerMetadata}),Ae+=e.delta);break;case`reasoning-start`:case`reasoning-end`:t.enqueue(e);break;case`reasoning-delta`:t.enqueue({type:`reasoning-delta`,id:e.id,text:e.delta,providerMetadata:e.providerMetadata});break;case`tool-call`:t.enqueue(e),xe.push(e);break;case`tool-result`:t.enqueue(e),e.preliminary||Se.push(e);break;case`tool-error`:t.enqueue(e),Se.push(e);break;case`response-metadata`:ke={id:(n=e.id)??ke.id,timestamp:(r=e.timestamp)??ke.timestamp,modelId:(i=e.modelId)??ke.modelId};break;case`finish`:{Ee=e.usage,Te=e.finishReason,De=e.providerMetadata;let t=y()-pe;fe.addEvent(`ai.stream.finish`),fe.setAttributes({"ai.response.msToFinish":t,"ai.response.avgOutputTokensPerSecond":1e3*((o=Ee.outputTokens)??0)/t});break}case`file`:t.enqueue(e);break;case`source`:t.enqueue(e);break;case`tool-input-start`:{we[e.id]=e.toolName;let n=l?.[e.toolName];n?.onInputStart!=null&&await n.onInputStart({toolCallId:e.id,messages:re,abortSignal:a,experimental_context:te}),t.enqueue({...e,dynamic:n?.type===`dynamic`});break}case`tool-input-end`:delete we[e.id],t.enqueue(e);break;case`tool-input-delta`:{let n=we[e.id],r=l?.[n];r?.onInputDelta!=null&&await r.onInputDelta({inputTextDelta:e.delta,toolCallId:e.id,messages:re,abortSignal:a,experimental_context:te}),t.enqueue(e);break}case`error`:t.enqueue(e),Te=`error`;break;case`raw`:D&&t.enqueue(e);break;default:{let e=s;throw Error(`Unknown chunk type: ${e}`)}}},async flush(e){let n=xe.length>0?JSON.stringify(xe):void 0;try{fe.setAttributes(sw({telemetry:t,attributes:{"ai.response.finishReason":Te,"ai.response.text":{output:()=>Ae},"ai.response.toolCalls":{output:()=>n},"ai.response.id":ke.id,"ai.response.model":ke.modelId,"ai.response.timestamp":ke.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(De),"ai.usage.inputTokens":Ee.inputTokens,"ai.usage.outputTokens":Ee.outputTokens,"ai.usage.totalTokens":Ee.totalTokens,"ai.usage.reasoningTokens":Ee.reasoningTokens,"ai.usage.cachedInputTokens":Ee.cachedInputTokens,"gen_ai.response.finish_reasons":[Te],"gen_ai.response.id":ke.id,"gen_ai.response.model":ke.modelId,"gen_ai.usage.input_tokens":Ee.inputTokens,"gen_ai.usage.output_tokens":Ee.outputTokens}}))}catch{}finally{fe.end()}e.enqueue({type:`finish-step`,finishReason:Te,usage:Ee,providerMetadata:De,response:{...ke,headers:ue?.headers}});let a=lw(v,Ee);await E.promise;let o=xe.filter(e=>e.providerExecuted!==!0),s=Se.filter(e=>e.providerExecuted!==!0);if(o.length>0&&s.length===o.length&&!await Sw({stopConditions:m,steps:oe})){d.push(...Tw({content:oe[oe.length-1].content,tools:l}));try{await i({currentStep:r+1,responseMessages:d,usage:a})}catch(t){e.enqueue({type:`error`,error:t}),ye.closeStream()}}else e.enqueue({type:`finish`,finishReason:Te,totalUsage:a}),ye.closeStream()}})))}await i({currentStep:0,responseMessages:[],usage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0}})}}).catch(e=>{ye.addStream(new ReadableStream({start(t){t.enqueue({type:`error`,error:e}),t.close()}})),ye.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return Kw(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type===`text-delta`&&t.enqueue(e.text)}})))}get fullStream(){return Kw(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await qw({stream:this.fullStream,onError:e?.onError})}catch(n){(t=e?.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new sS;return Kw(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:i=!0,sendSources:a=!1,sendStart:o=!0,sendFinish:s=!0,onError:c=$l}={}){let l=t==null?void 0:Pw({originalMessages:e,responseMessageId:t}),u={},d=e=>{var t,n;let r=u[e],i=(n=(t=this.tools)?.[r])?.type===`dynamic`;return i?!0:void 0},f=this.fullStream.pipeThrough(new TransformStream({transform:async(e,t)=>{let n=r?.({part:e}),f=e.type;switch(f){case`text-start`:t.enqueue({type:`text-start`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`text-delta`:t.enqueue({type:`text-delta`,id:e.id,delta:e.text,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`text-end`:t.enqueue({type:`text-end`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`reasoning-start`:t.enqueue({type:`reasoning-start`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`reasoning-delta`:i&&t.enqueue({type:`reasoning-delta`,id:e.id,delta:e.text,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`reasoning-end`:t.enqueue({type:`reasoning-end`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`file`:t.enqueue({type:`file`,mediaType:e.file.mediaType,url:`data:${e.file.mediaType};base64,${e.file.base64}`});break;case`source`:a&&e.sourceType===`url`&&t.enqueue({type:`source-url`,sourceId:e.id,url:e.url,title:e.title,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}}),a&&e.sourceType===`document`&&t.enqueue({type:`source-document`,sourceId:e.id,mediaType:e.mediaType,title:e.title,filename:e.filename,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`tool-input-start`:{u[e.id]=e.toolName;let n=d(e.id);t.enqueue({type:`tool-input-start`,toolCallId:e.id,toolName:e.toolName,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...n==null?{}:{dynamic:n}});break}case`tool-input-delta`:t.enqueue({type:`tool-input-delta`,toolCallId:e.id,inputTextDelta:e.delta});break;case`tool-call`:{u[e.toolCallId]=e.toolName;let n=d(e.toolCallId);e.invalid?t.enqueue({type:`tool-input-error`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata},...n==null?{}:{dynamic:n},errorText:c(e.error)}):t.enqueue({type:`tool-input-available`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata},...n==null?{}:{dynamic:n}});break}case`tool-result`:{let n=d(e.toolCallId);t.enqueue({type:`tool-output-available`,toolCallId:e.toolCallId,output:e.output,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...e.preliminary==null?{}:{preliminary:e.preliminary},...n==null?{}:{dynamic:n}});break}case`tool-error`:{let n=d(e.toolCallId);t.enqueue({type:`tool-output-error`,toolCallId:e.toolCallId,errorText:c(e.error),...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...n==null?{}:{dynamic:n}});break}case`error`:t.enqueue({type:`error`,errorText:c(e.error)});break;case`start-step`:t.enqueue({type:`start-step`});break;case`finish-step`:t.enqueue({type:`finish-step`});break;case`start`:o&&t.enqueue({type:`start`,...n==null?{}:{messageMetadata:n},...l==null?{}:{messageId:l}});break;case`finish`:s&&t.enqueue({type:`finish`,...n==null?{}:{messageMetadata:n}});break;case`abort`:t.enqueue(e);break;case`tool-input-end`:break;case`raw`:break;default:{let e=f;throw Error(`Unknown chunk type: ${e}`)}}n!=null&&f!==`start`&&f!==`finish`&&t.enqueue({type:`message-metadata`,messageMetadata:n})}}));return Kw(Ww({stream:f,messageId:l??t?.(),originalMessages:e,onFinish:n,onError:c}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:i,sendReasoning:a,sendSources:o,sendFinish:s,sendStart:c,onError:l,...u}={}){Gw({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:i,sendReasoning:a,sendSources:o,sendFinish:s,sendStart:c,onError:l}),...u})}pipeTextStreamToResponse(e,t){Aw({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:i,sendSources:a,sendFinish:o,sendStart:s,onError:c,...l}={}){return Nw({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:i,sendSources:a,sendFinish:o,sendStart:s,onError:c}),...l})}toTextStreamResponse(e){return Ow({textStream:this.textStream,...e})}},rT=Fv({prefix:`aiobj`,size:24}),iT=Fv({prefix:`aiobj`,size:24}),aT={};nS(aT,{object:()=>sT,text:()=>oT});var oT=()=>({type:`text`,responseFormat:{type:`text`},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),sT=({schema:e})=>{let t=Dy(e);return{type:`object`,responseFormat:{type:`json`,schema:t.jsonSchema},async parsePartial({text:e}){let t=await zw(e);switch(t.state){case`failed-parse`:case`undefined-input`:return;case`repaired-parse`:case`successful-parse`:return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},async parseOutput({text:e},n){let r=await oy({text:e});if(!r.success)throw new PS({message:`No object generated: could not parse the response.`,cause:r.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});let i=await iy({value:r.value,schema:t});if(!i.success)throw new PS({message:`No object generated: response did not match schema.`,cause:i.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});return i.value}}},cT=`AI_NoSuchProviderError`,lT=`vercel.ai.error.${cT}`,uT=Symbol.for(lT),dT;dT=uT;var fT=Jg({name:B(),version:B()}),pT=Jg({_meta:c_(K({}).loose())}),mT=pT,hT=K({method:B(),params:c_(pT)}),gT=Jg({experimental:c_(K({}).loose()),logging:c_(K({}).loose()),prompts:c_(Jg({listChanged:c_(U())})),resources:c_(Jg({subscribe:c_(U()),listChanged:c_(U())})),tools:c_(Jg({listChanged:c_(U())}))}),_T=mT.extend({protocolVersion:B(),capabilities:gT,serverInfo:fT,instructions:c_(B())}),vT=mT.extend({nextCursor:c_(B())}),yT=K({name:B(),description:c_(B()),inputSchema:K({type:Y(`object`),properties:c_(K({}).loose())}).loose()}).loose(),bT=vT.extend({tools:G(yT)}),xT=K({type:Y(`text`),text:B()}).loose(),ST=K({type:Y(`image`),data:jg(),mimeType:B()}).loose(),CT=K({uri:B(),mimeType:c_(B())}).loose(),wT=CT.extend({text:B()}),TT=CT.extend({blob:jg()}),ET=K({type:Y(`resource`),resource:J([wT,TT])}).loose(),DT=mT.extend({content:G(J([xT,ST,ET])),isError:U().default(!1).optional()}).or(mT.extend({toolResult:W()})),OT=`2.0`,kT=K({jsonrpc:Y(OT),id:J([B(),H().int()])}).merge(hT).strict(),AT=K({jsonrpc:Y(OT),id:J([B(),H().int()]),result:mT}).strict(),jT=K({jsonrpc:Y(OT),id:J([B(),H().int()]),error:K({code:H().int(),message:B(),data:c_(W())})}).strict(),MT=K({jsonrpc:Y(OT)}).merge(K({method:B(),params:c_(pT)})).strict(),NT=J([kT,MT,AT,jT]),PT=K({type:Y(`text`),text:B(),state:r_([`streaming`,`done`]).optional(),providerMetadata:$.optional()}),FT=K({type:Y(`reasoning`),text:B(),state:r_([`streaming`,`done`]).optional(),providerMetadata:$.optional()}),IT=K({type:Y(`source-url`),sourceId:B(),url:B(),title:B().optional(),providerMetadata:$.optional()}),LT=K({type:Y(`source-document`),sourceId:B(),mediaType:B(),title:B(),filename:B().optional(),providerMetadata:$.optional()}),RT=K({type:Y(`file`),mediaType:B(),filename:B().optional(),url:B(),providerMetadata:$.optional()}),zT=K({type:Y(`step-start`)}),BT=K({type:B().startsWith(`data-`),id:B().optional(),data:W()}),VT=[K({type:Y(`dynamic-tool`),toolName:B(),toolCallId:B(),state:Y(`input-streaming`),input:W().optional(),output:Gg().optional(),errorText:Gg().optional()}),K({type:Y(`dynamic-tool`),toolName:B(),toolCallId:B(),state:Y(`input-available`),input:W(),output:Gg().optional(),errorText:Gg().optional(),callProviderMetadata:$.optional()}),K({type:Y(`dynamic-tool`),toolName:B(),toolCallId:B(),state:Y(`output-available`),input:W(),output:W(),errorText:Gg().optional(),callProviderMetadata:$.optional(),preliminary:U().optional()}),K({type:Y(`dynamic-tool`),toolName:B(),toolCallId:B(),state:Y(`output-error`),input:W(),output:Gg().optional(),errorText:B(),callProviderMetadata:$.optional()})],HT=[K({type:B().startsWith(`tool-`),toolCallId:B(),state:Y(`input-streaming`),input:W().optional(),output:Gg().optional(),errorText:Gg().optional()}),K({type:B().startsWith(`tool-`),toolCallId:B(),state:Y(`input-available`),input:W(),output:Gg().optional(),errorText:Gg().optional(),callProviderMetadata:$.optional()}),K({type:B().startsWith(`tool-`),toolCallId:B(),state:Y(`output-available`),input:W(),output:W(),errorText:Gg().optional(),callProviderMetadata:$.optional(),preliminary:U().optional()}),K({type:B().startsWith(`tool-`),toolCallId:B(),state:Y(`output-error`),input:W(),output:Gg().optional(),errorText:B(),callProviderMetadata:$.optional()})],UT=K({id:B(),role:r_([`system`,`user`,`assistant`]),metadata:W().optional(),parts:G(J([PT,FT,IT,LT,RT,zT,BT,...VT,...HT]))});function WT(e){var t,n;return(n=(t=e?.providerOptions)?.openaiCompatible)??{}}function GT(e){let t=[];for(let{role:n,content:r,...i}of e){let e=WT({...i});switch(n){case`system`:t.push({role:`system`,content:r,...e});break;case`user`:if(r.length===1&&r[0].type===`text`){t.push({role:`user`,content:r[0].text,...WT(r[0])});break}t.push({role:`user`,content:r.map(e=>{let t=WT(e);switch(e.type){case`text`:return{type:`text`,text:e.text,...t};case`file`:if(e.mediaType.startsWith(`image/`)){let n=e.mediaType===`image/*`?`image/jpeg`:e.mediaType;return{type:`image_url`,image_url:{url:e.data instanceof URL?e.data.toString():`data:${n};base64,${My(e.data)}`},...t}}else throw new $u({functionality:`file part media type ${e.mediaType}`})}}),...e});break;case`assistant`:{let n=``,i=[];for(let e of r){let t=WT(e);switch(e.type){case`text`:n+=e.text;break;case`tool-call`:i.push({id:e.toolCallId,type:`function`,function:{name:e.toolName,arguments:JSON.stringify(e.input)},...t});break}}t.push({role:`assistant`,content:n,tool_calls:i.length>0?i:void 0,...e});break}case`tool`:for(let e of r){let n=e.output,r;switch(n.type){case`text`:case`error-text`:r=n.value;break;case`content`:case`json`:case`error-json`:r=JSON.stringify(n.value);break}let i=WT(e);t.push({role:`tool`,tool_call_id:e.toolCallId,content:r,...i})}break;default:{let e=n;throw Error(`Unsupported role: ${e}`)}}}return t}function KT({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n==null?void 0:new Date(n*1e3)}}function qT(e){switch(e){case`stop`:return`stop`;case`length`:return`length`;case`content_filter`:return`content-filter`;case`function_call`:case`tool_calls`:return`tool-calls`;default:return`unknown`}}var JT=K({user:B().optional(),reasoningEffort:B().optional()}),YT=K({error:K({message:B(),type:B().nullish(),param:Hg().nullish(),code:J([B(),H()]).nullish()})}),XT={errorSchema:YT,errorToMessage:e=>e.error.message};function ZT({tools:e,toolChoice:t}){e=e?.length?e:void 0;let n=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let r=[];for(let t of e)t.type===`provider-defined`?n.push({type:`unsupported-tool`,tool:t}):r.push({type:`function`,function:{name:t.name,description:t.description,parameters:t.inputSchema}});if(t==null)return{tools:r,toolChoice:void 0,toolWarnings:n};let i=t.type;switch(i){case`auto`:case`none`:case`required`:return{tools:r,toolChoice:i,toolWarnings:n};case`tool`:return{tools:r,toolChoice:{type:`function`,function:{name:t.toolName}},toolWarnings:n};default:{let e=i;throw new $u({functionality:`tool choice type: ${e}`})}}}var QT=class{constructor(e,t){this.specificationVersion=`v2`;var n,r;this.modelId=e,this.config=t;let i=(n=t.errorStructure)??XT;this.chunkSchema=tE(i.errorSchema),this.failedResponseHandler=hy(i),this.supportsStructuredOutputs=(r=t.supportsStructuredOutputs)??!1}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(`.`)[0].trim()}get supportedUrls(){var e,t,n;return(n=(t=(e=this.config).supportedUrls)?.call(e))??{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:i,frequencyPenalty:a,presencePenalty:o,providerOptions:s,stopSequences:c,responseFormat:l,seed:u,toolChoice:d,tools:f}){var p,m,h;let g=[],_=Object.assign((p=await ly({provider:`openai-compatible`,providerOptions:s,schema:JT}))??{},(m=await ly({provider:this.providerOptionsName,providerOptions:s,schema:JT}))??{});i!=null&&g.push({type:`unsupported-setting`,setting:`topK`}),l?.type===`json`&&l.schema!=null&&!this.supportsStructuredOutputs&&g.push({type:`unsupported-setting`,setting:`responseFormat`,details:`JSON response format schema is only supported with structuredOutputs`});let{tools:v,toolChoice:y,toolWarnings:b}=ZT({tools:f,toolChoice:d});return{args:{model:this.modelId,user:_.user,max_tokens:t,temperature:n,top_p:r,frequency_penalty:a,presence_penalty:o,response_format:l?.type===`json`?this.supportsStructuredOutputs===!0&&l.schema!=null?{type:`json_schema`,json_schema:{schema:l.schema,name:(h=l.name)??`response`,description:l.description}}:{type:`json_object`}:void 0,stop:c,seed:u,...s?.[this.providerOptionsName],reasoning_effort:_.reasoningEffort,messages:GT(e),tools:v,tool_choice:y},warnings:[...g,...b]}}async doGenerate(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_;let{args:v,warnings:y}=await this.getArgs({...e}),b=JSON.stringify(v),{responseHeaders:ee,value:x,rawValue:S}=await dy({url:this.config.url({path:`/chat/completions`,modelId:this.modelId}),headers:jv(this.config.headers(),e.headers),body:v,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:_y(eE),abortSignal:e.abortSignal,fetch:this.config.fetch}),C=x.choices[0],w=[],T=C.message.content;T!=null&&T.length>0&&w.push({type:`text`,text:T});let te=(t=C.message.reasoning_content)??C.message.reasoning;if(te!=null&&te.length>0&&w.push({type:`reasoning`,text:te}),C.message.tool_calls!=null)for(let e of C.message.tool_calls)w.push({type:`tool-call`,toolCallId:(n=e.id)??Iv(),toolName:e.function.name,input:e.function.arguments});let E={[this.providerOptionsName]:{},...await(i=(r=this.config.metadataExtractor)?.extractMetadata)?.call(r,{parsedBody:S})},D=(a=x.usage)?.completion_tokens_details;return D?.accepted_prediction_tokens!=null&&(E[this.providerOptionsName].acceptedPredictionTokens=D?.accepted_prediction_tokens),D?.rejected_prediction_tokens!=null&&(E[this.providerOptionsName].rejectedPredictionTokens=D?.rejected_prediction_tokens),{content:w,finishReason:qT(C.finish_reason),usage:{inputTokens:(s=(o=x.usage)?.prompt_tokens)??void 0,outputTokens:(l=(c=x.usage)?.completion_tokens)??void 0,totalTokens:(d=(u=x.usage)?.total_tokens)??void 0,reasoningTokens:(m=(p=(f=x.usage)?.completion_tokens_details)?.reasoning_tokens)??void 0,cachedInputTokens:(_=(g=(h=x.usage)?.prompt_tokens_details)?.cached_tokens)??void 0},providerMetadata:E,request:{body:b},response:{...KT(x),headers:ee,body:S},warnings:y}}async doStream(e){var t;let{args:n,warnings:r}=await this.getArgs({...e}),i={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},a=(t=this.config.metadataExtractor)?.createStreamExtractor(),{responseHeaders:o,value:s}=await dy({url:this.config.url({path:`/chat/completions`,modelId:this.modelId}),headers:jv(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:gy(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=[],l=`unknown`,u={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0},totalTokens:void 0},d=!0,f=this.providerOptionsName,p=!1,m=!1;return{stream:s.pipeThrough(new TransformStream({start(e){e.enqueue({type:`stream-start`,warnings:r})},transform(t,n){var r,i,o,s,f,h,g,_,v,y,b,ee,x;if(e.includeRawChunks&&n.enqueue({type:`raw`,rawValue:t.rawValue}),!t.success){l=`error`,n.enqueue({type:`error`,error:t.error});return}let S=t.value;if(a?.processChunk(t.rawValue),`error`in S){l=`error`,n.enqueue({type:`error`,error:S.error.message});return}if(d&&(d=!1,n.enqueue({type:`response-metadata`,...KT(S)})),S.usage!=null){let{prompt_tokens:e,completion_tokens:t,total_tokens:n,prompt_tokens_details:r,completion_tokens_details:i}=S.usage;u.promptTokens=e??void 0,u.completionTokens=t??void 0,u.totalTokens=n??void 0,i?.reasoning_tokens!=null&&(u.completionTokensDetails.reasoningTokens=i?.reasoning_tokens),i?.accepted_prediction_tokens!=null&&(u.completionTokensDetails.acceptedPredictionTokens=i?.accepted_prediction_tokens),i?.rejected_prediction_tokens!=null&&(u.completionTokensDetails.rejectedPredictionTokens=i?.rejected_prediction_tokens),r?.cached_tokens!=null&&(u.promptTokensDetails.cachedTokens=r?.cached_tokens)}let C=S.choices[0];if(C?.finish_reason!=null&&(l=qT(C.finish_reason)),C?.delta==null)return;let w=C.delta,T=(r=w.reasoning_content)??w.reasoning;if(T&&(p||(n.enqueue({type:`reasoning-start`,id:`reasoning-0`}),p=!0),n.enqueue({type:`reasoning-delta`,id:`reasoning-0`,delta:T})),w.content&&(m||(n.enqueue({type:`text-start`,id:`txt-0`}),m=!0),n.enqueue({type:`text-delta`,id:`txt-0`,delta:w.content})),w.tool_calls!=null)for(let e of w.tool_calls){let t=e.index;if(c[t]==null){if(e.id==null)throw new mu({data:e,message:`Expected 'id' to be a string.`});if((i=e.function)?.name==null)throw new mu({data:e,message:`Expected 'function.name' to be a string.`});n.enqueue({type:`tool-input-start`,id:e.id,toolName:e.function.name}),c[t]={id:e.id,type:`function`,function:{name:e.function.name,arguments:(o=e.function.arguments)??``},hasFinished:!1};let r=c[t];(s=r.function)?.name!=null&&(f=r.function)?.arguments!=null&&(r.function.arguments.length>0&&n.enqueue({type:`tool-input-delta`,id:r.id,delta:r.function.arguments}),sy(r.function.arguments)&&(n.enqueue({type:`tool-input-end`,id:r.id}),n.enqueue({type:`tool-call`,toolCallId:(h=r.id)??Iv(),toolName:r.function.name,input:r.function.arguments}),r.hasFinished=!0));continue}let r=c[t];if(r.hasFinished)continue;(g=e.function)?.arguments!=null&&(r.function.arguments+=(v=(_=e.function)?.arguments)??``),n.enqueue({type:`tool-input-delta`,id:r.id,delta:(y=e.function.arguments)??``}),(b=r.function)?.name!=null&&(ee=r.function)?.arguments!=null&&sy(r.function.arguments)&&(n.enqueue({type:`tool-input-end`,id:r.id}),n.enqueue({type:`tool-call`,toolCallId:(x=r.id)??Iv(),toolName:r.function.name,input:r.function.arguments}),r.hasFinished=!0)}},flush(e){var t,n,r,i,o,s;p&&e.enqueue({type:`reasoning-end`,id:`reasoning-0`}),m&&e.enqueue({type:`text-end`,id:`txt-0`});for(let n of c.filter(e=>!e.hasFinished))e.enqueue({type:`tool-input-end`,id:n.id}),e.enqueue({type:`tool-call`,toolCallId:(t=n.id)??Iv(),toolName:n.function.name,input:n.function.arguments});let d={[f]:{},...a?.buildMetadata()};u.completionTokensDetails.acceptedPredictionTokens!=null&&(d[f].acceptedPredictionTokens=u.completionTokensDetails.acceptedPredictionTokens),u.completionTokensDetails.rejectedPredictionTokens!=null&&(d[f].rejectedPredictionTokens=u.completionTokensDetails.rejectedPredictionTokens),e.enqueue({type:`finish`,finishReason:l,usage:{inputTokens:(n=u.promptTokens)??void 0,outputTokens:(r=u.completionTokens)??void 0,totalTokens:(i=u.totalTokens)??void 0,reasoningTokens:(o=u.completionTokensDetails.reasoningTokens)??void 0,cachedInputTokens:(s=u.promptTokensDetails.cachedTokens)??void 0},providerMetadata:d})}})),request:{body:i},response:{headers:o}}}},$T=K({prompt_tokens:H().nullish(),completion_tokens:H().nullish(),total_tokens:H().nullish(),prompt_tokens_details:K({cached_tokens:H().nullish()}).nullish(),completion_tokens_details:K({reasoning_tokens:H().nullish(),accepted_prediction_tokens:H().nullish(),rejected_prediction_tokens:H().nullish()}).nullish()}).nullish(),eE=K({id:B().nullish(),created:H().nullish(),model:B().nullish(),choices:G(K({message:K({role:Y(`assistant`).nullish(),content:B().nullish(),reasoning_content:B().nullish(),reasoning:B().nullish(),tool_calls:G(K({id:B().nullish(),function:K({name:B(),arguments:B()})})).nullish()}),finish_reason:B().nullish()})),usage:$T}),tE=e=>J([K({id:B().nullish(),created:H().nullish(),model:B().nullish(),choices:G(K({delta:K({role:r_([`assistant`]).nullish(),content:B().nullish(),reasoning_content:B().nullish(),reasoning:B().nullish(),tool_calls:G(K({index:H(),id:B().nullish(),function:K({name:B().nullish(),arguments:B().nullish()})})).nullish()}).nullish(),finish_reason:B().nullish()})),usage:$T}),e]);function nE({prompt:e,user:t=`user`,assistant:n=`assistant`}){let r=``;e[0].role===`system`&&(r+=`${e[0].content}

`,e=e.slice(1));for(let{role:i,content:a}of e)switch(i){case`system`:throw new lu({message:"Unexpected system message in prompt: ${content}",prompt:e});case`user`:{let e=a.map(e=>{switch(e.type){case`text`:return e.text}}).filter(Boolean).join(``);r+=`${t}:
${e}

`;break}case`assistant`:{let e=a.map(e=>{switch(e.type){case`text`:return e.text;case`tool-call`:throw new $u({functionality:`tool-call messages`})}}).join(``);r+=`${n}:
${e}

`;break}case`tool`:throw new $u({functionality:`tool messages`});default:{let e=i;throw Error(`Unsupported role: ${e}`)}}return r+=`${n}:
`,{prompt:r,stopSequences:[`
${t}:`]}}function rE({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n==null?void 0:new Date(n*1e3)}}function iE(e){switch(e){case`stop`:return`stop`;case`length`:return`length`;case`content_filter`:return`content-filter`;case`function_call`:case`tool_calls`:return`tool-calls`;default:return`unknown`}}var aE=K({echo:U().optional(),logitBias:t_(B(),H()).optional(),suffix:B().optional(),user:B().optional()}),oE=class{constructor(e,t){this.specificationVersion=`v2`;var n;this.modelId=e,this.config=t;let r=(n=t.errorStructure)??XT;this.chunkSchema=lE(r.errorSchema),this.failedResponseHandler=hy(r)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(`.`)[0].trim()}get supportedUrls(){var e,t,n;return(n=(t=(e=this.config).supportedUrls)?.call(e))??{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:i,frequencyPenalty:a,presencePenalty:o,stopSequences:s,responseFormat:c,seed:l,providerOptions:u,tools:d,toolChoice:f}){var p;let m=[],h=(p=await ly({provider:this.providerOptionsName,providerOptions:u,schema:aE}))??{};i!=null&&m.push({type:`unsupported-setting`,setting:`topK`}),d?.length&&m.push({type:`unsupported-setting`,setting:`tools`}),f!=null&&m.push({type:`unsupported-setting`,setting:`toolChoice`}),c!=null&&c.type!==`text`&&m.push({type:`unsupported-setting`,setting:`responseFormat`,details:`JSON response format is not supported.`});let{prompt:g,stopSequences:_}=nE({prompt:e}),v=[..._??[],...s??[]];return{args:{model:this.modelId,echo:h.echo,logit_bias:h.logitBias,suffix:h.suffix,user:h.user,max_tokens:t,temperature:n,top_p:r,frequency_penalty:a,presence_penalty:o,seed:l,...u?.[this.providerOptionsName],prompt:g,stop:v.length>0?v:void 0},warnings:m}}async doGenerate(e){var t,n,r,i,a,o;let{args:s,warnings:c}=await this.getArgs(e),{responseHeaders:l,value:u,rawValue:d}=await dy({url:this.config.url({path:`/completions`,modelId:this.modelId}),headers:jv(this.config.headers(),e.headers),body:s,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:_y(cE),abortSignal:e.abortSignal,fetch:this.config.fetch}),f=u.choices[0],p=[];return f.text!=null&&f.text.length>0&&p.push({type:`text`,text:f.text}),{content:p,usage:{inputTokens:(n=(t=u.usage)?.prompt_tokens)??void 0,outputTokens:(i=(r=u.usage)?.completion_tokens)??void 0,totalTokens:(o=(a=u.usage)?.total_tokens)??void 0},finishReason:iE(f.finish_reason),request:{body:s},response:{...rE(u),headers:l,body:d},warnings:c}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:i,value:a}=await dy({url:this.config.url({path:`/completions`,modelId:this.modelId}),headers:jv(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:gy(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),o=`unknown`,s={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},c=!0;return{stream:a.pipeThrough(new TransformStream({start(e){e.enqueue({type:`stream-start`,warnings:n})},transform(t,n){var r,i,a;if(e.includeRawChunks&&n.enqueue({type:`raw`,rawValue:t.rawValue}),!t.success){o=`error`,n.enqueue({type:`error`,error:t.error});return}let l=t.value;if(`error`in l){o=`error`,n.enqueue({type:`error`,error:l.error});return}c&&(c=!1,n.enqueue({type:`response-metadata`,...rE(l)}),n.enqueue({type:`text-start`,id:`0`})),l.usage!=null&&(s.inputTokens=(r=l.usage.prompt_tokens)??void 0,s.outputTokens=(i=l.usage.completion_tokens)??void 0,s.totalTokens=(a=l.usage.total_tokens)??void 0);let u=l.choices[0];u?.finish_reason!=null&&(o=iE(u.finish_reason)),u?.text!=null&&n.enqueue({type:`text-delta`,id:`0`,delta:u.text})},flush(e){c||e.enqueue({type:`text-end`,id:`0`}),e.enqueue({type:`finish`,finishReason:o,usage:s})}})),request:{body:r},response:{headers:i}}}},sE=K({prompt_tokens:H(),completion_tokens:H(),total_tokens:H()}),cE=K({id:B().nullish(),created:H().nullish(),model:B().nullish(),choices:G(K({text:B(),finish_reason:B()})),usage:sE.nullish()}),lE=e=>J([K({id:B().nullish(),created:H().nullish(),model:B().nullish(),choices:G(K({text:B(),finish_reason:B().nullish(),index:H()})),usage:sE.nullish()}),e]),uE=K({dimensions:H().optional(),user:B().optional()}),dE=class{constructor(e,t){this.specificationVersion=`v2`,this.modelId=e,this.config=t}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)??2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)??!0}get providerOptionsName(){return this.config.provider.split(`.`)[0].trim()}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var i,a,o;let s=Object.assign((i=await ly({provider:`openai-compatible`,providerOptions:r,schema:uE}))??{},(a=await ly({provider:this.providerOptionsName,providerOptions:r,schema:uE}))??{});if(e.length>this.maxEmbeddingsPerCall)throw new Hu({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:c,value:l,rawValue:u}=await dy({url:this.config.url({path:`/embeddings`,modelId:this.modelId}),headers:jv(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:`float`,dimensions:s.dimensions,user:s.user},failedResponseHandler:hy((o=this.config.errorStructure)??XT),successfulResponseHandler:_y(fE),abortSignal:n,fetch:this.config.fetch});return{embeddings:l.data.map(e=>e.embedding),usage:l.usage?{tokens:l.usage.prompt_tokens}:void 0,providerMetadata:l.providerMetadata,response:{headers:c,body:u}}}},fE=K({data:G(K({embedding:G(H())})),usage:K({prompt_tokens:H()}).nullish(),providerMetadata:t_(B(),t_(B(),Hg())).optional()}),pE=K({data:G(K({b64_json:B()}))}),mE={"accounts/fireworks/models/flux-1-dev-fp8":{urlFormat:`workflows`},"accounts/fireworks/models/flux-1-schnell-fp8":{urlFormat:`workflows`},"accounts/fireworks/models/playground-v2-5-1024px-aesthetic":{urlFormat:`image_generation`,supportsSize:!0},"accounts/fireworks/models/japanese-stable-diffusion-xl":{urlFormat:`image_generation`,supportsSize:!0},"accounts/fireworks/models/playground-v2-1024px-aesthetic":{urlFormat:`image_generation`,supportsSize:!0},"accounts/fireworks/models/stable-diffusion-xl-1024-v1-0":{urlFormat:`image_generation`,supportsSize:!0},"accounts/fireworks/models/SSD-1B":{urlFormat:`image_generation`,supportsSize:!0}};function hE(e,t){var n;switch((n=mE[t])?.urlFormat){case`image_generation`:return`${e}/image_generation/${t}`;case`workflows`:default:return`${e}/workflows/${t}/text_to_image`}}var gE=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion=`v2`,this.maxImagesPerCall=1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:a,headers:o,abortSignal:s}){var c,l,u,d;let f=[],p=mE[this.modelId];!p?.supportsSize&&n!=null&&f.push({type:`unsupported-setting`,setting:`size`,details:"This model does not support the `size` option. Use `aspectRatio` instead."}),p?.supportsSize&&r!=null&&f.push({type:`unsupported-setting`,setting:`aspectRatio`,details:"This model does not support the `aspectRatio` option."});let m=n?.split(`x`),h=(u=(l=(c=this.config._internal)?.currentDate)?.call(c))??new Date,{value:g,responseHeaders:_}=await dy({url:hE(this.config.baseURL,this.modelId),headers:jv(this.config.headers(),o),body:{prompt:e,aspect_ratio:r,seed:i,samples:t,...m&&{width:m[0],height:m[1]},...(d=a.fireworks)??{}},failedResponseHandler:yy(),successfulResponseHandler:vy(),abortSignal:s,fetch:this.config.fetch});return{images:[g],warnings:f,response:{timestamp:h,modelId:this.modelId,headers:_}}}},_E=K({error:B()}),vE={errorSchema:_E,errorToMessage:e=>e.error},yE=`https://api.fireworks.ai/inference/v1`;function bE(e={}){var t;let n=Ny((t=e.baseURL)??yE),r=()=>({Authorization:`Bearer ${Gv({apiKey:e.apiKey,environmentVariableName:`FIREWORKS_API_KEY`,description:`Fireworks API key`})}`,...e.headers}),i=t=>({provider:`fireworks.${t}`,url:({path:e})=>`${n}${e}`,headers:r,fetch:e.fetch}),a=e=>new QT(e,{...i(`chat`),errorStructure:vE}),o=e=>new oE(e,{...i(`completion`),errorStructure:vE}),s=e=>new dE(e,{...i(`embedding`),errorStructure:vE}),c=e=>new gE(e,{...i(`image`),baseURL:n??yE}),l=e=>a(e);return l.completionModel=o,l.chatModel=a,l.languageModel=a,l.textEmbeddingModel=s,l.image=c,l.imageModel=c,l}var xE=bE();const SE=bE({apiKey:`fw_3ZTxSc3HHi7jKJjeBip7xMht`}),CE=SE(`accounts/fireworks/models/deepseek-v3`),wE=SE(`accounts/fireworks/models/glm-4p5`),TE=SE(`accounts/fireworks/models/llama-v3p1-70b-instruct`);export{Rl as Markdown,CE as deepseek,K as object,eT as streamText,B as string,py as tool};